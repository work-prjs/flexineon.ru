!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("swQ requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function s(e){var t=e.length,s=J.type(e);return"function"!==s&&!J.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===s||0===t||"number"==typeof t&&t>0&&t-1 in e))}function n(e,t,s){if(J.isFunction(t))return J.grep(e,function(e,n){return!!t.call(e,n,e)!==s});if(t.nodeType)return J.grep(e,function(e){return e===t!==s});if("string"==typeof t){if(ae.test(t))return J.filter(t,e,s);t=J.filter(t,e)}return J.grep(e,function(e){return K.call(t,e)>=0!==s})}function i(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t=ue[e]={};return J.each(e.match(he)||[],function(e,s){t[s]=!0}),t}function a(){X.removeEventListener("DOMContentLoaded",a,!1),e.removeEventListener("load",a,!1),J.ready()}function r(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=J.expando+Math.random()}function l(e,t,s){var n;if(void 0===s&&1===e.nodeType)if(n="data-"+t.replace(ve,"-$1").toLowerCase(),"string"==typeof(s=e.getAttribute(n))){try{s="true"===s||"false"!==s&&("null"===s?null:+s+""===s?+s:we.test(s)?J.parseJSON(s):s)}catch(e){}me.set(e,t,s)}else s=void 0;return s}function c(){return!0}function d(){return!1}function h(){try{return X.activeElement}catch(e){}}function u(e,t){return J.nodeName(e,"table")&&J.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function p(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function g(e){var t=Ne.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function f(e,t){for(var s=0,n=e.length;n>s;s++)fe.set(e[s],"globalEval",!t||fe.get(t[s],"globalEval"))}function m(e,t){var s,n,i,o,a,r,l,c;if(1===t.nodeType){if(fe.hasData(e)&&(o=fe.access(e),a=fe.set(t,o),c=o.events)){delete a.handle,a.events={};for(i in c)for(s=0,n=c[i].length;n>s;s++)J.event.add(t,i,c[i][s])}me.hasData(e)&&(r=me.access(e),l=J.extend({},r),me.set(t,l))}}function w(e,t){var s=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&J.nodeName(e,t)?J.merge([e],s):s}function v(e,t){var s=t.nodeName.toLowerCase();"input"===s&&xe.test(e.type)?t.checked=e.checked:("input"===s||"textarea"===s)&&(t.defaultValue=e.defaultValue)}function y(t,s){var n,i=J(s.createElement(t)).appendTo(s.body),o=e.getDefaultComputedStyle&&(n=e.getDefaultComputedStyle(i[0]))?n.display:J.css(i[0],"display");return i.detach(),o}function b(e){var t=X,s=He[e];return s||("none"!==(s=y(e,t))&&s||(Fe=(Fe||J("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),(t=Fe[0].contentDocument).write(),t.close(),s=y(e,t),Fe.detach()),He[e]=s),s}function k(e,t,s){var n,i,o,a,r=e.style;return(s=s||Ue(e))&&(a=s.getPropertyValue(t)||s[t]),s&&(""!==a||J.contains(e.ownerDocument,e)||(a=J.style(e,t)),je.test(a)&&Le.test(t)&&(n=r.width,i=r.minWidth,o=r.maxWidth,r.minWidth=r.maxWidth=r.width=a,a=s.width,r.width=n,r.minWidth=i,r.maxWidth=o)),void 0!==a?a+"":a}function x(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function T(e,t){if(t in e)return t;for(var s=t[0].toUpperCase()+t.slice(1),n=t,i=Ge.length;i--;)if((t=Ge[i]+s)in e)return t;return n}function C(e,t,s){var n=We.exec(t);return n?Math.max(0,n[1]-(s||0))+(n[2]||"px"):t}function _(e,t,s,n,i){for(var o=s===(n?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===s&&(a+=J.css(e,s+be[o],!0,i)),n?("content"===s&&(a-=J.css(e,"padding"+be[o],!0,i)),"margin"!==s&&(a-=J.css(e,"border"+be[o]+"Width",!0,i))):(a+=J.css(e,"padding"+be[o],!0,i),"padding"!==s&&(a+=J.css(e,"border"+be[o]+"Width",!0,i)));return a}function S(e,t,s){var n=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Ue(e),a="border-box"===J.css(e,"boxSizing",!1,o);if(0>=i||null==i){if((0>(i=k(e,t,o))||null==i)&&(i=e.style[t]),je.test(i))return i;n=a&&(Y.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+_(e,t,s||(a?"border":"content"),n,o)+"px"}function D(e,t){for(var s,n,i,o=[],a=0,r=e.length;r>a;a++)(n=e[a]).style&&(o[a]=fe.get(n,"olddisplay"),s=n.style.display,t?(o[a]||"none"!==s||(n.style.display=""),""===n.style.display&&ke(n)&&(o[a]=fe.access(n,"olddisplay",b(n.nodeName)))):(i=ke(n),"none"===s&&i||fe.set(n,"olddisplay",i?s:J.css(n,"display"))));for(a=0;r>a;a++)(n=e[a]).style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?o[a]||"":"none"));return e}function O(e,t,s,n,i){return new O.prototype.init(e,t,s,n,i)}function E(){return setTimeout(function(){Ve=void 0}),Ve=J.now()}function M(e,t){var s,n=0,i={height:e};for(t=t?1:0;4>n;n+=2-t)s=be[n],i["margin"+s]=i["padding"+s]=e;return t&&(i.opacity=i.width=e),i}function I(e,t,s){for(var n,i=(et[t]||[]).concat(et["*"]),o=0,a=i.length;a>o;o++)if(n=i[o].call(s,t,e))return n}function A(e,t){var s,n,i,o,a;for(s in e)if(n=J.camelCase(s),i=t[n],o=e[s],J.isArray(o)&&(i=o[1],o=e[s]=o[0]),s!==n&&(e[n]=o,delete e[s]),(a=J.cssHooks[n])&&"expand"in a){o=a.expand(o),delete e[n];for(s in o)s in e||(e[s]=o[s],t[s]=i)}else t[n]=i}function P(e,t,s){var n,i,o=0,a=Ze.length,r=J.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=Ve||E(),s=Math.max(0,c.startTime+c.duration-t),n=1-(s/c.duration||0),o=0,a=c.tweens.length;a>o;o++)c.tweens[o].run(n);return r.notifyWith(e,[c,n,s]),1>n&&a?s:(r.resolveWith(e,[c]),!1)},c=r.promise({elem:e,props:J.extend({},t),opts:J.extend(!0,{specialEasing:{}},s),originalProperties:t,originalOptions:s,startTime:Ve||E(),duration:s.duration,tweens:[],createTween:function(t,s){var n=J.Tween(e,c.opts,t,s,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var s=0,n=t?c.tweens.length:0;if(i)return this;for(i=!0;n>s;s++)c.tweens[s].run(1);return t?r.resolveWith(e,[c,t]):r.rejectWith(e,[c,t]),this}}),d=c.props;for(A(d,c.opts.specialEasing);a>o;o++)if(n=Ze[o].call(c,e,d,c.opts))return n;return J.map(d,I,c),J.isFunction(c.opts.start)&&c.opts.start.call(e,c),J.fx.timer(J.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function N(e){return function(t,s){"string"!=typeof t&&(s=t,t="*");var n,i=0,o=t.toLowerCase().match(he)||[];if(J.isFunction(s))for(;n=o[i++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(s)):(e[n]=e[n]||[]).push(s)}}function R(e,t,s,n){function i(r){var l;return o[r]=!0,J.each(e[r]||[],function(e,r){var c=r(t,s,n);return"string"!=typeof c||a||o[c]?a?!(l=c):void 0:(t.dataTypes.unshift(c),i(c),!1)}),l}var o={},a=e===vt;return i(t.dataTypes[0])||!o["*"]&&i("*")}function B(e,t){var s,n,i=J.ajaxSettings.flatOptions||{};for(s in t)void 0!==t[s]&&((i[s]?e:n||(n={}))[s]=t[s]);return n&&J.extend(!0,e,n),e}function F(e,t,s){for(var n,i,o,a,r=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(i in r)if(r[i]&&r[i].test(n)){l.unshift(i);break}if(l[0]in s)o=l[0];else{for(i in s){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}return o?(o!==l[0]&&l.unshift(o),s[o]):void 0}function H(e,t,s,n){var i,o,a,r,l,c={},d=e.dataTypes.slice();if(d[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=d.shift();o;)if(e.responseFields[o]&&(s[e.responseFields[o]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=d.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=c[l+" "+o]||c["* "+o]))for(i in c)if((r=i.split(" "))[1]===o&&(a=c[l+" "+r[0]]||c["* "+r[0]])){!0===a?a=c[i]:!0!==c[i]&&(o=r[0],d.unshift(r[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function L(e,t,s,n){var i;if(J.isArray(t))J.each(t,function(t,i){s||kt.test(e)?n(e,i):L(e+"["+("object"==typeof i?t:"")+"]",i,s,n)});else if(s||"object"!==J.type(t))n(e,t);else for(i in t)L(e+"["+i+"]",t[i],s,n)}function j(e){return J.isWindow(e)?e:9===e.nodeType&&e.defaultView}var U=[],z=U.slice,W=U.concat,q=U.push,K=U.indexOf,$={},G=$.toString,V=$.hasOwnProperty,Y={},X=e.document,Q="2.1.1",J=function(e,t){return new J.fn.init(e,t)},Z=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ee=/^-ms-/,te=/-([\da-z])/gi,se=function(e,t){return t.toUpperCase()};J.fn=J.prototype={swq:Q,constructor:J,selector:"",length:0,toArray:function(){return z.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:z.call(this)},pushStack:function(e){var t=J.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return J.each(this,e,t)},map:function(e){return this.pushStack(J.map(this,function(t,s){return e.call(t,s,t)}))},slice:function(){return this.pushStack(z.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,s=+e+(0>e?t:0);return this.pushStack(s>=0&&t>s?[this[s]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:q,sort:U.sort,splice:U.splice},J.extend=J.fn.extend=function(){var e,t,s,n,i,o,a=arguments[0]||{},r=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[r]||{},r++),"object"==typeof a||J.isFunction(a)||(a={}),r===l&&(a=this,r--);l>r;r++)if(null!=(e=arguments[r]))for(t in e)s=a[t],n=e[t],a!==n&&(c&&n&&(J.isPlainObject(n)||(i=J.isArray(n)))?(i?(i=!1,o=s&&J.isArray(s)?s:[]):o=s&&J.isPlainObject(s)?s:{},a[t]=J.extend(c,o,n)):void 0!==n&&(a[t]=n));return a},J.extend({expando:"swQ"+(Q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===J.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!J.isArray(e)&&e-parseFloat(e)>=0},isPlainObject:function(e){return"object"===J.type(e)&&!e.nodeType&&!J.isWindow(e)&&!(e.constructor&&!V.call(e.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?$[G.call(e)]||"object":typeof e},globalEval:function(e){var t,s=eval;(e=J.trim(e))&&(1===e.indexOf("use strict")?(t=X.createElement("script"),t.text=e,X.head.appendChild(t).parentNode.removeChild(t)):s(e))},camelCase:function(e){return e.replace(ee,"ms-").replace(te,se)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var i=0,o=e.length,a=s(e);if(n){if(a)for(;o>i&&!1!==t.apply(e[i],n);i++);else for(i in e)if(!1===t.apply(e[i],n))break}else if(a)for(;o>i&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(Z,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(s(Object(e))?J.merge(n,"string"==typeof e?[e]:e):q.call(n,e)),n},inArray:function(e,t,s){return null==t?-1:K.call(t,e,s)},merge:function(e,t){for(var s=+t.length,n=0,i=e.length;s>n;n++)e[i++]=t[n];return e.length=i,e},grep:function(e,t,s){for(var n=[],i=0,o=e.length,a=!s;o>i;i++)!t(e[i],i)!==a&&n.push(e[i]);return n},map:function(e,t,n){var i,o=0,a=e.length,r=[];if(s(e))for(;a>o;o++)null!=(i=t(e[o],o,n))&&r.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&r.push(i);return W.apply([],r)},guid:1,proxy:function(e,t){var s,n,i;return"string"==typeof t&&(s=e[t],t=e,e=s),J.isFunction(e)?(n=z.call(arguments,2),i=function(){return e.apply(t||this,n.concat(z.call(arguments)))},i.guid=e.guid=e.guid||J.guid++,i):void 0},now:Date.now,support:Y}),J.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){$["[object "+t+"]"]=t.toLowerCase()});var ne=function(e){function t(e,t,s,n){var i,o,a,r,c,h,u,p,g,f;if((t?t.ownerDocument||t:H)!==M&&E(t),t=t||M,s=s||[],!e||"string"!=typeof e)return s;if(1!==(r=t.nodeType)&&9!==r)return[];if(A&&!n){if(i=me.exec(e))if(a=i[1]){if(9===r){if(!(o=t.getElementById(a))||!o.parentNode)return s;if(o.id===a)return s.push(o),s}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&B(t,o)&&o.id===a)return s.push(o),s}else{if(i[2])return Q.apply(s,t.getElementsByTagName(e)),s;if((a=i[3])&&y.getElementsByClassName&&t.getElementsByClassName&&-1!=t.getElementsByClassName.toString().indexOf("native code"))return Q.apply(s,t.getElementsByClassName(a)),s}if(y.qsa&&(!P||!P.test(e))){if(p=u=F,g=t,f=9===r&&e,1===r&&"object"!==t.nodeName.toLowerCase()){for(h=T(e),(u=t.getAttribute("id"))?p=u.replace(ve,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",c=h.length;c--;)h[c]=p+d(h[c]);g=we.test(e)&&l(t.parentNode)||t,f=h.join(",")}if(f)try{return Q.apply(s,g.querySelectorAll(f)),s}catch(e){}finally{u||t.removeAttribute("id")}}}return _(e.replace(ae,"$1"),t,s,n)}function s(){function e(s,n){return t.push(s+" ")>b.cacheLength&&delete e[t.shift()],e[s+" "]=n}var t=[];return e}function n(e){return e[F]=!0,e}function i(e){var t=M.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var s=e.split("|"),n=e.length;n--;)b.attrHandle[s[n]]=t}function a(e,t){var s=t&&e,n=s&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||$)-(~e.sourceIndex||$);if(n)return n;if(s)for(;s=s.nextSibling;)if(s===t)return-1;return e?1:-1}function r(e){return n(function(t){return t=+t,n(function(s,n){for(var i,o=e([],s.length,t),a=o.length;a--;)s[i=o[a]]&&(s[i]=!(n[i]=s[i]))})})}function l(e){return e&&typeof e.getElementsByTagName!==K&&e}function c(){}function d(e){for(var t=0,s=e.length,n="";s>t;t++)n+=e[t].value;return n}function h(e,t,s){var n=t.dir,i=s&&"parentNode"===n,o=j++;return t.first?function(t,s,o){for(;t=t[n];)if(1===t.nodeType||i)return e(t,s,o)}:function(t,s,a){var r,l,c=[L,o];if(a){for(;t=t[n];)if((1===t.nodeType||i)&&e(t,s,a))return!0}else for(;t=t[n];)if(1===t.nodeType||i){if(l=t[F]||(t[F]={}),(r=l[n])&&r[0]===L&&r[1]===o)return c[2]=r[2];if(l[n]=c,c[2]=e(t,s,a))return!0}}}function u(e){return e.length>1?function(t,s,n){for(var i=e.length;i--;)if(!e[i](t,s,n))return!1;return!0}:e[0]}function p(e,s,n){for(var i=0,o=s.length;o>i;i++)t(e,s[i],n);return n}function g(e,t,s,n,i){for(var o,a=[],r=0,l=e.length,c=null!=t;l>r;r++)(o=e[r])&&(!s||s(o,n,i))&&(a.push(o),c&&t.push(r));return a}function f(e,t,s,i,o,a){return i&&!i[F]&&(i=f(i)),o&&!o[F]&&(o=f(o,a)),n(function(n,a,r,l){var c,d,h,u=[],f=[],m=a.length,w=n||p(t||"*",r.nodeType?[r]:r,[]),v=!e||!n&&t?w:g(w,u,e,r,l),y=s?o||(n?e:m||i)?[]:a:v;if(s&&s(v,y,r,l),i)for(c=g(y,f),i(c,[],r,l),d=c.length;d--;)(h=c[d])&&(y[f[d]]=!(v[f[d]]=h));if(n){if(o||e){if(o){for(c=[],d=y.length;d--;)(h=y[d])&&c.push(v[d]=h);o(null,y=[],c,l)}for(d=y.length;d--;)(h=y[d])&&(c=o?Z.call(n,h):u[d])>-1&&(n[c]=!(a[c]=h))}}else y=g(y===a?y.splice(m,y.length):y),o?o(null,a,y,l):Q.apply(a,y)})}function m(e){for(var t,s,n,i=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],r=o?1:0,l=h(function(e){return e===t},a,!0),c=h(function(e){return Z.call(t,e)>-1},a,!0),p=[function(e,s,n){return!o&&(n||s!==S)||((t=s).nodeType?l(e,s,n):c(e,s,n))}];i>r;r++)if(s=b.relative[e[r].type])p=[h(u(p),s)];else{if((s=b.filter[e[r].type].apply(null,e[r].matches))[F]){for(n=++r;i>n&&!b.relative[e[n].type];n++);return f(r>1&&u(p),r>1&&d(e.slice(0,r-1).concat({value:" "===e[r-2].type?"*":""})).replace(ae,"$1"),s,n>r&&m(e.slice(r,n)),i>n&&m(e=e.slice(n)),i>n&&d(e))}p.push(s)}return u(p)}function w(e,s){var i=s.length>0,o=e.length>0,a=function(n,a,r,l,c){var d,h,u,p=0,f="0",m=n&&[],w=[],v=S,y=n||o&&b.find.TAG("*",c),k=L+=null==v?1:Math.random()||.1,x=y.length;for(c&&(S=a!==M&&a);f!==x&&null!=(d=y[f]);f++){if(o&&d){for(h=0;u=e[h++];)if(u(d,a,r)){l.push(d);break}c&&(L=k)}i&&((d=!u&&d)&&p--,n&&m.push(d))}if(p+=f,i&&f!==p){for(h=0;u=s[h++];)u(m,w,a,r);if(n){if(p>0)for(;f--;)m[f]||w[f]||(w[f]=Y.call(l));w=g(w)}Q.apply(l,w),c&&!n&&w.length>0&&p+s.length>1&&t.uniqueSort(l)}return c&&(L=k,S=v),m};return i?n(a):a}var v,y,b,k,x,T,C,_,S,D,O,E,M,I,A,P,N,R,B,F="sizzle"+-new Date,H=e.document,L=0,j=0,U=s(),z=s(),W=s(),q=function(e,t){return e===t&&(O=!0),0},K="undefined",$=1<<31,G={}.hasOwnProperty,V=[],Y=V.pop,X=V.push,Q=V.push,J=V.slice,Z=V.indexOf||function(e){for(var t=0,s=this.length;s>t;t++)if(this[t]===e)return t;return-1},ee="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",te="[\\x20\\t\\r\\n\\f]",se="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ne=se.replace("w","w#"),ie="\\["+te+"*("+se+")(?:"+te+"*([*^$|!~]?=)"+te+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ne+"))|)"+te+"*\\]",oe=":("+se+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",ae=new RegExp("^"+te+"+|((?:^|[^\\\\])(?:\\\\.)*)"+te+"+$","g"),re=new RegExp("^"+te+"*,"+te+"*"),le=new RegExp("^"+te+"*([>+~]|"+te+")"+te+"*"),ce=new RegExp("="+te+"*([^\\]'\"]*?)"+te+"*\\]","g"),de=new RegExp(oe),he=new RegExp("^"+ne+"$"),ue={ID:new RegExp("^#("+se+")"),CLASS:new RegExp("^\\.("+se+")"),TAG:new RegExp("^("+se.replace("w","w*")+")"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+te+"*(even|odd|(([+-]|)(\\d*)n|)"+te+"*(?:([+-]|)"+te+"*(\\d+)|))"+te+"*\\)|)","i"),bool:new RegExp("^(?:"+ee+")$","i"),needsContext:new RegExp("^"+te+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+te+"*((?:-\\d)?\\d*)"+te+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,fe=/^[^{]+\{\s*\[native \w/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,we=/[+~]/,ve=/'|\\/g,ye=new RegExp("\\\\([\\da-f]{1,6}"+te+"?|("+te+")|.)","ig"),be=function(e,t,s){var n="0x"+t-65536;return n!==n||s?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Q.apply(V=J.call(H.childNodes),H.childNodes),V[H.childNodes.length].nodeType}catch(e){Q={apply:V.length?function(e,t){X.apply(e,J.call(t))}:function(e,t){for(var s=e.length,n=0;e[s++]=t[n++];);e.length=s-1}}}y=t.support={},x=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},E=t.setDocument=function(e){var t,s=e?e.ownerDocument||e:H,n=s.defaultView;return s!==M&&9===s.nodeType&&s.documentElement?(M=s,I=s.documentElement,A=!x(s),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){E()},!1):n.attachEvent&&n.attachEvent("onunload",function(){E()})),y.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),y.getElementsByTagName=i(function(e){return e.appendChild(s.createComment("")),!e.getElementsByTagName("*").length}),y.getElementsByClassName=fe.test(s.getElementsByClassName)&&i(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),y.getById=i(function(e){return I.appendChild(e).id=F,!s.getElementsByName||!s.getElementsByName(F).length}),y.getById?(b.find.ID=function(e,t){if(typeof t.getElementById!==K&&A){var s=t.getElementById(e);return s&&s.parentNode?[s]:[]}},b.filter.ID=function(e){var t=e.replace(ye,be);return function(e){return e.getAttribute("id")===t}}):(delete b.find.ID,b.filter.ID=function(e){var t=e.replace(ye,be);return function(e){var s=typeof e.getAttributeNode!==K&&e.getAttributeNode("id");return s&&s.value===t}}),b.find.TAG=y.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==K?t.getElementsByTagName(e):void 0}:function(e,t){var s,n=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;s=o[i++];)1===s.nodeType&&n.push(s);return n}return o},b.find.CLASS=y.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==K&&A?t.getElementsByClassName(e):void 0},N=[],P=[],(y.qsa=fe.test(s.querySelectorAll))&&(i(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&P.push("[*^$]="+te+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||P.push("\\["+te+"*(?:value|"+ee+")"),e.querySelectorAll(":checked").length||P.push(":checked")}),i(function(e){var t=s.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&P.push("name"+te+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||P.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),P.push(",.*:")})),(y.matchesSelector=fe.test(R=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&i(function(e){y.disconnectedMatch=R.call(e,"div"),R.call(e,"[s!='']:x"),N.push("!=",oe)}),P=P.length&&new RegExp(P.join("|")),N=N.length&&new RegExp(N.join("|")),t=fe.test(I.compareDocumentPosition),B=t||fe.test(I.contains)?function(e,t){var s=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(s.contains?s.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},q=t?function(e,t){if(e===t)return O=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!y.sortDetached&&t.compareDocumentPosition(e)===n?e===s||e.ownerDocument===H&&B(H,e)?-1:t===s||t.ownerDocument===H&&B(H,t)?1:D?Z.call(D,e)-Z.call(D,t):0:4&n?-1:1)}:function(e,t){if(e===t)return O=!0,0;var n,i=0,o=e.parentNode,r=t.parentNode,l=[e],c=[t];if(!o||!r)return e===s?-1:t===s?1:o?-1:r?1:D?Z.call(D,e)-Z.call(D,t):0;if(o===r)return a(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;l[i]===c[i];)i++;return i?a(l[i],c[i]):l[i]===H?-1:c[i]===H?1:0},s):M},t.matches=function(e,s){return t(e,null,null,s)},t.matchesSelector=function(e,s){if((e.ownerDocument||e)!==M&&E(e),s=s.replace(ce,"='$1']"),!(!y.matchesSelector||!A||N&&N.test(s)||P&&P.test(s)))try{var n=R.call(e,s);if(n||y.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return t(s,M,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==M&&E(e),B(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==M&&E(e);var s=b.attrHandle[t.toLowerCase()],n=s&&G.call(b.attrHandle,t.toLowerCase())?s(e,t,!A):void 0;return void 0!==n?n:y.attributes||!A?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,s=[],n=0,i=0;if(O=!y.detectDuplicates,D=!y.sortStable&&e.slice(0),e.sort(q),O){for(;t=e[i++];)t===e[i]&&(n=s.push(i));for(;n--;)e.splice(s[n],1)}return D=null,e},k=t.getText=function(e){var t,s="",n=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)s+=k(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[n++];)s+=k(t);return s},(b=t.selectors={cacheLength:50,createPseudo:n,match:ue,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ye,be),e[3]=(e[3]||e[4]||e[5]||"").replace(ye,be),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,s=!e[6]&&e[2];return ue.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":s&&de.test(s)&&(t=T(s,!0))&&(t=s.indexOf(")",s.length-t)-s.length)&&(e[0]=e[0].slice(0,t),e[2]=s.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ye,be).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=U[e+" "];return t||(t=new RegExp("(^|"+te+")"+e+"("+te+"|$)"))&&U(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==K&&e.getAttribute("class")||"")})},ATTR:function(e,s,n){return function(i){var o=t.attr(i,e);return null==o?"!="===s:!s||(o+="","="===s?o===n:"!="===s?o!==n:"^="===s?n&&0===o.indexOf(n):"*="===s?n&&o.indexOf(n)>-1:"$="===s?n&&o.slice(-n.length)===n:"~="===s?(" "+o+" ").indexOf(n)>-1:"|="===s&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,s,n,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),r="of-type"===t;return 1===n&&0===i?function(e){return!!e.parentNode}:function(t,s,l){var c,d,h,u,p,g,f=o!==a?"nextSibling":"previousSibling",m=t.parentNode,w=r&&t.nodeName.toLowerCase(),v=!l&&!r;if(m){if(o){for(;f;){for(h=t;h=h[f];)if(r?h.nodeName.toLowerCase()===w:1===h.nodeType)return!1;g=f="only"===e&&!g&&"nextSibling"}return!0}if(g=[a?m.firstChild:m.lastChild],a&&v){for(p=(c=(d=m[F]||(m[F]={}))[e]||[])[0]===L&&c[1],u=c[0]===L&&c[2],h=p&&m.childNodes[p];h=++p&&h&&h[f]||(u=p=0)||g.pop();)if(1===h.nodeType&&++u&&h===t){d[e]=[L,p,u];break}}else if(v&&(c=(t[F]||(t[F]={}))[e])&&c[0]===L)u=c[1];else for(;(h=++p&&h&&h[f]||(u=p=0)||g.pop())&&((r?h.nodeName.toLowerCase()!==w:1!==h.nodeType)||!++u||(v&&((h[F]||(h[F]={}))[e]=[L,u]),h!==t)););return(u-=i)===n||u%n==0&&u/n>=0}}},PSEUDO:function(e,s){var i,o=b.pseudos[e]||b.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[F]?o(s):o.length>1?(i=[e,e,"",s],b.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,i=o(e,s),a=i.length;a--;)n=Z.call(e,i[a]),e[n]=!(t[n]=i[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:n(function(e){var t=[],s=[],i=C(e.replace(ae,"$1"));return i[F]?n(function(e,t,s,n){for(var o,a=i(e,null,n,[]),r=e.length;r--;)(o=a[r])&&(e[r]=!(t[r]=o))}):function(e,n,o){return t[0]=e,i(t,null,o,s),!s.pop()}}),has:n(function(e){return function(s){return t(e,s).length>0}}),contains:n(function(e){return function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:n(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(ye,be).toLowerCase(),function(t){var s;do{if(s=A?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(s=s.toLowerCase())===e||0===s.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var s=e.location&&e.location.hash;return s&&s.slice(1)===t.id},root:function(e){return e===I},focus:function(e){return e===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:r(function(){return[0]}),last:r(function(e,t){return[t-1]}),eq:r(function(e,t,s){return[0>s?s+t:s]}),even:r(function(e,t){for(var s=0;t>s;s+=2)e.push(s);return e}),odd:r(function(e,t){for(var s=1;t>s;s+=2)e.push(s);return e}),lt:r(function(e,t,s){for(var n=0>s?s+t:s;--n>=0;)e.push(n);return e}),gt:r(function(e,t,s){for(var n=0>s?s+t:s;++n<t;)e.push(n);return e})}}).pseudos.nth=b.pseudos.eq;for(v in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[v]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(v);for(v in{submit:!0,reset:!0})b.pseudos[v]=function(e){return function(t){var s=t.nodeName.toLowerCase();return("input"===s||"button"===s)&&t.type===e}}(v);return c.prototype=b.filters=b.pseudos,b.setFilters=new c,T=t.tokenize=function(e,s){var n,i,o,a,r,l,c,d=z[e+" "];if(d)return s?0:d.slice(0);for(r=e,l=[],c=b.preFilter;r;){(!n||(i=re.exec(r)))&&(i&&(r=r.slice(i[0].length)||r),l.push(o=[])),n=!1,(i=le.exec(r))&&(n=i.shift(),o.push({value:n,type:i[0].replace(ae," ")}),r=r.slice(n.length));for(a in b.filter)!(i=ue[a].exec(r))||c[a]&&!(i=c[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),r=r.slice(n.length));if(!n)break}return s?r.length:r?t.error(e):z(e,l).slice(0)},C=t.compile=function(e,t){var s,n=[],i=[],o=W[e+" "];if(!o){for(t||(t=T(e)),s=t.length;s--;)(o=m(t[s]))[F]?n.push(o):i.push(o);(o=W(e,w(i,n))).selector=e}return o},_=t.select=function(e,t,s,n){var i,o,a,r,c,h="function"==typeof e&&e,u=!n&&T(e=h.selector||e);if(s=s||[],1===u.length){if((o=u[0]=u[0].slice(0)).length>2&&"ID"===(a=o[0]).type&&y.getById&&9===t.nodeType&&A&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(ye,be),t)||[])[0]))return s;h&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=ue.needsContext.test(e)?0:o.length;i--&&(a=o[i],!b.relative[r=a.type]);)if((c=b.find[r])&&(n=c(a.matches[0].replace(ye,be),we.test(o[0].type)&&l(t.parentNode)||t))){if(o.splice(i,1),!(e=n.length&&d(o)))return Q.apply(s,n),s;break}}return(h||C(e,u))(n,t,!A,s,we.test(e)&&l(t.parentNode)||t),s},y.sortStable=F.split("").sort(q).join("")===F,y.detectDuplicates=!!O,E(),y.sortDetached=i(function(e){return 1&e.compareDocumentPosition(M.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,s){return s?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),y.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,s){return s||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(ee,function(e,t,s){var n;return s?void 0:!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(e);J.find=ne,J.expr=ne.selectors,J.expr[":"]=J.expr.pseudos,J.unique=ne.uniqueSort,J.text=ne.getText,J.isXMLDoc=ne.isXML,J.contains=ne.contains;var ie=J.expr.match.needsContext,oe=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ae=/^.[^:#\[\.,]*$/;J.filter=function(e,t,s){var n=t[0];return s&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?J.find.matchesSelector(n,e)?[n]:[]:J.find.matches(e,J.grep(t,function(e){return 1===e.nodeType}))},J.fn.extend({find:function(e){var t,s=this.length,n=[],i=this;if("string"!=typeof e)return this.pushStack(J(e).filter(function(){for(t=0;s>t;t++)if(J.contains(i[t],this))return!0}));for(t=0;s>t;t++)J.find(e,i[t],n);return n=this.pushStack(s>1?J.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(n(this,e||[],!1))},not:function(e){return this.pushStack(n(this,e||[],!0))},is:function(e){return!!n(this,"string"==typeof e&&ie.test(e)?J(e):e||[],!1).length}});var re,le=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(J.fn.init=function(e,t){var s,n;if(!e)return this;if("string"==typeof e){if(!(s="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:le.exec(e))||!s[1]&&t)return!t||t.swq?(t||re).find(e):this.constructor(t).find(e);if(s[1]){if(t=t instanceof J?t[0]:t,J.merge(this,J.parseHTML(s[1],t&&t.nodeType?t.ownerDocument||t:X,!0)),oe.test(s[1])&&J.isPlainObject(t))for(s in t)J.isFunction(this[s])?this[s](t[s]):this.attr(s,t[s]);return this}return(n=X.getElementById(s[2]))&&n.parentNode&&(this.length=1,this[0]=n),this.context=X,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):J.isFunction(e)?void 0!==re.ready?re.ready(e):e(J):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),J.makeArray(e,this))}).prototype=J.fn,re=J(X);var ce=/^(?:parents|prev(?:Until|All))/,de={children:!0,contents:!0,next:!0,prev:!0};J.extend({dir:function(e,t,s){for(var n=[],i=void 0!==s;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&J(e).is(s))break;n.push(e)}return n},sibling:function(e,t){for(var s=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&s.push(e);return s}}),J.fn.extend({has:function(e){var t=J(e,this),s=t.length;return this.filter(function(){for(var e=0;s>e;e++)if(J.contains(this,t[e]))return!0})},closest:function(e,t){for(var s,n=0,i=this.length,o=[],a=ie.test(e)||"string"!=typeof e?J(e,t||this.context):0;i>n;n++)for(s=this[n];s&&s!==t;s=s.parentNode)if(s.nodeType<11&&(a?a.index(s)>-1:1===s.nodeType&&J.find.matchesSelector(s,e))){o.push(s);break}return this.pushStack(o.length>1?J.unique(o):o)},index:function(e){return e?"string"==typeof e?K.call(J(e),this[0]):K.call(this,e.swq?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(J.unique(J.merge(this.get(),J(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),J.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return J.dir(e,"parentNode")},parentsUntil:function(e,t,s){return J.dir(e,"parentNode",s)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return J.dir(e,"nextSibling")},prevAll:function(e){return J.dir(e,"previousSibling")},nextUntil:function(e,t,s){return J.dir(e,"nextSibling",s)},prevUntil:function(e,t,s){return J.dir(e,"previousSibling",s)},siblings:function(e){return J.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return J.sibling(e.firstChild)},contents:function(e){return e.contentDocument||J.merge([],e.childNodes)}},function(e,t){J.fn[e]=function(s,n){var i=J.map(this,t,s);return"Until"!==e.slice(-5)&&(n=s),n&&"string"==typeof n&&(i=J.filter(n,i)),this.length>1&&(de[e]||J.unique(i),ce.test(e)&&i.reverse()),this.pushStack(i)}});var he=/\S+/g,ue={};J.Callbacks=function(e){var t,s,n,i,a,r,l=[],c=!(e="string"==typeof e?ue[e]||o(e):J.extend({},e)).once&&[],d=function(o){for(t=e.memory&&o,s=!0,r=i||0,i=0,a=l.length,n=!0;l&&a>r;r++)if(!1===l[r].apply(o[0],o[1])&&e.stopOnFalse){t=!1;break}n=!1,l&&(c?c.length&&d(c.shift()):t?l=[]:h.disable())},h={add:function(){if(l){var s=l.length;!function t(s){J.each(s,function(s,n){var i=J.type(n);"function"===i?e.unique&&h.has(n)||l.push(n):n&&n.length&&"string"!==i&&t(n)})}(arguments),n?a=l.length:t&&(i=s,d(t))}return this},remove:function(){return l&&J.each(arguments,function(e,t){for(var s;(s=J.inArray(t,l,s))>-1;)l.splice(s,1),n&&(a>=s&&a--,r>=s&&r--)}),this},has:function(e){return e?J.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],a=0,this},disable:function(){return l=c=t=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,t||h.disable(),this},locked:function(){return!c},fireWith:function(e,t){return!l||s&&!c||(t=t||[],t=[e,t.slice?t.slice():t],n?c.push(t):d(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!s}};return h},J.extend({Deferred:function(e){var t=[["resolve","done",J.Callbacks("once memory"),"resolved"],["reject","fail",J.Callbacks("once memory"),"rejected"],["notify","progress",J.Callbacks("memory")]],s="pending",n={state:function(){return s},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return J.Deferred(function(s){J.each(t,function(t,o){var a=J.isFunction(e[t])&&e[t];i[o[1]](function(){var e=a&&a.apply(this,arguments);e&&J.isFunction(e.promise)?e.promise().done(s.resolve).fail(s.reject).progress(s.notify):s[o[0]+"With"](this===n?s.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?J.extend(e,n):n}},i={};return n.pipe=n.then,J.each(t,function(e,o){var a=o[2],r=o[3];n[o[1]]=a.add,r&&a.add(function(){s=r},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?n:this,arguments),this},i[o[0]+"With"]=a.fireWith}),n.promise(i),e&&e.call(i,i),i},when:function(e){var t,s,n,i=0,o=z.call(arguments),a=o.length,r=1!==a||e&&J.isFunction(e.promise)?a:0,l=1===r?e:J.Deferred(),c=function(e,s,n){return function(i){s[e]=this,n[e]=arguments.length>1?z.call(arguments):i,n===t?l.notifyWith(s,n):--r||l.resolveWith(s,n)}};if(a>1)for(t=new Array(a),s=new Array(a),n=new Array(a);a>i;i++)o[i]&&J.isFunction(o[i].promise)?o[i].promise().done(c(i,n,o)).fail(l.reject).progress(c(i,s,t)):--r;return r||l.resolveWith(n,o),l.promise()}});var pe;J.fn.ready=function(e){return J.ready.promise().done(e),this},J.extend({isReady:!1,readyWait:1,holdReady:function(e){e?J.readyWait++:J.ready(!0)},ready:function(e){(!0===e?--J.readyWait:J.isReady)||(J.isReady=!0,!0!==e&&--J.readyWait>0||(pe.resolveWith(X,[J]),J.fn.triggerHandler&&(J(X).triggerHandler("ready"),J(X).off("ready"))))}}),J.ready.promise=function(t){return pe||(pe=J.Deferred(),"complete"===X.readyState?setTimeout(J.ready):(X.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",a,!1))),pe.promise(t)},J.ready.promise();var ge=J.access=function(e,t,s,n,i,o,a){var r=0,l=e.length,c=null==s;if("object"===J.type(s)){i=!0;for(r in s)J.access(e,t,r,s[r],!0,o,a)}else if(void 0!==n&&(i=!0,J.isFunction(n)||(a=!0),c&&(a?(t.call(e,n),t=null):(c=t,t=function(e,t,s){return c.call(J(e),s)})),t))for(;l>r;r++)t(e[r],s,a?n:n.call(e[r],r,t(e[r],s)));return i?e:c?t.call(e):l?t(e[0],s):o};J.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},r.uid=1,r.accepts=J.acceptData,r.prototype={key:function(e){if(!r.accepts(e))return 0;var t={},s=e[this.expando];if(!s){s=r.uid++;try{t[this.expando]={value:s},Object.defineProperties(e,t)}catch(n){t[this.expando]=s,J.extend(e,t)}}return this.cache[s]||(this.cache[s]={}),s},set:function(e,t,s){var n,i=this.key(e),o=this.cache[i];if("string"==typeof t)o[t]=s;else if(J.isEmptyObject(o))J.extend(this.cache[i],t);else for(n in t)o[n]=t[n];return o},get:function(e,t){var s=this.cache[this.key(e)];return void 0===t?s:s[t]},access:function(e,t,s){var n;return void 0===t||t&&"string"==typeof t&&void 0===s?void 0!==(n=this.get(e,t))?n:this.get(e,J.camelCase(t)):(this.set(e,t,s),void 0!==s?s:t)},remove:function(e,t){var s,n,i,o=this.key(e),a=this.cache[o];if(void 0===t)this.cache[o]={};else{J.isArray(t)?n=t.concat(t.map(J.camelCase)):(i=J.camelCase(t),t in a?n=[t,i]:(n=i,n=n in a?[n]:n.match(he)||[])),s=n.length;for(;s--;)delete a[n[s]]}},hasData:function(e){return!J.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var fe=new r,me=new r,we=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ve=/([A-Z])/g;J.extend({hasData:function(e){return me.hasData(e)||fe.hasData(e)},data:function(e,t,s){return me.access(e,t,s)},removeData:function(e,t){me.remove(e,t)},_data:function(e,t,s){return fe.access(e,t,s)},_removeData:function(e,t){fe.remove(e,t)}}),J.fn.extend({data:function(e,t){var s,n,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=me.get(o),1===o.nodeType&&!fe.get(o,"hasDataAttrs"))){for(s=a.length;s--;)a[s]&&0===(n=a[s].name).indexOf("data-")&&(n=J.camelCase(n.slice(5)),l(o,n,i[n]));fe.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){me.set(this,e)}):ge(this,function(t){var s,n=J.camelCase(e);if(o&&void 0===t){if(void 0!==(s=me.get(o,e)))return s;if(void 0!==(s=me.get(o,n)))return s;if(void 0!==(s=l(o,n,void 0)))return s}else this.each(function(){var s=me.get(this,n);me.set(this,n,t),-1!==e.indexOf("-")&&void 0!==s&&me.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){me.remove(this,e)})}}),J.extend({queue:function(e,t,s){var n;return e?(t=(t||"fx")+"queue",n=fe.get(e,t),s&&(!n||J.isArray(s)?n=fe.access(e,t,J.makeArray(s)):n.push(s)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var s=J.queue(e,t),n=s.length,i=s.shift(),o=J._queueHooks(e,t);"inprogress"===i&&(i=s.shift(),n--),i&&("fx"===t&&s.unshift("inprogress"),delete o.stop,i.call(e,function(){J.dequeue(e,t)},o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var s=t+"queueHooks";return fe.get(e,s)||fe.access(e,s,{empty:J.Callbacks("once memory").add(function(){fe.remove(e,[t+"queue",s])})})}}),J.fn.extend({queue:function(e,t){var s=2;return"string"!=typeof e&&(t=e,e="fx",s--),arguments.length<s?J.queue(this[0],e):void 0===t?this:this.each(function(){var s=J.queue(this,e,t);J._queueHooks(this,e),"fx"===e&&"inprogress"!==s[0]&&J.dequeue(this,e)})},dequeue:function(e){return this.each(function(){J.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var s,n=1,i=J.Deferred(),o=this,a=this.length,r=function(){--n||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(s=fe.get(o[a],e+"queueHooks"))&&s.empty&&(n++,s.empty.add(r));return r(),i.promise(t)}});var ye=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,be=["Top","Right","Bottom","Left"],ke=function(e,t){return e=t||e,"none"===J.css(e,"display")||!J.contains(e.ownerDocument,e)},xe=/^(?:checkbox|radio)$/i;!function(){var e=X.createDocumentFragment().appendChild(X.createElement("div")),t=X.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),Y.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",Y.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Te="undefined";Y.focusinBubbles="onfocusin"in e;var Ce=/^key/,_e=/^(?:mouse|pointer|contextmenu)|click/,Se=/^(?:focusinfocus|focusoutblur)$/,De=/^([^.]*)(?:\.(.+)|)$/;J.event={global:{},add:function(e,t,s,n,i){var o,a,r,l,c,d,h,u,p,g,f,m=fe.get(e);if(m)for(s.handler&&(o=s,s=o.handler,i=o.selector),s.guid||(s.guid=J.guid++),(l=m.events)||(l=m.events={}),(a=m.handle)||(a=m.handle=function(t){return typeof J!==Te&&J.event.triggered!==t.type?J.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(he)||[""]).length;c--;)r=De.exec(t[c])||[],p=f=r[1],g=(r[2]||"").split(".").sort(),p&&(h=J.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,h=J.event.special[p]||{},d=J.extend({type:p,origType:f,data:n,handler:s,guid:s.guid,selector:i,needsContext:i&&J.expr.match.needsContext.test(i),namespace:g.join(".")},o),(u=l[p])||(u=l[p]=[],u.delegateCount=0,h.setup&&!1!==h.setup.call(e,n,g,a)||e.addEventListener&&e.addEventListener(p,a,!1)),h.add&&(h.add.call(e,d),d.handler.guid||(d.handler.guid=s.guid)),i?u.splice(u.delegateCount++,0,d):u.push(d),J.event.global[p]=!0)},remove:function(e,t,s,n,i){var o,a,r,l,c,d,h,u,p,g,f,m=fe.hasData(e)&&fe.get(e);if(m&&(l=m.events)){for(c=(t=(t||"").match(he)||[""]).length;c--;)if(r=De.exec(t[c])||[],p=f=r[1],g=(r[2]||"").split(".").sort(),p){for(h=J.event.special[p]||{},u=l[p=(n?h.delegateType:h.bindType)||p]||[],r=r[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=u.length;o--;)d=u[o],!i&&f!==d.origType||s&&s.guid!==d.guid||r&&!r.test(d.namespace)||n&&n!==d.selector&&("**"!==n||!d.selector)||(u.splice(o,1),d.selector&&u.delegateCount--,h.remove&&h.remove.call(e,d));a&&!u.length&&(h.teardown&&!1!==h.teardown.call(e,g,m.handle)||J.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)J.event.remove(e,p+t[c],s,n,!0);J.isEmptyObject(l)&&(delete m.handle,fe.remove(e,"events"))}},trigger:function(t,s,n,i){var o,a,r,l,c,d,h,u=[n||X],p=V.call(t,"type")?t.type:t,g=V.call(t,"namespace")?t.namespace.split("."):[];if(a=r=n=n||X,3!==n.nodeType&&8!==n.nodeType&&!Se.test(p+J.event.triggered)&&(p.indexOf(".")>=0&&(g=p.split("."),p=g.shift(),g.sort()),c=p.indexOf(":")<0&&"on"+p,t=t[J.expando]?t:new J.Event(p,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=g.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),s=null==s?[t]:J.makeArray(s,[t]),h=J.event.special[p]||{},i||!h.trigger||!1!==h.trigger.apply(n,s))){if(!i&&!h.noBubble&&!J.isWindow(n)){for(l=h.delegateType||p,Se.test(l+p)||(a=a.parentNode);a;a=a.parentNode)u.push(a),r=a;r===(n.ownerDocument||X)&&u.push(r.defaultView||r.parentWindow||e)}for(o=0;(a=u[o++])&&!t.isPropagationStopped();)t.type=o>1?l:h.bindType||p,(d=(fe.get(a,"events")||{})[t.type]&&fe.get(a,"handle"))&&d.apply(a,s),(d=c&&a[c])&&d.apply&&J.acceptData(a)&&(t.result=d.apply(a,s),!1===t.result&&t.preventDefault());return t.type=p,i||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(u.pop(),s)||!J.acceptData(n)||c&&J.isFunction(n[p])&&!J.isWindow(n)&&((r=n[c])&&(n[c]=null),J.event.triggered=p,n[p](),J.event.triggered=void 0,r&&(n[c]=r)),t.result}},dispatch:function(e){e=J.event.fix(e);var t,s,n,i,o,a=[],r=z.call(arguments),l=(fe.get(this,"events")||{})[e.type]||[],c=J.event.special[e.type]||{};if(r[0]=e,e.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(a=J.event.handlers.call(this,e,l),t=0;(i=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,s=0;(o=i.handlers[s++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,void 0!==(n=((J.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,r))&&!1===(e.result=n)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var s,n,i,o,a=[],r=t.delegateCount,l=e.target;if(r&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(!0!==l.disabled||"click"!==e.type){for(n=[],s=0;r>s;s++)o=t[s],i=o.selector+" ",void 0===n[i]&&(n[i]=o.needsContext?J(i,this).index(l)>=0:J.find(i,this,null,[l]).length),n[i]&&n.push(o);n.length&&a.push({elem:l,handlers:n})}return r<t.length&&a.push({elem:this,handlers:t.slice(r)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var s,n,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(s=e.target.ownerDocument||X,n=s.documentElement,i=s.body,e.pageX=t.clientX+(n&&n.scrollLeft||i&&i.scrollLeft||0)-(n&&n.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||i&&i.scrollTop||0)-(n&&n.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[J.expando])return e;var t,s,n,i=e.type,o=e,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=_e.test(i)?this.mouseHooks:Ce.test(i)?this.keyHooks:{}),n=a.props?this.props.concat(a.props):this.props,e=new J.Event(o),t=n.length;t--;)s=n[t],e[s]=o[s];return e.target||(e.target=X),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==h()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&J.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return J.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,s,n){var i=J.extend(new J.Event,s,{type:e,isSimulated:!0,originalEvent:{}});n?J.event.trigger(i,null,t):J.event.dispatch.call(t,i),i.isDefaultPrevented()&&s.preventDefault()}},J.removeEvent=function(e,t,s){e.removeEventListener&&e.removeEventListener(t,s,!1)},J.Event=function(e,t){return this instanceof J.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?c:d):this.type=e,t&&J.extend(this,t),this.timeStamp=e&&e.timeStamp||J.now(),void(this[J.expando]=!0)):new J.Event(e,t)},J.Event.prototype={isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=c,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=c,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=c,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},J.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){J.event.special[e]={delegateType:t,bindType:t,handle:function(e){var s,n=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==n&&!J.contains(n,i))&&(e.type=o.origType,s=o.handler.apply(this,arguments),e.type=t),s}}}),Y.focusinBubbles||J.each({focus:"focusin",blur:"focusout"},function(e,t){var s=function(e){J.event.simulate(t,e.target,J.event.fix(e),!0)};J.event.special[t]={setup:function(){var n=this.ownerDocument||this,i=fe.access(n,t);i||n.addEventListener(e,s,!0),fe.access(n,t,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this,i=fe.access(n,t)-1;i?fe.access(n,t,i):(n.removeEventListener(e,s,!0),fe.remove(n,t))}}}),J.fn.extend({on:function(e,t,s,n,i){var o,a;if("object"==typeof e){"string"!=typeof t&&(s=s||t,t=void 0);for(a in e)this.on(a,t,s,e[a],i);return this}if(null==s&&null==n?(n=t,s=t=void 0):null==n&&("string"==typeof t?(n=s,s=void 0):(n=s,s=t,t=void 0)),!1===n)n=d;else if(!n)return this;return 1===i&&(o=n,n=function(e){return J().off(e),o.apply(this,arguments)},n.guid=o.guid||(o.guid=J.guid++)),this.each(function(){J.event.add(this,e,n,s,t)})},one:function(e,t,s,n){return this.on(e,t,s,n,1)},off:function(e,t,s){var n,i;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,J(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(!1===t||"function"==typeof t)&&(s=t,t=void 0),!1===s&&(s=d),this.each(function(){J.event.remove(this,e,s,t)})},trigger:function(e,t){return this.each(function(){J.event.trigger(e,t,this)})},triggerHandler:function(e,t){var s=this[0];return s?J.event.trigger(e,t,s,!0):void 0}});var Oe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ee=/<([\w:]+)/,Me=/<|&#?\w+;/,Ie=/<(?:script|style|link)/i,Ae=/checked\s*(?:[^=]|=\s*.checked.)/i,Pe=/^$|\/(?:java|ecma)script/i,Ne=/^true\/(.*)/,Re=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Be={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Be.optgroup=Be.option,Be.tbody=Be.tfoot=Be.colgroup=Be.caption=Be.thead,Be.th=Be.td,J.extend({clone:function(e,t,s){var n,i,o,a,r=e.cloneNode(!0),l=J.contains(e.ownerDocument,e);if(!(Y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||J.isXMLDoc(e)))for(a=w(r),o=w(e),n=0,i=o.length;i>n;n++)v(o[n],a[n]);if(t)if(s)for(o=o||w(e),a=a||w(r),n=0,i=o.length;i>n;n++)m(o[n],a[n]);else m(e,r);return(a=w(r,"script")).length>0&&f(a,!l&&w(e,"script")),r},buildFragment:function(e,t,s,n){for(var i,o,a,r,l,c=t.createDocumentFragment(),d=[],h=0,u=e.length;u>h;h++)if((i=e[h])||0===i)if("object"===J.type(i))J.merge(d,i.nodeType?[i]:i);else if(Me.test(i)){for(o=o||c.appendChild(t.createElement("div")),a=(Ee.exec(i)||["",""])[1].toLowerCase(),r=Be[a]||Be._default,o.innerHTML=r[1]+i.replace(Oe,"<$1></$2>")+r[2],l=r[0];l--;)o=o.lastChild;J.merge(d,o.childNodes),(o=c.firstChild).textContent=""}else d.push(t.createTextNode(i));for(c.textContent="",h=0;i=d[h++];)if(o=w(c.appendChild(i),"script"),(!n||-1===J.inArray(i,n))&&(J.contains(i.ownerDocument,i)&&f(o),s))for(l=0;i=o[l++];)Pe.test(i.type||"")&&s.push(i);return c},cleanData:function(e){for(var t,s,n,i,o=J.event.special,a=0;void 0!==(s=e[a]);a++){if(J.acceptData(s)&&(i=s[fe.expando])&&(t=fe.cache[i])){if(t.events)for(n in t.events)o[n]?J.event.remove(s,n):J.removeEvent(s,n,t.handle);fe.cache[i]&&delete fe.cache[i]}delete me.cache[s[me.expando]]}}}),J.fn.extend({text:function(e){return ge(this,function(e){return void 0===e?J.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||u(this,e).appendChild(e)})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=u(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var s,n=e?J.filter(e,this):this,i=0;null!=(s=n[i]);i++)t||1!==s.nodeType||J.cleanData(w(s)),s.parentNode&&(t&&J.contains(s.ownerDocument,s)&&f(w(s,"script")),s.parentNode.removeChild(s));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(J.cleanData(w(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return J.clone(this,e,t)})},html:function(e){return ge(this,function(e){var t=this[0]||{},s=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ie.test(e)&&!Be[(Ee.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Oe,"<$1></$2>");try{for(;n>s;s++)1===(t=this[s]||{}).nodeType&&(J.cleanData(w(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,J.cleanData(w(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=W.apply([],e);var s,n,i,o,a,r,l=0,c=this.length,d=this,h=c-1,u=e[0],f=J.isFunction(u);if(f||c>1&&"string"==typeof u&&!Y.checkClone&&Ae.test(u))return this.each(function(s){var n=d.eq(s);f&&(e[0]=u.call(this,s,n.html())),n.domManip(e,t)});if(c&&(s=J.buildFragment(e,this[0].ownerDocument,!1,this),n=s.firstChild,1===s.childNodes.length&&(s=n),n)){for(o=(i=J.map(w(s,"script"),p)).length;c>l;l++)a=s,l!==h&&(a=J.clone(a,!0,!0),o&&J.merge(i,w(a,"script"))),t.call(this[l],a,l);if(o)for(r=i[i.length-1].ownerDocument,J.map(i,g),l=0;o>l;l++)a=i[l],Pe.test(a.type||"")&&!fe.access(a,"globalEval")&&J.contains(r,a)&&(a.src?J._evalUrl&&J._evalUrl(a.src):J.globalEval(a.textContent.replace(Re,"")))}return this}}),J.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){J.fn[e]=function(e){for(var s,n=[],i=J(e),o=i.length-1,a=0;o>=a;a++)s=a===o?this:this.clone(!0),J(i[a])[t](s),q.apply(n,s.get());return this.pushStack(n)}});var Fe,He={},Le=/^margin/,je=new RegExp("^("+ye+")(?!px)[a-z%]+$","i"),Ue=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};!function(){function t(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",a.innerHTML="",i.appendChild(o);var t=e.getComputedStyle(a,null);s="1%"!==t.top,n="4px"===t.width,i.removeChild(o)}var s,n,i=X.documentElement,o=X.createElement("div"),a=X.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",Y.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(a),e.getComputedStyle&&J.extend(Y,{pixelPosition:function(){return t(),s},boxSizingReliable:function(){return null==n&&t(),n},reliableMarginRight:function(){var t,s=a.appendChild(X.createElement("div"));return s.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",s.style.marginRight=s.style.width="0",a.style.width="1px",i.appendChild(o),t=!parseFloat(e.getComputedStyle(s,null).marginRight),i.removeChild(o),t}}))}(),J.swap=function(e,t,s,n){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=s.apply(e,n||[]);for(o in t)e.style[o]=a[o];return i};var ze=/^(none|table(?!-c[ea]).+)/,We=new RegExp("^("+ye+")(.*)$","i"),qe=new RegExp("^([+-])=("+ye+")","i"),Ke={position:"absolute",visibility:"hidden",display:"block"},$e={letterSpacing:"0",fontWeight:"400"},Ge=["Webkit","O","Moz","ms"];J.extend({cssHooks:{opacity:{get:function(e,t){if(t){var s=k(e,"opacity");return""===s?"1":s}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,s,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,r=J.camelCase(t),l=e.style;return t=J.cssProps[r]||(J.cssProps[r]=T(l,r)),a=J.cssHooks[t]||J.cssHooks[r],void 0===s?a&&"get"in a&&void 0!==(i=a.get(e,!1,n))?i:l[t]:("string"===(o=typeof s)&&(i=qe.exec(s))&&(s=(i[1]+1)*i[2]+parseFloat(J.css(e,t)),o="number"),void(null!=s&&s===s&&("number"!==o||J.cssNumber[r]||(s+="px"),Y.clearCloneStyle||""!==s||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(s=a.set(e,s,n))||(l[t]=s))))}},css:function(e,t,s,n){var i,o,a,r=J.camelCase(t);return t=J.cssProps[r]||(J.cssProps[r]=T(e.style,r)),(a=J.cssHooks[t]||J.cssHooks[r])&&"get"in a&&(i=a.get(e,!0,s)),void 0===i&&(i=k(e,t,n)),"normal"===i&&t in $e&&(i=$e[t]),""===s||s?(o=parseFloat(i),!0===s||J.isNumeric(o)?o||0:i):i}}),J.each(["height","width"],function(e,t){J.cssHooks[t]={get:function(e,s,n){return s?ze.test(J.css(e,"display"))&&0===e.offsetWidth?J.swap(e,Ke,function(){return S(e,t,n)}):S(e,t,n):void 0},set:function(e,s,n){var i=n&&Ue(e);return C(0,s,n?_(e,t,n,"border-box"===J.css(e,"boxSizing",!1,i),i):0)}}}),J.cssHooks.marginRight=x(Y.reliableMarginRight,function(e,t){return t?J.swap(e,{display:"inline-block"},k,[e,"marginRight"]):void 0}),J.each({margin:"",padding:"",border:"Width"},function(e,t){J.cssHooks[e+t]={expand:function(s){for(var n=0,i={},o="string"==typeof s?s.split(" "):[s];4>n;n++)i[e+be[n]+t]=o[n]||o[n-2]||o[0];return i}},Le.test(e)||(J.cssHooks[e+t].set=C)}),J.fn.extend({css:function(e,t){return ge(this,function(e,t,s){var n,i,o={},a=0;if(J.isArray(t)){for(n=Ue(e),i=t.length;i>a;a++)o[t[a]]=J.css(e,t[a],!1,n);return o}return void 0!==s?J.style(e,t,s):J.css(e,t)},e,t,arguments.length>1)},show:function(){return D(this,!0)},hide:function(){return D(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ke(this)?J(this).show():J(this).hide()})}}),J.Tween=O,O.prototype={constructor:O,init:function(e,t,s,n,i,o){this.elem=e,this.prop=s,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(J.cssNumber[s]?"":"px")},cur:function(){var e=O.propHooks[this.prop];return e&&e.get?e.get(this):O.propHooks._default.get(this)},run:function(e){var t,s=O.propHooks[this.prop];return this.pos=t=this.options.duration?J.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),s&&s.set?s.set(this):O.propHooks._default.set(this),this}},O.prototype.init.prototype=O.prototype,O.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=J.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){J.fx.step[e.prop]?J.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[J.cssProps[e.prop]]||J.cssHooks[e.prop])?J.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},O.propHooks.scrollTop=O.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},J.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},J.fx=O.prototype.init,J.fx.step={};var Ve,Ye,Xe=/^(?:toggle|show|hide)$/,Qe=new RegExp("^(?:([+-])=|)("+ye+")([a-z%]*)$","i"),Je=/queueHooks$/,Ze=[function(e,t,s){var n,i,o,a,r,l,c,d=this,h={},u=e.style,p=e.nodeType&&ke(e),g=fe.get(e,"fxshow");s.queue||(null==(r=J._queueHooks(e,"fx")).unqueued&&(r.unqueued=0,l=r.empty.fire,r.empty.fire=function(){r.unqueued||l()}),r.unqueued++,d.always(function(){d.always(function(){r.unqueued--,J.queue(e,"fx").length||r.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(s.overflow=[u.overflow,u.overflowX,u.overflowY],"inline"===("none"===(c=J.css(e,"display"))?fe.get(e,"olddisplay")||b(e.nodeName):c)&&"none"===J.css(e,"float")&&(u.display="inline-block")),s.overflow&&(u.overflow="hidden",d.always(function(){u.overflow=s.overflow[0],u.overflowX=s.overflow[1],u.overflowY=s.overflow[2]}));for(n in t)if(i=t[n],Xe.exec(i)){if(delete t[n],o=o||"toggle"===i,i===(p?"hide":"show")){if("show"!==i||!g||void 0===g[n])continue;p=!0}h[n]=g&&g[n]||J.style(e,n)}else c=void 0;if(J.isEmptyObject(h))"inline"===("none"===c?b(e.nodeName):c)&&(u.display=c);else{g?"hidden"in g&&(p=g.hidden):g=fe.access(e,"fxshow",{}),o&&(g.hidden=!p),p?J(e).show():d.done(function(){J(e).hide()}),d.done(function(){var t;fe.remove(e,"fxshow");for(t in h)J.style(e,t,h[t])});for(n in h)a=I(p?g[n]:0,n,d),n in g||(g[n]=a.start,p&&(a.end=a.start,a.start="width"===n||"height"===n?1:0))}}],et={"*":[function(e,t){var s=this.createTween(e,t),n=s.cur(),i=Qe.exec(t),o=i&&i[3]||(J.cssNumber[e]?"":"px"),a=(J.cssNumber[e]||"px"!==o&&+n)&&Qe.exec(J.css(s.elem,e)),r=1,l=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+n||1;do{r=r||".5",a/=r,J.style(s.elem,e,a+o)}while(r!==(r=s.cur()/n)&&1!==r&&--l)}return i&&(a=s.start=+a||+n||0,s.unit=o,s.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),s}]};J.Animation=J.extend(P,{tweener:function(e,t){J.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var s,n=0,i=e.length;i>n;n++)s=e[n],et[s]=et[s]||[],et[s].unshift(t)},prefilter:function(e,t){t?Ze.unshift(e):Ze.push(e)}}),J.speed=function(e,t,s){var n=e&&"object"==typeof e?J.extend({},e):{complete:s||!s&&t||J.isFunction(e)&&e,duration:e,easing:s&&t||t&&!J.isFunction(t)&&t};return n.duration=J.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in J.fx.speeds?J.fx.speeds[n.duration]:J.fx.speeds._default,(null==n.queue||!0===n.queue)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){J.isFunction(n.old)&&n.old.call(this),n.queue&&J.dequeue(this,n.queue)},n},J.fn.extend({fadeTo:function(e,t,s,n){return this.filter(ke).css("opacity",0).show().end().animate({opacity:t},e,s,n)},animate:function(e,t,s,n){var i=J.isEmptyObject(e),o=J.speed(t,s,n),a=function(){var t=P(this,J.extend({},e),o);(i||fe.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,s){var n=function(e){var t=e.stop;delete e.stop,t(s)};return"string"!=typeof e&&(s=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=J.timers,a=fe.get(this);if(i)a[i]&&a[i].stop&&n(a[i]);else for(i in a)a[i]&&a[i].stop&&Je.test(i)&&n(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(s),t=!1,o.splice(i,1));(t||!s)&&J.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,s=fe.get(this),n=s[e+"queue"],i=s[e+"queueHooks"],o=J.timers,a=n?n.length:0;for(s.finish=!0,J.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete s.finish})}}),J.each(["toggle","show","hide"],function(e,t){var s=J.fn[t];J.fn[t]=function(e,n,i){return null==e||"boolean"==typeof e?s.apply(this,arguments):this.animate(M(t,!0),e,n,i)}}),J.each({slideDown:M("show"),slideUp:M("hide"),slideToggle:M("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){J.fn[e]=function(e,s,n){return this.animate(t,e,s,n)}}),J.timers=[],J.fx.tick=function(){var e,t=0,s=J.timers;for(Ve=J.now();t<s.length;t++)(e=s[t])()||s[t]!==e||s.splice(t--,1);s.length||J.fx.stop(),Ve=void 0},J.fx.timer=function(e){J.timers.push(e),e()?J.fx.start():J.timers.pop()},J.fx.interval=13,J.fx.start=function(){Ye||(Ye=setInterval(J.fx.tick,J.fx.interval))},J.fx.stop=function(){clearInterval(Ye),Ye=null},J.fx.speeds={slow:600,fast:200,_default:400},J.fn.delay=function(e,t){return e=J.fx?J.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,s){var n=setTimeout(t,e);s.stop=function(){clearTimeout(n)}})},function(){var e=X.createElement("input"),t=X.createElement("select"),s=t.appendChild(X.createElement("option"));e.type="checkbox",Y.checkOn=""!==e.value,Y.optSelected=s.selected,t.disabled=!0,Y.optDisabled=!s.disabled,(e=X.createElement("input")).value="t",e.type="radio",Y.radioValue="t"===e.value}();var tt,st=J.expr.attrHandle;J.fn.extend({attr:function(e,t){return ge(this,J.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){J.removeAttr(this,e)})}}),J.extend({attr:function(e,t,s){var n,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===Te?J.prop(e,t,s):(1===o&&J.isXMLDoc(e)||(t=t.toLowerCase(),n=J.attrHooks[t]||(J.expr.match.bool.test(t)?tt:void 0)),void 0===s?n&&"get"in n&&null!==(i=n.get(e,t))?i:null==(i=J.find.attr(e,t))?void 0:i:null!==s?n&&"set"in n&&void 0!==(i=n.set(e,s,t))?i:(e.setAttribute(t,s+""),s):void J.removeAttr(e,t))},removeAttr:function(e,t){var s,n,i=0,o=t&&t.match(he);if(o&&1===e.nodeType)for(;s=o[i++];)n=J.propFix[s]||s,J.expr.match.bool.test(s)&&(e[n]=!1),e.removeAttribute(s)},attrHooks:{type:{set:function(e,t){if(!Y.radioValue&&"radio"===t&&J.nodeName(e,"input")){var s=e.value;return e.setAttribute("type",t),s&&(e.value=s),t}}}}}),tt={set:function(e,t,s){return!1===t?J.removeAttr(e,s):e.setAttribute(s,s),s}},J.each(J.expr.match.bool.source.match(/\w+/g),function(e,t){var s=st[t]||J.find.attr;st[t]=function(e,t,n){var i,o;return n||(o=st[t],st[t]=i,i=null!=s(e,t,n)?t.toLowerCase():null,st[t]=o),i}});var nt=/^(?:input|select|textarea|button)$/i;J.fn.extend({prop:function(e,t){return ge(this,J.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[J.propFix[e]||e]})}}),J.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,s){var n,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return(1!==o||!J.isXMLDoc(e))&&(t=J.propFix[t]||t,i=J.propHooks[t]),void 0!==s?i&&"set"in i&&void 0!==(n=i.set(e,s,t))?n:e[t]=s:i&&"get"in i&&null!==(n=i.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||nt.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),Y.optSelected||(J.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),J.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){J.propFix[this.toLowerCase()]=this});var it=/[\t\r\n\f]/g;J.fn.extend({addClass:function(e){var t,s,n,i,o,a,r="string"==typeof e&&e,l=0,c=this.length;if(J.isFunction(e))return this.each(function(t){J(this).addClass(e.call(this,t,this.className))});if(r)for(t=(e||"").match(he)||[];c>l;l++)if(s=this[l],n=1===s.nodeType&&(s.className?(" "+s.className+" ").replace(it," "):" ")){for(o=0;i=t[o++];)n.indexOf(" "+i+" ")<0&&(n+=i+" ");a=J.trim(n),s.className!==a&&(s.className=a)}return this},removeClass:function(e){var t,s,n,i,o,a,r=0===arguments.length||"string"==typeof e&&e,l=0,c=this.length;if(J.isFunction(e))return this.each(function(t){J(this).removeClass(e.call(this,t,this.className))});if(r)for(t=(e||"").match(he)||[];c>l;l++)if(s=this[l],n=1===s.nodeType&&(s.className?(" "+s.className+" ").replace(it," "):"")){for(o=0;i=t[o++];)for(;n.indexOf(" "+i+" ")>=0;)n=n.replace(" "+i+" "," ");a=e?J.trim(n):"",s.className!==a&&(s.className=a)}return this},toggleClass:function(e,t){var s=typeof e;return"boolean"==typeof t&&"string"===s?t?this.addClass(e):this.removeClass(e):this.each(J.isFunction(e)?function(s){J(this).toggleClass(e.call(this,s,this.className,t),t)}:function(){if("string"===s)for(var t,n=0,i=J(this),o=e.match(he)||[];t=o[n++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(s===Te||"boolean"===s)&&(this.className&&fe.set(this,"__className__",this.className),this.className=this.className||!1===e?"":fe.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",s=0,n=this.length;n>s;s++)if(1===this[s].nodeType&&(" "+this[s].className+" ").replace(it," ").indexOf(t)>=0)return!0;return!1}});var ot=/\r/g;J.fn.extend({val:function(e){var t,s,n,i=this[0];return arguments.length?(n=J.isFunction(e),this.each(function(s){var i;1===this.nodeType&&(null==(i=n?e.call(this,s,J(this).val()):e)?i="":"number"==typeof i?i+="":J.isArray(i)&&(i=J.map(i,function(e){return null==e?"":e+""})),(t=J.valHooks[this.type]||J.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=J.valHooks[i.type]||J.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(s=t.get(i,"value"))?s:"string"==typeof(s=i.value)?s.replace(ot,""):null==s?"":s:void 0}}),J.extend({valHooks:{option:{get:function(e){var t=J.find.attr(e,"value");return null!=t?t:J.trim(J.text(e))}},select:{get:function(e){for(var t,s,n=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],r=o?i+1:n.length,l=0>i?r:o?i:0;r>l;l++)if(!(!(s=n[l]).selected&&l!==i||(Y.optDisabled?s.disabled:null!==s.getAttribute("disabled"))||s.parentNode.disabled&&J.nodeName(s.parentNode,"optgroup"))){if(t=J(s).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var s,n,i=e.options,o=J.makeArray(t),a=i.length;a--;)n=i[a],(n.selected=J.inArray(n.value,o)>=0)&&(s=!0);return s||(e.selectedIndex=-1),o}}}}),J.each(["radio","checkbox"],function(){J.valHooks[this]={set:function(e,t){return J.isArray(t)?e.checked=J.inArray(J(e).val(),t)>=0:void 0}},Y.checkOn||(J.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),J.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){J.fn[t]=function(e,s){return arguments.length>0?this.on(t,null,e,s):this.trigger(t)}}),J.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,s){return this.on(e,null,t,s)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,s,n){return this.on(t,e,s,n)},undelegate:function(e,t,s){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",s)}});var at=J.now(),rt=/\?/;J.parseJSON=function(e){return JSON.parse(e+"")},J.parseXML=function(e){var t,s;if(!e||"string"!=typeof e)return null;try{s=new DOMParser,t=s.parseFromString(e,"text/xml")}catch(e){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&J.error("Invalid XML: "+e),t};var lt,ct,dt=/#.*$/,ht=/([?&])_=[^&]*/,ut=/^(.*?):[ \t]*([^\r\n]*)$/gm,pt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,gt=/^(?:GET|HEAD)$/,ft=/^\/\//,mt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,wt={},vt={},yt="*/".concat("*");try{ct=location.href}catch(e){(ct=X.createElement("a")).href="",ct=ct.href}lt=mt.exec(ct.toLowerCase())||[],J.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ct,type:"GET",isLocal:pt.test(lt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":yt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":J.parseJSON,"text xml":J.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?B(B(e,J.ajaxSettings),t):B(J.ajaxSettings,e)},ajaxPrefilter:N(wt),ajaxTransport:N(vt),ajax:function(e,t){function s(e,t,s,a){var l,d,w,v,b,x=t;2!==y&&(y=2,r&&clearTimeout(r),n=void 0,o=a||"",k.readyState=e>0?4:0,l=e>=200&&300>e||304===e,s&&(v=F(h,k,s)),v=H(h,v,k,l),l?(h.ifModified&&((b=k.getResponseHeader("Last-Modified"))&&(J.lastModified[i]=b),(b=k.getResponseHeader("etag"))&&(J.etag[i]=b)),204===e||"HEAD"===h.type?x="nocontent":304===e?x="notmodified":(x=v.state,d=v.data,w=v.error,l=!w)):(w=x,(e||!x)&&(x="error",0>e&&(e=0))),k.status=e,k.statusText=(t||x)+"",l?g.resolveWith(u,[d,x,k]):g.rejectWith(u,[k,x,w]),k.statusCode(m),m=void 0,c&&p.trigger(l?"ajaxSuccess":"ajaxError",[k,h,l?d:w]),f.fireWith(u,[k,x]),c&&(p.trigger("ajaxComplete",[k,h]),--J.active||J.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i,o,a,r,l,c,d,h=J.ajaxSetup({},t),u=h.context||h,p=h.context&&(u.nodeType||u.swq)?J(u):J.event,g=J.Deferred(),f=J.Callbacks("once memory"),m=h.statusCode||{},w={},v={},y=0,b="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!a)for(a={};t=ut.exec(o);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?o:null},setRequestHeader:function(e,t){var s=e.toLowerCase();return y||(e=v[s]=v[s]||e,w[e]=t),this},overrideMimeType:function(e){return y||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>y)for(t in e)m[t]=[m[t],e[t]];else k.always(e[k.status]);return this},abort:function(e){var t=e||b;return n&&n.abort(t),s(0,t),this}};if(g.promise(k).complete=f.add,k.success=k.done,k.error=k.fail,h.url=((e||h.url||ct)+"").replace(dt,"").replace(ft,lt[1]+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=J.trim(h.dataType||"*").toLowerCase().match(he)||[""],null==h.crossDomain&&(l=mt.exec(h.url.toLowerCase()),h.crossDomain=!(!l||l[1]===lt[1]&&l[2]===lt[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(lt[3]||("http:"===lt[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=J.param(h.data,h.traditional)),R(wt,h,t,k),2===y)return k;(c=h.global)&&0==J.active++&&J.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!gt.test(h.type),i=h.url,h.hasContent||(h.data&&(i=h.url+=(rt.test(i)?"&":"?")+h.data,delete h.data),!1===h.cache&&(h.url=ht.test(i)?i.replace(ht,"$1_="+at++):i+(rt.test(i)?"&":"?")+"_="+at++)),h.ifModified&&(J.lastModified[i]&&k.setRequestHeader("If-Modified-Since",J.lastModified[i]),J.etag[i]&&k.setRequestHeader("If-None-Match",J.etag[i])),(h.data&&h.hasContent&&!1!==h.contentType||t.contentType)&&k.setRequestHeader("Content-Type",h.contentType),k.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+yt+"; q=0.01":""):h.accepts["*"]);for(d in h.headers)k.setRequestHeader(d,h.headers[d]);if(h.beforeSend&&(!1===h.beforeSend.call(u,k,h)||2===y))return k.abort();b="abort";for(d in{success:1,error:1,complete:1})k[d](h[d]);if(n=R(vt,h,t,k)){k.readyState=1,c&&p.trigger("ajaxSend",[k,h]),h.async&&h.timeout>0&&(r=setTimeout(function(){k.abort("timeout")},h.timeout));try{y=1,n.send(w,s)}catch(e){if(!(2>y))throw e;s(-1,e)}}else s(-1,"No Transport");return k},getJSON:function(e,t,s){return J.get(e,t,s,"json")},getScript:function(e,t){return J.get(e,void 0,t,"script")}}),J.each(["get","post"],function(e,t){J[t]=function(e,s,n,i){return J.isFunction(s)&&(i=i||n,n=s,s=void 0),J.ajax({url:e,type:t,dataType:i,data:s,success:n})}}),J.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){J.fn[t]=function(e){return this.on(t,e)}}),J._evalUrl=function(e){return J.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},J.fn.extend({wrapAll:function(e){var t;return J.isFunction(e)?this.each(function(t){J(this).wrapAll(e.call(this,t))}):(this[0]&&(t=J(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(J.isFunction(e)?function(t){J(this).wrapInner(e.call(this,t))}:function(){var t=J(this),s=t.contents();s.length?s.wrapAll(e):t.append(e)})},wrap:function(e){var t=J.isFunction(e);return this.each(function(s){J(this).wrapAll(t?e.call(this,s):e)})},unwrap:function(){return this.parent().each(function(){J.nodeName(this,"body")||J(this).replaceWith(this.childNodes)}).end()}}),J.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},J.expr.filters.visible=function(e){return!J.expr.filters.hidden(e)};var bt=/%20/g,kt=/\[\]$/,xt=/\r?\n/g,Tt=/^(?:submit|button|image|reset|file)$/i,Ct=/^(?:input|select|textarea|keygen)/i;J.param=function(e,t){var s,n=[],i=function(e,t){t=J.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=J.ajaxSettings&&J.ajaxSettings.traditional),J.isArray(e)||e.swq&&!J.isPlainObject(e))J.each(e,function(){i(this.name,this.value)});else for(s in e)L(s,e[s],t,i);return n.join("&").replace(bt,"+")},J.fn.extend({serialize:function(){return J.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=J.prop(this,"elements");return e?J.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!J(this).is(":disabled")&&Ct.test(this.nodeName)&&!Tt.test(e)&&(this.checked||!xe.test(e))}).map(function(e,t){var s=J(this).val();return null==s?null:J.isArray(s)?J.map(s,function(e){return{name:t.name,value:e.replace(xt,"\r\n")}}):{name:t.name,value:s.replace(xt,"\r\n")}}).get()}}),J.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var _t=0,St={},Dt={0:200,1223:204},Ot=J.ajaxSettings.xhr();e.ActiveXObject&&J(e).on("unload",function(){for(var e in St)St[e]()}),Y.cors=!!Ot&&"withCredentials"in Ot,Y.ajax=Ot=!!Ot,J.ajaxTransport(function(e){var t;return Y.cors||Ot&&!e.crossDomain?{send:function(s,n){var i,o=e.xhr(),a=++_t;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest");for(i in s)o.setRequestHeader(i,s[i]);t=function(e){return function(){t&&(delete St[a],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?n(o.status,o.statusText):n(Dt[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=St[a]=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}:void 0}),J.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return J.globalEval(e),e}}}),J.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),J.ajaxTransport("script",function(e){if(e.crossDomain){var t,s;return{send:function(n,i){t=J("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",s=function(e){t.remove(),s=null,e&&i("error"===e.type?404:200,e.type)}),X.head.appendChild(t[0])},abort:function(){s&&s()}}}});var Et=[],Mt=/(=)\?(?=&|$)|\?\?/;J.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Et.pop()||J.expando+"_"+at++;return this[e]=!0,e}}),J.ajaxPrefilter("json jsonp",function(t,s,n){var i,o,a,r=!1!==t.jsonp&&(Mt.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Mt.test(t.data)&&"data");return r||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=J.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,r?t[r]=t[r].replace(Mt,"$1"+i):!1!==t.jsonp&&(t.url+=(rt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||J.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},n.always(function(){e[i]=o,t[i]&&(t.jsonpCallback=s.jsonpCallback,Et.push(i)),a&&J.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),J.parseHTML=function(e,t,s){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(s=t,t=!1),t=t||X;var n=oe.exec(e),i=!s&&[];return n?[t.createElement(n[1])]:(n=J.buildFragment([e],t,i),i&&i.length&&J(i).remove(),J.merge([],n.childNodes))};var It=J.fn.load;J.fn.load=function(e,t,s){if("string"!=typeof e&&It)return It.apply(this,arguments);var n,i,o,a=this,r=e.indexOf(" ");return r>=0&&(n=J.trim(e.slice(r)),e=e.slice(0,r)),J.isFunction(t)?(s=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&J.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){o=arguments,a.html(n?J("<div>").append(J.parseHTML(e)).find(n):e)}).complete(s&&function(e,t){a.each(s,o||[e.responseText,t,e])}),this},J.expr.filters.animated=function(e){return J.grep(J.timers,function(t){return e===t.elem}).length};var At=e.document.documentElement;J.offset={setOffset:function(e,t,s){var n,i,o,a,r,l,c=J.css(e,"position"),d=J(e),h={};"static"===c&&(e.style.position="relative"),r=d.offset(),o=J.css(e,"top"),l=J.css(e,"left"),("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1?(n=d.position(),a=n.top,i=n.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),J.isFunction(t)&&(t=t.call(e,s,r)),null!=t.top&&(h.top=t.top-r.top+a),null!=t.left&&(h.left=t.left-r.left+i),"using"in t?t.using.call(e,h):d.css(h)}},J.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){J.offset.setOffset(this,e,t)});var t,s,n=this[0],i={top:0,left:0},o=n&&n.ownerDocument;return o?(t=o.documentElement,J.contains(t,n)?(typeof n.getBoundingClientRect!==Te&&(i=n.getBoundingClientRect()),s=j(o),{top:i.top+s.pageYOffset-t.clientTop,left:i.left+s.pageXOffset-t.clientLeft}):i):void 0},position:function(){if(this[0]){var e,t,s=this[0],n={top:0,left:0};return"fixed"===J.css(s,"position")?t=s.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),J.nodeName(e[0],"html")||(n=e.offset()),n.top+=J.css(e[0],"borderTopWidth",!0),n.left+=J.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-J.css(s,"marginTop",!0),left:t.left-n.left-J.css(s,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||At;e&&!J.nodeName(e,"html")&&"static"===J.css(e,"position");)e=e.offsetParent;return e||At})}}),J.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,s){var n="pageYOffset"===s;J.fn[t]=function(i){return ge(this,function(t,i,o){var a=j(t);return void 0===o?a?a[s]:t[i]:void(a?a.scrollTo(n?e.pageXOffset:o,n?o:e.pageYOffset):t[i]=o)},t,i,arguments.length,null)}}),J.each(["top","left"],function(e,t){J.cssHooks[t]=x(Y.pixelPosition,function(e,s){return s?(s=k(e,t),je.test(s)?J(e).position()[t]+"px":s):void 0})}),J.each({Height:"height",Width:"width"},function(e,t){J.each({padding:"inner"+e,content:t,"":"outer"+e},function(s,n){J.fn[n]=function(n,i){var o=arguments.length&&(s||"boolean"!=typeof n),a=s||(!0===n||!0===i?"margin":"border");return ge(this,function(t,s,n){var i;return J.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===n?J.css(t,s,a):J.style(t,s,n,a)},t,o?n:void 0,o,null)}})}),J.fn.size=function(){return this.length},J.fn.andSelf=J.fn.addBack,"function"==typeof define&&define.amd&&define("swq",[],function(){return J});e.swQ,e.swQ;return typeof t===Te&&(e.swQ=e.swQ=J),J}),function(e){window.swQuery=window.swQ=e,swQuery.easing.jswing=swQuery.easing.swing,swQuery.extend(swQuery.easing,{def:"easeOutQuad",swing:function(e,t,s,n,i){return swQuery.easing[swQuery.easing.def](e,t,s,n,i)},easeInQuad:function(e,t,s,n,i){return n*(t/=i)*t+s},easeOutQuad:function(e,t,s,n,i){return-n*(t/=i)*(t-2)+s},easeInOutQuad:function(e,t,s,n,i){return(t/=i/2)<1?n/2*t*t+s:-n/2*(--t*(t-2)-1)+s},easeInCubic:function(e,t,s,n,i){return n*(t/=i)*t*t+s},easeOutCubic:function(e,t,s,n,i){return n*((t=t/i-1)*t*t+1)+s},easeInOutCubic:function(e,t,s,n,i){return(t/=i/2)<1?n/2*t*t*t+s:n/2*((t-=2)*t*t+2)+s},easeInQuart:function(e,t,s,n,i){return n*(t/=i)*t*t*t+s},easeOutQuart:function(e,t,s,n,i){return-n*((t=t/i-1)*t*t*t-1)+s},easeInOutQuart:function(e,t,s,n,i){return(t/=i/2)<1?n/2*t*t*t*t+s:-n/2*((t-=2)*t*t*t-2)+s},easeInQuint:function(e,t,s,n,i){return n*(t/=i)*t*t*t*t+s},easeOutQuint:function(e,t,s,n,i){return n*((t=t/i-1)*t*t*t*t+1)+s},easeInOutQuint:function(e,t,s,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+s:n/2*((t-=2)*t*t*t*t+2)+s},easeInSine:function(e,t,s,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+s},easeOutSine:function(e,t,s,n,i){return n*Math.sin(t/i*(Math.PI/2))+s},easeInOutSine:function(e,t,s,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+s},easeInExpo:function(e,t,s,n,i){return 0==t?s:n*Math.pow(2,10*(t/i-1))+s},easeOutExpo:function(e,t,s,n,i){return t==i?s+n:n*(1-Math.pow(2,-10*t/i))+s},easeInOutExpo:function(e,t,s,n,i){return 0==t?s:t==i?s+n:(t/=i/2)<1?n/2*Math.pow(2,10*(t-1))+s:n/2*(2-Math.pow(2,-10*--t))+s},easeInCirc:function(e,t,s,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+s},easeOutCirc:function(e,t,s,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+s},easeInOutCirc:function(e,t,s,n,i){return(t/=i/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+s:n/2*(Math.sqrt(1-(t-=2)*t)+1)+s},easeInElastic:function(e,t,s,n,i){var o=1.70158,a=0,r=n;if(0==t)return s;if(1==(t/=i))return s+n;if(a||(a=.3*i),r<Math.abs(n)){r=n;o=a/4}else o=a/(2*Math.PI)*Math.asin(n/r);return-r*Math.pow(2,10*(t-=1))*Math.sin((t*i-o)*(2*Math.PI)/a)+s},easeOutElastic:function(e,t,s,n,i){var o=1.70158,a=0,r=n;if(0==t)return s;if(1==(t/=i))return s+n;if(a||(a=.3*i),r<Math.abs(n)){r=n;o=a/4}else o=a/(2*Math.PI)*Math.asin(n/r);return r*Math.pow(2,-10*t)*Math.sin((t*i-o)*(2*Math.PI)/a)+n+s},easeInOutElastic:function(e,t,s,n,i){var o=1.70158,a=0,r=n;if(0==t)return s;if(2==(t/=i/2))return s+n;if(a||(a=i*(.3*1.5)),r<Math.abs(n)){r=n;o=a/4}else o=a/(2*Math.PI)*Math.asin(n/r);return t<1?r*Math.pow(2,10*(t-=1))*Math.sin((t*i-o)*(2*Math.PI)/a)*-.5+s:r*Math.pow(2,-10*(t-=1))*Math.sin((t*i-o)*(2*Math.PI)/a)*.5+n+s},easeInBack:function(e,t,s,n,i,o){return void 0==o&&(o=1.70158),n*(t/=i)*t*((o+1)*t-o)+s},easeOutBack:function(e,t,s,n,i,o){return void 0==o&&(o=1.70158),n*((t=t/i-1)*t*((o+1)*t+o)+1)+s},easeInOutBack:function(e,t,s,n,i,o){return void 0==o&&(o=1.70158),(t/=i/2)<1?n/2*(t*t*((1+(o*=1.525))*t-o))+s:n/2*((t-=2)*t*((1+(o*=1.525))*t+o)+2)+s},easeInBounce:function(e,t,s,n,i){return n-swQuery.easing.easeOutBounce(e,i-t,0,n,i)+s},easeOutBounce:function(e,t,s,n,i){return(t/=i)<1/2.75?n*(7.5625*t*t)+s:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+s:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+s:n*(7.5625*(t-=2.625/2.75)*t+.984375)+s},easeInOutBounce:function(e,t,s,n,i){return t<i/2?.5*swQuery.easing.easeInBounce(e,2*t,0,n,i)+s:.5*swQuery.easing.easeOutBounce(e,2*t-i,0,n,i)+.5*n+s}})}(swQ),function(e){var t,s;e.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},s={},(t=e.uaMatch(navigator.userAgent)).browser&&(s[t.browser]=!0,s.version=t.version),s.chrome?s.webkit=!0:s.webkit&&(s.safari=!0),e.browser=s}(swQ),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.io=e()}}(function(){return function e(t,s,n){function i(a,r){if(!s[a]){if(!t[a]){var l="function"==typeof require&&require;if(!r&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=s[a]={exports:{}};t[a][0].call(c.exports,function(e){var s=t[a][1][e];return i(s||e)},c,c.exports,e,t,s,n)}return s[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,s){t.exports=e("./lib/")},{"./lib/":2}],2:[function(e,t,s){function n(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var s,n=i(e),o=n.source,c=n.id;return t.forceNew||t["force new connection"]||!1===t.multiplex?(r("ignoring socket cache for %s",o),s=a(o,t)):(l[c]||(r("new io instance for %s",o),l[c]=a(o,t)),s=l[c]),s.socket(n.path)}var i=e("./url"),o=e("socket.io-parser"),a=e("./manager"),r=e("debug")("socket.io-client");t.exports=s=n;var l=s.managers={};s.protocol=o.protocol,s.connect=n,s.Manager=e("./manager"),s.Socket=e("./socket")},{"./manager":3,"./socket":5,"./url":6,debug:9,"socket.io-parser":40}],3:[function(e,t,s){function n(e,t){if(!(this instanceof n))return new n(e,t);e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connected=[],this.attempts=0,this.encoding=!1,this.packetBuffer=[],this.encoder=new r.Encoder,this.decoder=new r.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}e("./url");var i=e("engine.io-client"),o=e("./socket"),a=e("component-emitter"),r=e("socket.io-parser"),l=e("./on"),c=e("component-bind"),d=(e("object-component"),e("debug")("socket.io-client:manager")),h=e("indexof");t.exports=n,n.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)this.nsps[e].emit.apply(this.nsps[e],arguments)},a(n.prototype),n.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},n.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},n.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this):this._reconnectionDelay},n.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this):this._reconnectionDelayMax},n.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},n.prototype.maybeReconnectOnOpen=function(){this.openReconnect||this.reconnecting||!this._reconnection||0!==this.attempts||(this.openReconnect=!0,this.reconnect())},n.prototype.open=n.prototype.connect=function(e){if(d("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;d("opening %s",this.uri),this.engine=i(this.uri,this.opts);var t=this.engine,s=this;this.readyState="opening",this.skipReconnect=!1;var n=l(t,"open",function(){s.onopen(),e&&e()}),o=l(t,"error",function(t){if(d("connect_error"),s.cleanup(),s.readyState="closed",s.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}s.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;d("connect attempt will timeout after %d",a);var r=setTimeout(function(){d("connect attempt timed out after %d",a),n.destroy(),t.close(),t.emit("error","timeout"),s.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(r)}})}return this.subs.push(n),this.subs.push(o),this},n.prototype.onopen=function(){d("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(l(e,"data",c(this,"ondata"))),this.subs.push(l(this.decoder,"decoded",c(this,"ondecoded"))),this.subs.push(l(e,"error",c(this,"onerror"))),this.subs.push(l(e,"close",c(this,"onclose")))},n.prototype.ondata=function(e){this.decoder.add(e)},n.prototype.ondecoded=function(e){this.emit("packet",e)},n.prototype.onerror=function(e){d("error",e),this.emitAll("error",e)},n.prototype.socket=function(e){var t=this.nsps[e];if(!t){t=new o(this,e),this.nsps[e]=t;var s=this;t.on("connect",function(){~h(s.connected,t)||s.connected.push(t)})}return t},n.prototype.destroy=function(e){var t=h(this.connected,e);~t&&this.connected.splice(t,1),this.connected.length||this.close()},n.prototype.packet=function(e){d("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(e){for(var s=0;s<e.length;s++)t.engine.write(e[s]);t.encoding=!1,t.processPacketQueue()}))},n.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},n.prototype.cleanup=function(){for(var e;e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},n.prototype.close=n.prototype.disconnect=function(){this.skipReconnect=!0,this.readyState="closed",this.engine&&this.engine.close()},n.prototype.onclose=function(e){d("close"),this.cleanup(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},n.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(++this.attempts>this._reconnectionAttempts)d("reconnect failed"),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.attempts*this.reconnectionDelay();t=Math.min(t,this.reconnectionDelayMax()),d("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var s=setTimeout(function(){e.skipReconnect||(d("attempting reconnect"),e.emitAll("reconnect_attempt",e.attempts),e.emitAll("reconnecting",e.attempts),e.skipReconnect||e.open(function(t){t?(d("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(d("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(s)}})}},n.prototype.onreconnect=function(){var e=this.attempts;this.attempts=0,this.reconnecting=!1,this.emitAll("reconnect",e)}},{"./on":4,"./socket":5,"./url":6,"component-bind":7,"component-emitter":8,debug:9,"engine.io-client":10,indexof:36,"object-component":37,"socket.io-parser":40}],4:[function(e,t,s){t.exports=function(e,t,s){return e.on(t,s),{destroy:function(){e.removeListener(t,s)}}}},{}],5:[function(e,t,s){function n(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}var i=e("socket.io-parser"),o=e("component-emitter"),a=e("to-array"),r=e("./on"),l=e("component-bind"),c=e("debug")("socket.io-client:socket"),d=e("has-binary");t.exports=n;var h={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},u=o.prototype.emit;o(n.prototype),n.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[r(e,"open",l(this,"onopen")),r(e,"packet",l(this,"onpacket")),r(e,"close",l(this,"onclose"))]}},n.prototype.open=n.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},n.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},n.prototype.emit=function(e){if(h.hasOwnProperty(e))return u.apply(this,arguments),this;var t=a(arguments),s=i.EVENT;d(t)&&(s=i.BINARY_EVENT);var n={type:s,data:t};return"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this},n.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},n.prototype.onopen=function(){c("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:i.CONNECT})},n.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,this.emit("disconnect",e)},n.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case i.CONNECT:this.onconnect();break;case i.EVENT:case i.BINARY_EVENT:this.onevent(e);break;case i.ACK:case i.BINARY_ACK:this.onack(e);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",e.data)}},n.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?u.apply(this,t):this.receiveBuffer.push(t)},n.prototype.ack=function(e){var t=this,s=!1;return function(){if(!s){s=!0;var n=a(arguments);c("sending ack %j",n);var o=d(n)?i.BINARY_ACK:i.ACK;t.packet({type:o,id:e,data:n})}}},n.prototype.onack=function(e){c("calling ack %s with %j",e.id,e.data),this.acks[e.id].apply(this,e.data),delete this.acks[e.id]},n.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},n.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)u.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},n.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},n.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},n.prototype.close=n.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{"./on":4,"component-bind":7,"component-emitter":8,debug:9,"has-binary":32,"socket.io-parser":40,"to-array":44}],6:[function(e,t,s){(function(s){var n=e("parseuri"),i=e("debug")("socket.io-client:url");t.exports=function(e,t){var o=e,t=t||s.location;return null==e&&(e=t.protocol+"//"+t.hostname),"string"==typeof e&&("/"==e.charAt(0)&&(e="/"==e.charAt(1)?t.protocol+e:t.hostname+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),i("parse %s",e),o=n(e)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/",o.id=o.protocol+"://"+o.host+":"+o.port,o.href=o.protocol+"://"+o.host+(t&&t.port==o.port?"":":"+o.port),o}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:9,parseuri:38}],7:[function(e,t,s){var n=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var s=n.call(arguments,2);return function(){return t.apply(e,s.concat(n.call(arguments)))}}},{}],8:[function(e,t,s){function n(e){if(e)return i(e)}function i(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){function s(){n.off(e,s),t.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},s.fn=t,this.on(e,s),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var s=this._callbacks[e];if(!s)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var n,i=0;i<s.length;i++)if((n=s[i])===t||n.fn===t){s.splice(i,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),s=this._callbacks[e];if(s)for(var n=0,i=(s=s.slice(0)).length;n<i;++n)s[n].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],9:[function(e,t,s){function n(e){return n.enabled(e)?function(t){t=i(t);var s=new Date,o=s-(n[e]||s);n[e]=s,t=e+" "+t+" +"+n.humanize(o),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function i(e){return e instanceof Error?e.stack||e.message:e}t.exports=n,n.names=[],n.skips=[],n.enable=function(e){try{localStorage.debug=e}catch(e){}for(var t=(e||"").split(/[\s,]+/),s=t.length,i=0;i<s;i++)"-"===(e=t[i].replace("*",".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$"))},n.disable=function(){n.enable("")},n.humanize=function(e){return e>=36e5?(e/36e5).toFixed(1)+"h":e>=6e4?(e/6e4).toFixed(1)+"m":e>=1e3?(e/1e3|0)+"s":e+"ms"},n.enabled=function(e){for(var t=0,s=n.skips.length;t<s;t++)if(n.skips[t].test(e))return!1;for(var t=0,s=n.names.length;t<s;t++)if(n.names[t].test(e))return!0;return!1};try{window.localStorage&&n.enable(localStorage.debug)}catch(e){}},{}],10:[function(e,t,s){t.exports=e("./lib/")},{"./lib/":11}],11:[function(e,t,s){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":12,"engine.io-parser":21}],12:[function(e,t,s){(function(s){function n(e,t){if(!(this instanceof n))return new n(e,t);if(t=t||{},e&&"object"==typeof e&&(t=e,e=null),e&&(e=d(e),t.host=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)),this.secure=null!=t.secure?t.secure:s.location&&"https:"==location.protocol,t.host){var i=t.host.split(":");t.hostname=i.shift(),i.length&&(t.port=i.pop())}this.agent=t.agent||!1,this.hostname=t.hostname||(s.location?location.hostname:"localhost"),this.port=t.port||(s.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=u.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.open(),this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades}function i(e){var t={};for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return t}var o=e("./transports"),a=e("component-emitter"),r=e("debug")("engine.io-client:socket"),l=e("indexof"),c=e("engine.io-parser"),d=e("parseuri"),h=e("parsejson"),u=e("parseqs");t.exports=n,n.priorWebsocketSuccess=!1,a(n.prototype),n.protocol=c.protocol,n.Socket=n,n.Transport=e("./transport"),n.transports=e("./transports"),n.parser=e("engine.io-parser"),n.prototype.createTransport=function(e){r('creating transport "%s"',e);var t=i(this.query);return t.EIO=c.protocol,t.transport=e,this.id&&(t.sid=this.id),new o[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this})},n.prototype.open=function(){if(this.rememberUpgrade&&n.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))t="websocket";else{if(0==this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";var t;try{t=this.createTransport(t)}catch(e){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},n.prototype.setTransport=function(e){r("setting transport %s",e.name);var t=this;this.transport&&(r("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},n.prototype.probe=function(e){function t(){if(u.onlyBinaryUpgrades){var t=!this.supportsBinary&&u.transport.supportsBinary;h=h||t}h||(r('probe transport "%s" opened',e),d.send([{type:"ping",data:"probe"}]),d.once("packet",function(t){if(!h)if("pong"==t.type&&"probe"==t.data){if(r('probe transport "%s" pong',e),u.upgrading=!0,u.emit("upgrading",d),!d)return;n.priorWebsocketSuccess="websocket"==d.name,r('pausing current transport "%s"',u.transport.name),u.transport.pause(function(){h||"closed"!=u.readyState&&(r("changing transport and sending upgrade packet"),c(),u.setTransport(d),d.send([{type:"upgrade"}]),u.emit("upgrade",d),d=null,u.upgrading=!1,u.flush())})}else{r('probe transport "%s" failed',e);var s=new Error("probe error");s.transport=d.name,u.emit("upgradeError",s)}}))}function s(){h||(h=!0,c(),d.close(),d=null)}function i(t){var n=new Error("probe error: "+t);n.transport=d.name,s(),r('probe transport "%s" failed because of error: %s',e,t),u.emit("upgradeError",n)}function o(){i("transport closed")}function a(){i("socket closed")}function l(e){d&&e.name!=d.name&&(r('"%s" works - aborting "%s"',e.name,d.name),s())}function c(){d.removeListener("open",t),d.removeListener("error",i),d.removeListener("close",o),u.removeListener("close",a),u.removeListener("upgrading",l)}r('probing transport "%s"',e);var d=this.createTransport(e,{probe:1}),h=!1,u=this;n.priorWebsocketSuccess=!1,d.once("open",t),d.once("error",i),d.once("close",o),this.once("close",a),this.once("upgrading",l),d.open()},n.prototype.onOpen=function(){if(r("socket open"),this.readyState="open",n.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){r("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},n.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(r('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(h(e.data));break;case"pong":this.setPing();break;case"error":var t=new Error("server error");t.code=e.data,this.emit("error",t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else r('packet received with socket readyState "%s"',this.readyState)},n.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},n.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},n.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){r("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},n.prototype.ping=function(){this.sendPacket("ping")},n.prototype.onDrain=function(){for(var e=0;e<this.prevBufferLen;e++)this.callbackBuffer[e]&&this.callbackBuffer[e]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},n.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(r("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},n.prototype.write=n.prototype.send=function(e,t){return this.sendPacket("message",e,t),this},n.prototype.sendPacket=function(e,t,s){if("closing"!=this.readyState&&"closed"!=this.readyState){var n={type:e,data:t};this.emit("packetCreate",n),this.writeBuffer.push(n),this.callbackBuffer.push(s),this.flush()}},n.prototype.close=function(){function e(){n.onClose("forced close"),r("socket closing - telling transport to close"),n.transport.close()}function t(){n.removeListener("upgrade",t),n.removeListener("upgradeError",t),e()}function s(){n.once("upgrade",t),n.once("upgradeError",t)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var n=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?s():e()}):this.upgrading?s():e()}return this},n.prototype.onError=function(e){r("socket error %j",e),n.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},n.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){r('socket close with reason: "%s"',e);var s=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){s.writeBuffer=[],s.callbackBuffer=[],s.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t)}},n.prototype.filterUpgrades=function(e){for(var t=[],s=0,n=e.length;s<n;s++)~l(this.transports,e[s])&&t.push(e[s]);return t}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":13,"./transports":14,"component-emitter":8,debug:9,"engine.io-parser":21,indexof:36,parsejson:28,parseqs:29,parseuri:30}],13:[function(e,t,s){function n(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR}var i=e("engine.io-parser"),o=e("component-emitter");t.exports=n,o(n.prototype),n.timestamps=0,n.prototype.onError=function(e,t){var s=new Error(e);return s.type="TransportError",s.description=t,this.emit("error",s),this},n.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},n.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(e){var t=i.decodePacket(e,this.socket.binaryType);this.onPacket(t)},n.prototype.onPacket=function(e){this.emit("packet",e)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":8,"engine.io-parser":21}],14:[function(e,t,s){(function(t){var n=e("xmlhttprequest"),i=e("./polling-xhr"),o=e("./polling-jsonp"),a=e("./websocket");s.polling=function(e){var s=!1,a=!1,r=!1!==e.jsonp;if(t.location){var l="https:"==location.protocol,c=location.port;c||(c=l?443:80),s=e.hostname!=location.hostname||c!=e.port,a=e.secure!=l}if(e.xdomain=s,e.xscheme=a,"open"in new n(e)&&!e.forceJSONP)return new i(e);if(!r)throw new Error("JSONP disabled");return new o(e)},s.websocket=a}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":15,"./polling-xhr":16,"./websocket":18,xmlhttprequest:19}],15:[function(e,t,s){(function(s){function n(){}function i(e){o.call(this,e),this.query=this.query||{},r||(s.___eio||(s.___eio=[]),r=s.___eio),this.index=r.length;var t=this;r.push(function(e){t.onData(e)}),this.query.j=this.index,s.document&&s.addEventListener&&s.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=n)})}var o=e("./polling"),a=e("component-inherit");t.exports=i;var r,l=/\n/g,c=/\\n/g;a(i,o),i.prototype.supportsBinary=!1,i.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},i.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},i.prototype.doWrite=function(e,t){function s(){n(),t()}function n(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(e){i.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+i.iframeId+'">';o=document.createElement(e)}catch(e){(o=document.createElement("iframe")).name=i.iframeId,o.src="javascript:0"}o.id=i.iframeId,i.form.appendChild(o),i.iframe=o}var i=this;if(!this.form){var o,a=document.createElement("form"),r=document.createElement("textarea"),d=this.iframeId="eio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=d,a.method="POST",a.setAttribute("accept-charset","utf-8"),r.name="d",a.appendChild(r),document.body.appendChild(a),this.form=a,this.area=r}this.form.action=this.uri(),n(),e=e.replace(c,"\\\n"),this.area.value=e.replace(l,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==i.iframe.readyState&&s()}:this.iframe.onload=s}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":17,"component-inherit":20}],16:[function(e,t,s){(function(s){function n(){}function i(e){if(l.call(this,e),s.location){var t="https:"==location.protocol,n=location.port;n||(n=t?443:80),this.xd=e.hostname!=s.location.hostname||n!=e.port,this.xs=e.secure!=t}}function o(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.create()}function a(){for(var e in o.requests)o.requests.hasOwnProperty(e)&&o.requests[e].abort()}var r=e("xmlhttprequest"),l=e("./polling"),c=e("component-emitter"),d=e("component-inherit"),h=e("debug")("engine.io-client:polling-xhr");t.exports=i,t.exports.Request=o,d(i,l),i.prototype.supportsBinary=!0,i.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,new o(e)},i.prototype.doWrite=function(e,t){var s="string"!=typeof e&&void 0!==e,n=this.request({method:"POST",data:e,isBinary:s}),i=this;n.on("success",t),n.on("error",function(e){i.onError("xhr post error",e)}),this.sendXhr=n},i.prototype.doPoll=function(){h("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},c(o.prototype),o.prototype.create=function(){var e=this.xhr=new r({agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR}),t=this;try{if(h("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async),this.supportsBinary&&(e.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}"withCredentials"in e&&(e.withCredentials=!0),this.hasXDR()?(e.onload=function(){t.onLoad()},e.onerror=function(){t.onError(e.responseText)}):e.onreadystatechange=function(){4==e.readyState&&(200==e.status||1223==e.status?t.onLoad():setTimeout(function(){t.onError(e.status)},0))},h("xhr data %s",this.data),e.send(this.data)}catch(e){return void setTimeout(function(){t.onError(e)},0)}s.document&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},o.prototype.onError=function(e){this.emit("error",e),this.cleanup()},o.prototype.cleanup=function(){if(void 0!==this.xhr&&null!==this.xhr){this.hasXDR()?this.xhr.onload=this.xhr.onerror=n:this.xhr.onreadystatechange=n;try{this.xhr.abort()}catch(e){}s.document&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}e="application/octet-stream"===t?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},o.prototype.hasXDR=function(){return void 0!==s.XDomainRequest&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},s.document&&(o.requestsCount=0,o.requests={},s.attachEvent?s.attachEvent("onunload",a):s.addEventListener&&s.addEventListener("beforeunload",a))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":17,"component-emitter":8,"component-inherit":20,debug:9,xmlhttprequest:19}],17:[function(e,t,s){function n(e){var t=e&&e.forceBase64;c&&!t||(this.supportsBinary=!1),i.call(this,e)}var i=e("../transport"),o=e("parseqs"),a=e("engine.io-parser"),r=e("component-inherit"),l=e("debug")("engine.io-client:polling");t.exports=n;var c=null!=new(e("xmlhttprequest"))({xdomain:!1}).responseType;r(n,i),n.prototype.name="polling",n.prototype.doOpen=function(){this.poll()},n.prototype.pause=function(e){function t(){l("paused"),s.readyState="paused",e()}var s=this;if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(l("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){l("pre-pause polling complete"),--n||t()})),this.writable||(l("we are currently writing - waiting to pause"),n++,this.once("drain",function(){l("pre-pause writing complete"),--n||t()}))}else t()},n.prototype.poll=function(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},n.prototype.onData=function(e){var t=this;l("polling got data %s",e);a.decodePayload(e,this.socket.binaryType,function(e,s,n){if("opening"==t.readyState&&t.onOpen(),"close"==e.type)return t.onClose(),!1;t.onPacket(e)}),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():l('ignoring poll - transport state "%s"',this.readyState))},n.prototype.doClose=function(){function e(){l("writing close packet"),t.write([{type:"close"}])}var t=this;"open"==this.readyState?(l("transport open - closing"),e()):(l("transport not open - deferring close"),this.once("open",e))},n.prototype.write=function(e){s=this;this.writable=!1;var t=function(){s.writable=!0,s.emit("drain")},s=this;a.encodePayload(e,this.supportsBinary,function(e){s.doWrite(e,t)})},n.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",s="";return!1!==this.timestampRequests&&(e[this.timestampParam]=+new Date+"-"+i.timestamps++),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(s=":"+this.port),e.length&&(e="?"+e),t+"://"+this.hostname+s+this.path+e}},{"../transport":13,"component-inherit":20,debug:9,"engine.io-parser":21,parseqs:29,xmlhttprequest:19}],18:[function(e,t,s){function n(e){e&&e.forceBase64&&(this.supportsBinary=!1),i.call(this,e)}var i=e("../transport"),o=e("engine.io-parser"),a=e("parseqs"),r=e("component-inherit"),l=e("debug")("engine.io-client:websocket"),c=e("ws");t.exports=n,r(n,i),n.prototype.name="websocket",n.prototype.supportsBinary=!0,n.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t={agent:this.agent};this.ws=new c(e,void 0,t),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},n.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(n.prototype.onData=function(e){var t=this;setTimeout(function(){i.prototype.onData.call(t,e)},0)}),n.prototype.write=function(e){var t=this;this.writable=!1;for(var s=0,n=e.length;s<n;s++)o.encodePacket(e[s],this.supportsBinary,function(e){try{t.ws.send(e)}catch(e){l("websocket closed before onclose event")}});setTimeout(function(){t.writable=!0,t.emit("drain")},0)},n.prototype.onClose=function(){i.prototype.onClose.call(this)},n.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},n.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",s="";return this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(s=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=+new Date),this.supportsBinary||(e.b64=1),(e=a.encode(e)).length&&(e="?"+e),t+"://"+this.hostname+s+this.path+e},n.prototype.check=function(){return!(!c||"__initialize"in c&&this.name===n.prototype.name)}},{"../transport":13,"component-inherit":20,debug:9,"engine.io-parser":21,parseqs:29,ws:31}],19:[function(e,t,s){var n=e("has-cors");t.exports=function(e){var t=e.xdomain,s=e.xscheme,i=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||n))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!s&&i)return new XDomainRequest}catch(e){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}},{"has-cors":34}],20:[function(e,t,s){t.exports=function(e,t){var s=function(){};s.prototype=t.prototype,e.prototype=new s,e.prototype.constructor=e}},{}],21:[function(e,t,s){(function(t){function n(e,t,n){if(!t)return s.encodeBase64Packet(e,n);var i=e.data,o=new Uint8Array(i),a=new Uint8Array(1+i.byteLength);a[0]=p[e.type];for(var r=0;r<o.length;r++)a[r+1]=o[r];return n(a.buffer)}function i(e,t,n){if(!t)return s.encodeBase64Packet(e,n);var i=new FileReader;return i.onload=function(){e.data=i.result,s.encodePacket(e,t,!0,n)},i.readAsArrayBuffer(e.data)}function o(e,t,n){if(!t)return s.encodeBase64Packet(e,n);if(u)return i(e,t,n);var o=new Uint8Array(1);return o[0]=p[e.type],n(new m([o.buffer,e.data]))}function a(e,t,s){for(var n=new Array(e.length),i=d(e.length,s),o=0;o<e.length;o++)!function(e,s,i){t(s,function(t,s){n[e]=s,i(t,n)})}(o,e[o],i)}var r=e("./keys"),l=e("arraybuffer.slice"),c=e("base64-arraybuffer"),d=e("after"),h=e("utf8"),u=navigator.userAgent.match(/Android/i);s.protocol=3;var p=s.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},g=r(p),f={type:"error",data:"parser error"},m=e("blob");s.encodePacket=function(e,s,i,a){"function"==typeof s&&(a=s,s=!1),"function"==typeof i&&(a=i,i=null);var r=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&r instanceof ArrayBuffer)return n(e,s,a);if(m&&r instanceof t.Blob)return o(e,s,a);var l=p[e.type];return void 0!==e.data&&(l+=i?h.encode(String(e.data)):String(e.data)),a(""+l)},s.encodeBase64Packet=function(e,n){var i="b"+s.packets[e.type];if(m&&e.data instanceof m){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];n(i+e)},o.readAsDataURL(e.data)}var a;try{a=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var r=new Uint8Array(e.data),l=new Array(r.length),c=0;c<r.length;c++)l[c]=r[c];a=String.fromCharCode.apply(null,l)}return i+=t.btoa(a),n(i)},s.decodePacket=function(e,t,n){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return s.decodeBase64Packet(e.substr(1),t);if(n)try{e=h.decode(e)}catch(e){return f}i=e.charAt(0);return Number(i)==i&&g[i]?e.length>1?{type:g[i],data:e.substring(1)}:{type:g[i]}:f}var i=new Uint8Array(e)[0],o=l(e,1);return m&&"blob"===t&&(o=new m([o])),{type:g[i],data:o}},s.decodeBase64Packet=function(e,s){var n=g[e.charAt(0)];if(!t.ArrayBuffer)return{type:n,data:{base64:!0,data:e.substr(1)}};var i=c.decode(e.substr(1));return"blob"===s&&m&&(i=new m([i])),{type:n,data:i}},s.encodePayload=function(e,t,n){function i(e){return e.length+":"+e}return"function"==typeof t&&(n=t,t=null),t?m&&!u?s.encodePayloadAsBlob(e,n):s.encodePayloadAsArrayBuffer(e,n):e.length?void a(e,function(e,n){s.encodePacket(e,t,!0,function(e){n(null,i(e))})},function(e,t){return n(t.join(""))}):n("0:")},s.decodePayload=function(e,t,n){if("string"!=typeof e)return s.decodePayloadAsBinary(e,t,n);"function"==typeof t&&(n=t,t=null);var i;if(""==e)return n(f,0,1);for(var o,a,r="",l=0,c=e.length;l<c;l++){var d=e.charAt(l);if(":"!=d)r+=d;else{if(""==r||r!=(o=Number(r)))return n(f,0,1);if(a=e.substr(l+1,o),r!=a.length)return n(f,0,1);if(a.length){if(i=s.decodePacket(a,t,!0),f.type==i.type&&f.data==i.data)return n(f,0,1);if(!1===n(i,l+o,c))return}l+=o,r=""}}return""!=r?n(f,0,1):void 0},s.encodePayloadAsArrayBuffer=function(e,t){if(!e.length)return t(new ArrayBuffer(0));a(e,function(e,t){s.encodePacket(e,!0,!0,function(e){return t(null,e)})},function(e,s){var n=s.reduce(function(e,t){var s;return s="string"==typeof t?t.length:t.byteLength,e+s.toString().length+s+2},0),i=new Uint8Array(n),o=0;return s.forEach(function(e){var t="string"==typeof e,s=e;if(t){for(var n=new Uint8Array(e.length),a=0;a<e.length;a++)n[a]=e.charCodeAt(a);s=n.buffer}i[o++]=t?0:1;for(var r=s.byteLength.toString(),a=0;a<r.length;a++)i[o++]=parseInt(r[a]);i[o++]=255;for(var n=new Uint8Array(s),a=0;a<n.length;a++)i[o++]=n[a]}),t(i.buffer)})},s.encodePayloadAsBlob=function(e,t){a(e,function(e,t){s.encodePacket(e,!0,!0,function(e){var s=new Uint8Array(1);if(s[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);e=n.buffer,s[0]=0}for(var o=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),a=new Uint8Array(o.length+1),i=0;i<o.length;i++)a[i]=parseInt(o[i]);if(a[o.length]=255,m){var r=new m([s.buffer,a.buffer,e]);t(null,r)}})},function(e,s){return t(new m(s))})},s.decodePayloadAsBinary=function(e,t,n){"function"==typeof t&&(n=t,t=null);for(var i=e,o=[],a=!1;i.byteLength>0;){for(var r=new Uint8Array(i),c=0===r[0],d="",h=1;255!=r[h];h++){if(d.length>310){a=!0;break}d+=r[h]}if(a)return n(f,0,1);i=l(i,2+d.length),d=parseInt(d);var u=l(i,0,d);if(c)try{u=String.fromCharCode.apply(null,new Uint8Array(u))}catch(e){var p=new Uint8Array(u);u="";for(h=0;h<p.length;h++)u+=String.fromCharCode(p[h])}o.push(u),i=l(i,d)}var g=o.length;o.forEach(function(e,i){n(s.decodePacket(e,t,!0),i,g)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":22,after:23,"arraybuffer.slice":24,"base64-arraybuffer":25,blob:26,utf8:27}],22:[function(e,t,s){t.exports=Object.keys||function(e){var t=[],s=Object.prototype.hasOwnProperty;for(var n in e)s.call(e,n)&&t.push(n);return t}},{}],23:[function(e,t,s){function n(){}t.exports=function(e,t,s){function i(e,n){if(i.count<=0)throw new Error("after called too many times");--i.count,e?(o=!0,t(e),t=s):0!==i.count||o||t(null,n)}var o=!1;return s=s||n,i.count=e,0===e?t():i}},{}],24:[function(e,t,s){t.exports=function(e,t,s){var n=e.byteLength;if(t=t||0,s=s||n,e.slice)return e.slice(t,s);if(t<0&&(t+=n),s<0&&(s+=n),s>n&&(s=n),t>=n||t>=s||0===n)return new ArrayBuffer(0);for(var i=new Uint8Array(e),o=new Uint8Array(s-t),a=t,r=0;a<s;a++,r++)o[r]=i[a];return o.buffer}},{}],25:[function(e,t,s){!function(e){"use strict";s.encode=function(t){var s,n=new Uint8Array(t),i=n.length,o="";for(s=0;s<i;s+=3)o+=e[n[s]>>2],o+=e[(3&n[s])<<4|n[s+1]>>4],o+=e[(15&n[s+1])<<2|n[s+2]>>6],o+=e[63&n[s+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},s.decode=function(t){var s,n,i,o,a,r=.75*t.length,l=t.length,c=0;"="===t[t.length-1]&&(r--,"="===t[t.length-2]&&r--);var d=new ArrayBuffer(r),h=new Uint8Array(d);for(s=0;s<l;s+=4)n=e.indexOf(t[s]),i=e.indexOf(t[s+1]),o=e.indexOf(t[s+2]),a=e.indexOf(t[s+3]),h[c++]=n<<2|i>>4,h[c++]=(15&i)<<4|o>>2,h[c++]=(3&o)<<6|63&a;return d}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],26:[function(e,t,s){(function(e){function s(e,t){t=t||{};for(var s=new n,i=0;i<e.length;i++)s.append(e[i]);return t.type?s.getBlob(t.type):s.getBlob()}var n=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,i=function(){try{return 2==new Blob(["hi"]).size}catch(e){return!1}}(),o=n&&n.prototype.append&&n.prototype.getBlob;t.exports=i?e.Blob:o?s:void 0}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],27:[function(e,t,s){(function(e){!function(n){function i(e){for(var t,s,n=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(s=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&s)+65536):(n.push(t),i--):n.push(t);return n}function o(e){for(var t,s=e.length,n=-1,i="";++n<s;)(t=e[n])>65535&&(i+=m((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=m(t);return i}function a(e,t){return m(e>>t&63|128)}function r(e){if(0==(4294967168&e))return m(e);var t="";return 0==(4294965248&e)?t=m(e>>6&31|192):0==(4294901760&e)?(t=m(e>>12&15|224),t+=a(e,6)):0==(4292870144&e)&&(t=m(e>>18&7|240),t+=a(e,12),t+=a(e,6)),t+=m(63&e|128)}function l(){if(f>=g)throw Error("Invalid byte index");var e=255&p[f];if(f++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function c(){var e,t,s,n,i;if(f>g)throw Error("Invalid byte index");if(f==g)return!1;if(e=255&p[f],f++,0==(128&e))return e;if(192==(224&e)){if((i=(31&e)<<6|(t=l()))>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=l(),s=l(),(i=(15&e)<<12|t<<6|s)>=2048)return i;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=l(),s=l(),n=l(),(i=(15&e)<<18|t<<12|s<<6|n)>=65536&&i<=1114111))return i;throw Error("Invalid UTF-8 detected")}var d="object"==typeof s&&s,h="object"==typeof t&&t&&t.exports==d&&t,u="object"==typeof e&&e;u.global!==u&&u.window!==u||(n=u);var p,g,f,m=String.fromCharCode,w={version:"2.0.0",encode:function(e){for(var t=i(e),s=t.length,n=-1,o="";++n<s;)o+=r(t[n]);return o},decode:function(e){p=i(e),g=p.length,f=0;for(var t,s=[];!1!==(t=c());)s.push(t);return o(s)}};if(d&&!d.nodeType)if(h)h.exports=w;else{var v={}.hasOwnProperty;for(var y in w)v.call(w,y)&&(d[y]=w[y])}else n.utf8=w}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],28:[function(e,t,s){(function(e){var s=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,i=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,a=/^\s+/,r=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(a,"").replace(r,""),e.JSON&&JSON.parse?JSON.parse(t):s.test(t.replace(n,"@").replace(i,"]").replace(o,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],29:[function(e,t,s){s.encode=function(e){var t="";for(var s in e)e.hasOwnProperty(s)&&(t.length&&(t+="&"),t+=encodeURIComponent(s)+"="+encodeURIComponent(e[s]));return t},s.decode=function(e){for(var t={},s=e.split("&"),n=0,i=s.length;n<i;n++){var o=s[n].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},{}],30:[function(e,t,s){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,s=e.indexOf("["),o=e.indexOf("]");-1!=s&&-1!=o&&(e=e.substring(0,s)+e.substring(s,o).replace(/:/g,";")+e.substring(o,e.length));for(var a=n.exec(e||""),r={},l=14;l--;)r[i[l]]=a[l]||"";return-1!=s&&-1!=o&&(r.source=t,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r}},{}],31:[function(e,t,s){function n(e,t,s){return t?new o(e,t):new o(e)}var i=function(){return this}(),o=i.WebSocket||i.MozWebSocket;t.exports=o?n:null,o&&(n.prototype=o.prototype)},{}],32:[function(e,t,s){(function(s){var n=e("isarray");t.exports=function(e){function t(e){if(!e)return!1;if(s.Buffer&&s.Buffer.isBuffer(e)||s.ArrayBuffer&&e instanceof ArrayBuffer||s.Blob&&e instanceof Blob||s.File&&e instanceof File)return!0;if(n(e)){for(var i=0;i<e.length;i++)if(t(e[i]))return!0}else if(e&&"object"==typeof e){e.toJSON&&(e=e.toJSON());for(var o in e)if(e.hasOwnProperty(o)&&t(e[o]))return!0}return!1}return t(e)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:33}],33:[function(e,t,s){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],34:[function(e,t,s){var n=e("global");try{t.exports="XMLHttpRequest"in n&&"withCredentials"in new n.XMLHttpRequest}catch(e){t.exports=!1}},{global:35}],35:[function(e,t,s){t.exports=function(){return this}()},{}],36:[function(e,t,s){var n=[].indexOf;t.exports=function(e,t){if(n)return e.indexOf(t);for(var s=0;s<e.length;++s)if(e[s]===t)return s;return-1}},{}],37:[function(e,t,s){var n=Object.prototype.hasOwnProperty;s.keys=Object.keys||function(e){var t=[];for(var s in e)n.call(e,s)&&t.push(s);return t},s.values=function(e){var t=[];for(var s in e)n.call(e,s)&&t.push(e[s]);return t},s.merge=function(e,t){for(var s in t)n.call(t,s)&&(e[s]=t[s]);return e},s.length=function(e){return s.keys(e).length},s.isEmpty=function(e){return 0==s.length(e)}},{}],38:[function(e,t,s){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){for(var t=n.exec(e||""),s={},o=14;o--;)s[i[o]]=t[o]||"";return s}},{}],39:[function(e,t,s){(function(t){var n=e("isarray"),i=e("./is-buffer");s.deconstructPacket=function(e){function t(e){if(!e)return e;if(i(e)){var o={_placeholder:!0,num:s.length};return s.push(e),o}if(n(e)){for(var a=new Array(e.length),r=0;r<e.length;r++)a[r]=t(e[r]);return a}if("object"==typeof e&&!(e instanceof Date)){a={};for(var l in e)a[l]=t(e[l]);return a}return e}var s=[],o=e.data,a=e;return a.data=t(o),a.attachments=s.length,{packet:a,buffers:s}},s.reconstructPacket=function(e,t){function s(e){if(e&&e._placeholder)return t[e.num];if(n(e)){for(var i=0;i<e.length;i++)e[i]=s(e[i]);return e}if(e&&"object"==typeof e){for(var o in e)e[o]=s(e[o]);return e}return e}return e.data=s(e.data),e.attachments=void 0,e},s.removeBlobs=function(e,s){function o(e,l,c){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){a++;var d=new FileReader;d.onload=function(){c?c[l]=this.result:r=this.result,--a||s(r)},d.readAsArrayBuffer(e)}else if(n(e))for(var h=0;h<e.length;h++)o(e[h],h,e);else if(e&&"object"==typeof e&&!i(e))for(var u in e)o(e[u],u,e)}var a=0,r=e;o(r),a||s(r)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":41,isarray:42}],40:[function(e,t,s){function n(){}function i(e){var t="",n=!1;return t+=e.type,s.BINARY_EVENT!=e.type&&s.BINARY_ACK!=e.type||(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(n=!0,t+=e.nsp),null!=e.id&&(n&&(t+=",",n=!1),t+=e.id),null!=e.data&&(n&&(t+=","),t+=h.stringify(e.data)),d("encoded %j as %s",e,t),t}function o(e,t){p.removeBlobs(e,function(e){var s=p.deconstructPacket(e),n=i(s.packet),o=s.buffers;o.unshift(n),t(o)})}function a(){this.reconstructor=null}function r(e){var t={},n=0;if(t.type=Number(e.charAt(0)),null==s.types[t.type])return c();if(s.BINARY_EVENT==t.type||s.BINARY_ACK==t.type){for(t.attachments="";"-"!=e.charAt(++n);)t.attachments+=e.charAt(n);t.attachments=Number(t.attachments)}if("/"==e.charAt(n+1))for(t.nsp="";++n&&","!=(o=e.charAt(n))&&(t.nsp+=o,n+1!=e.length););else t.nsp="/";var i=e.charAt(n+1);if(""!=i&&Number(i)==i){for(t.id="";++n;){var o=e.charAt(n);if(null==o||Number(o)!=o){--n;break}if(t.id+=e.charAt(n),n+1==e.length)break}t.id=Number(t.id)}if(e.charAt(++n))try{t.data=h.parse(e.substr(n))}catch(e){return c()}return d("decoded %s as %j",e,t),t}function l(e){this.reconPack=e,this.buffers=[]}function c(e){return{type:s.ERROR,data:"parser error"}}var d=e("debug")("socket.io-parser"),h=e("json3"),u=(e("isarray"),e("component-emitter")),p=e("./binary"),g=e("./is-buffer");s.protocol=4,s.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],s.CONNECT=0,s.DISCONNECT=1,s.EVENT=2,s.ACK=3,s.ERROR=4,s.BINARY_EVENT=5,s.BINARY_ACK=6,s.Encoder=n,s.Decoder=a,n.prototype.encode=function(e,t){d("encoding packet %j",e),s.BINARY_EVENT==e.type||s.BINARY_ACK==e.type?o(e,t):t([i(e)])},u(a.prototype),a.prototype.add=function(e){var t;if("string"==typeof e)t=r(e),s.BINARY_EVENT==t.type||s.BINARY_ACK==t.type?(this.reconstructor=new l(t),0==this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!g(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",t))}},a.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},l.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=p.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},l.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":39,"./is-buffer":41,"component-emitter":8,debug:9,isarray:42,json3:43}],41:[function(e,t,s){(function(e){t.exports=function(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],42:[function(e,t,s){t.exports=e(33)},{}],43:[function(e,t,s){!function(e){function t(e){if(t[e]!==o)return t[e];var s;if("bug-string-char-index"==e)s="a"!="a"[0];else if("json"==e)s=t("json-stringify")&&t("json-parse");else{var n,i='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var r=l.stringify,d="function"==typeof r&&c;if(d){(n=function(){return 1}).toJSON=n;try{d="0"===r(0)&&"0"===r(new Number)&&'""'==r(new String)&&r(a)===o&&r(o)===o&&r()===o&&"1"===r(n)&&"[1]"==r([n])&&"[null]"==r([o])&&"null"==r(null)&&"[null,null,null]"==r([o,a,null])&&r({a:[n,!0,!1,null,"\0\b\n\f\r\t"]})==i&&"1"===r(null,n)&&"[\n 1,\n 2\n]"==r([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==r(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==r(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==r(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==r(new Date(-1))}catch(e){d=!1}}s=d}if("json-parse"==e){var h=l.parse;if("function"==typeof h)try{if(0===h("0")&&!h(!1)){var u=5==(n=h(i)).a.length&&1===n.a[0];if(u){try{u=!h('"\t"')}catch(e){}if(u)try{u=1!==h("01")}catch(e){}if(u)try{u=1!==h("1.")}catch(e){}}}}catch(e){u=!1}s=u}}return t[e]=!!s}var n,i,o,a={}.toString,r="object"==typeof JSON&&JSON,l="object"==typeof s&&s&&!s.nodeType&&s;l&&r?(l.stringify=r.stringify,l.parse=r.parse):l=e.JSON=r||{};var c=new Date(-0xc782b5b800cec);try{c=-109252==c.getUTCFullYear()&&0===c.getUTCMonth()&&1===c.getUTCDate()&&10==c.getUTCHours()&&37==c.getUTCMinutes()&&6==c.getUTCSeconds()&&708==c.getUTCMilliseconds()}catch(e){}if(!t("json")){var d=t("bug-string-char-index");if(!c)var h=Math.floor,u=[0,31,59,90,120,151,181,212,243,273,304,334],p=function(e,t){return u[t]+365*(e-1970)+h((e-1969+(t=+(t>1)))/4)-h((e-1901+t)/100)+h((e-1601+t)/400)};(n={}.hasOwnProperty)||(n=function(e){var t,s={};return(s.__proto__=null,s.__proto__={toString:1},s).toString!=a?n=function(e){var t=this.__proto__,s=e in(this.__proto__=null,this);return this.__proto__=t,s}:(t=s.constructor,n=function(e){var s=(this.constructor||t).prototype;return e in this&&!(e in s&&this[e]===s[e])}),s=null,n.call(this,e)});var g={boolean:1,number:1,string:1,undefined:1},f=function(e,t){var s=typeof e[t];return"object"==s?!!e[t]:!g[s]};if(i=function(e,t){var s,o,r,l=0;(s=function(){this.valueOf=0}).prototype.valueOf=0,o=new s;for(r in o)n.call(o,r)&&l++;return s=o=null,l?i=2==l?function(e,t){var s,i={},o="[object Function]"==a.call(e);for(s in e)o&&"prototype"==s||n.call(i,s)||!(i[s]=1)||!n.call(e,s)||t(s)}:function(e,t){var s,i,o="[object Function]"==a.call(e);for(s in e)o&&"prototype"==s||!n.call(e,s)||(i="constructor"===s)||t(s);(i||n.call(e,s="constructor"))&&t(s)}:(o=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],i=function(e,t){var s,i,r="[object Function]"==a.call(e),l=!r&&"function"!=typeof e.constructor&&f(e,"hasOwnProperty")?e.hasOwnProperty:n;for(s in e)r&&"prototype"==s||!l.call(e,s)||t(s);for(i=o.length;s=o[--i];l.call(e,s)&&t(s));}),i(e,t)},!t("json-stringify")){var m={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},w=function(e,t){return("000000"+(t||0)).slice(-e)},v=function(e){var t,s='"',n=0,i=e.length,o=i>10&&d;for(o&&(t=e.split(""));n<i;n++){var a=e.charCodeAt(n);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:s+=m[a];break;default:if(a<32){s+="\\u00"+w(2,a.toString(16));break}s+=o?t[n]:d?e.charAt(n):e[n]}}return s+'"'},y=function(e,t,s,r,l,c,d){var u,g,f,m,b,k,x,T,C,_,S,D,O,E,M,I;try{u=t[e]}catch(e){}if("object"==typeof u&&u)if("[object Date]"!=(g=a.call(u))||n.call(u,"toJSON"))"function"==typeof u.toJSON&&("[object Number]"!=g&&"[object String]"!=g&&"[object Array]"!=g||n.call(u,"toJSON"))&&(u=u.toJSON(e));else if(u>-1/0&&u<1/0){if(p){for(b=h(u/864e5),f=h(b/365.2425)+1970-1;p(f+1,0)<=b;f++);for(m=h((b-p(f,0))/30.42);p(f,m+1)<=b;m++);b=1+b-p(f,m),x=h((k=(u%864e5+864e5)%864e5)/36e5)%24,T=h(k/6e4)%60,C=h(k/1e3)%60,_=k%1e3}else f=u.getUTCFullYear(),m=u.getUTCMonth(),b=u.getUTCDate(),x=u.getUTCHours(),T=u.getUTCMinutes(),C=u.getUTCSeconds(),_=u.getUTCMilliseconds();u=(f<=0||f>=1e4?(f<0?"-":"+")+w(6,f<0?-f:f):w(4,f))+"-"+w(2,m+1)+"-"+w(2,b)+"T"+w(2,x)+":"+w(2,T)+":"+w(2,C)+"."+w(3,_)+"Z"}else u=null;if(s&&(u=s.call(t,e,u)),null===u)return"null";if("[object Boolean]"==(g=a.call(u)))return""+u;if("[object Number]"==g)return u>-1/0&&u<1/0?""+u:"null";if("[object String]"==g)return v(""+u);if("object"==typeof u){for(E=d.length;E--;)if(d[E]===u)throw TypeError();if(d.push(u),S=[],M=c,c+=l,"[object Array]"==g){for(O=0,E=u.length;O<E;O++)D=y(O,u,s,r,l,c,d),S.push(D===o?"null":D);I=S.length?l?"[\n"+c+S.join(",\n"+c)+"\n"+M+"]":"["+S.join(",")+"]":"[]"}else i(r||u,function(e){var t=y(e,u,s,r,l,c,d);t!==o&&S.push(v(e)+":"+(l?" ":"")+t)}),I=S.length?l?"{\n"+c+S.join(",\n"+c)+"\n"+M+"}":"{"+S.join(",")+"}":"{}";return d.pop(),I}};l.stringify=function(e,t,s){var n,i,o,r;if("function"==typeof t||"object"==typeof t&&t)if("[object Function]"==(r=a.call(t)))i=t;else if("[object Array]"==r){o={};for(var l,c=0,d=t.length;c<d;l=t[c++],("[object String]"==(r=a.call(l))||"[object Number]"==r)&&(o[l]=1));}if(s)if("[object Number]"==(r=a.call(s))){if((s-=s%1)>0)for(n="",s>10&&(s=10);n.length<s;n+=" ");}else"[object String]"==r&&(n=s.length<=10?s:s.slice(0,10));return y("",(l={},l[""]=e,l),i,o,n,"",[])}}if(!t("json-parse")){var b,k,x=String.fromCharCode,T={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},C=function(){throw b=k=null,SyntaxError()},_=function(){for(var e,t,s,n,i,o=k,a=o.length;b<a;)switch(i=o.charCodeAt(b)){case 9:case 10:case 13:case 32:b++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=d?o.charAt(b):o[b],b++,e;case 34:for(e="@",b++;b<a;)if((i=o.charCodeAt(b))<32)C();else if(92==i)switch(i=o.charCodeAt(++b)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=T[i],b++;break;case 117:for(t=++b,s=b+4;b<s;b++)(i=o.charCodeAt(b))>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||C();e+=x("0x"+o.slice(t,b));break;default:C()}else{if(34==i)break;for(i=o.charCodeAt(b),t=b;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++b);e+=o.slice(t,b)}if(34==o.charCodeAt(b))return b++,e;C();default:if(t=b,45==i&&(n=!0,i=o.charCodeAt(++b)),i>=48&&i<=57){for(48==i&&(i=o.charCodeAt(b+1))>=48&&i<=57&&C(),n=!1;b<a&&(i=o.charCodeAt(b))>=48&&i<=57;b++);if(46==o.charCodeAt(b)){for(s=++b;s<a&&(i=o.charCodeAt(s))>=48&&i<=57;s++);s==b&&C(),b=s}if(101==(i=o.charCodeAt(b))||69==i){for(43!=(i=o.charCodeAt(++b))&&45!=i||b++,s=b;s<a&&(i=o.charCodeAt(s))>=48&&i<=57;s++);s==b&&C(),b=s}return+o.slice(t,b)}if(n&&C(),"true"==o.slice(b,b+4))return b+=4,!0;if("false"==o.slice(b,b+5))return b+=5,!1;if("null"==o.slice(b,b+4))return b+=4,null;C()}return"$"},S=function(e){var t,s;if("$"==e&&C(),"string"==typeof e){if("@"==(d?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=_());s||(s=!0))s&&(","==e?"]"==(e=_())&&C():C()),","==e&&C(),t.push(S(e));return t}if("{"==e){for(t={};"}"!=(e=_());s||(s=!0))s&&(","==e?"}"==(e=_())&&C():C()),","!=e&&"string"==typeof e&&"@"==(d?e.charAt(0):e[0])&&":"==_()||C(),t[e.slice(1)]=S(_());return t}C()}return e},D=function(e,t,s){var n=O(e,t,s);n===o?delete e[t]:e[t]=n},O=function(e,t,s){var n,o=e[t];if("object"==typeof o&&o)if("[object Array]"==a.call(o))for(n=o.length;n--;)D(o,n,s);else i(o,function(e){D(o,e,s)});return s.call(e,t,o)};l.parse=function(e,t){var s,n;return b=0,k=""+e,s=S(_()),"$"!=_()&&C(),b=k=null,t&&"[object Function]"==a.call(t)?O((n={},n[""]=s,n),"",t):s}}}}(this)},{}],44:[function(e,t,s){t.exports=function(e,t){for(var s=[],n=(t=t||0)||0;n<e.length;n++)s[n-t]=e[n];return s}},{}]},{},[1])(1)}),function(e,t){function s(s,n){function i(e){return le.preferFlash&&ne&&!le.ignoreFlash&&le.flash[e]!==t&&le.flash[e]}function o(e){return function(t){var s=this._s;return s&&s._a?e.call(this,t):null}}this.setupOptions={url:s||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!0,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=n||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20130512",this.altURL=this.movieURL=this.version=null,this.enabled=this.swfLoaded=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.didFlashBlock=this.muted=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={},this.html5={usingFlash:null},this.flash={},this.ignoreFlash=this.html5Only=!1;var a,r,l,c,d,h,u,p,g,f,m,w,v,y,b,k,x,T,C,_,S,D,O,E,M,I,A,P,N,R,B,F,H,L,j,U,z,W,q,K,$,G,V,Y,X,Q,J,Z,ee,te,se,ne,ie,oe,ae,re,le=this,ce=null,de=null,he=navigator.userAgent,ue=e.location.href.toString(),pe=document,ge=[],fe=!1,me=!1,we=!1,ve=!1,ye=!1,be=null,ke=null,xe=!1,Te=!1,Ce=0,_e=null,Se=[],De=null,Oe=Array.prototype.slice,Ee=!1,Me=0,Ie=he.match(/(ipad|iphone|ipod)/i),Ae=he.match(/android/i),Pe=he.match(/msie/i),Ne=he.match(/webkit/i),Re=he.match(/safari/i)&&!he.match(/chrome/i),Be=he.match(/opera/i),Fe=he.match(/firefox/i),He=he.match(/(mobile|pre\/|xoom)/i)||Ie||Ae,Le=!ue.match(/usehtml5audio/i)&&!ue.match(/sm2\-ignorebadua/i)&&Re&&!he.match(/silk/i)&&he.match(/OS X 10_6_([3-7])/i),je=pe.hasFocus!==t?pe.hasFocus():null,Ue=Re&&(pe.hasFocus===t||!pe.hasFocus()),ze=!Ue,We=/(mp3|mp4|mpa|m4a|m4b)/i,qe=pe.location?pe.location.protocol.match(/http/i):null,Ke=qe?"":"http://",$e=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,Ge="mpeg4 aac flv mov mp4 m4v f4v m4a m4b mp4v 3gp 3g2".split(" "),Ve=RegExp("\\.("+Ge.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!qe;var Ye;try{Ye=Audio!==t&&(Be&&opera!==t&&10>opera.version()?new Audio(null):new Audio).canPlayType!==t}catch(e){Ye=!1}this.hasHTML5=Ye,this.setup=function(e){var s=!le.url;return e!==t&&we&&De&&le.ok(),g(e),e&&(s&&O&&e.url!==t&&le.beginDelayedInit(),!O&&e.url!==t&&"complete"===pe.readyState&&setTimeout(S,1)),le},this.supported=this.ok=function(){return De?we&&!ve:le.useHTML5Audio&&le.hasHTML5},this.getMovie=function(t){return r(t)||pe[t]||e[t]},this.createSound=function(e,s){function n(){return i=j(i),le.sounds[i.id]=new a(i),le.soundIDs.push(i.id),le.sounds[i.id]}var i,o=null;if(!we||!le.ok())return!1;if(s!==t&&(e={id:e,url:s}),i=p(e),i.url=$(i.url),void 0===i.id&&(i.id=le.setupOptions.idPrefix+Me++),z(i.id,!0))return le.sounds[i.id];if(Y(i))(o=n())._setup_html5(i);else{if(le.html5Only||le.html5.usingFlash&&i.url&&i.url.match(/data\:/i))return n();8<h&&null===i.isMovieStar&&(i.isMovieStar=!(!i.serverURL&&!(i.type&&i.type.match($e)||i.url&&i.url.match(Ve)))),i=U(i,void 0),o=n(),8===h?de._createSound(i.id,i.loops||1,i.usePolicyFile):(de._createSound(i.id,i.url,i.usePeakData,i.useWaveformData,i.useEQData,i.isMovieStar,!!i.isMovieStar&&i.bufferTime,i.loops||1,i.serverURL,i.duration||null,i.autoPlay,!0,i.autoLoad,i.usePolicyFile),i.serverURL||(o.connected=!0,i.onconnect&&i.onconnect.apply(o))),!i.serverURL&&(i.autoLoad||i.autoPlay)&&o.load(i)}return!i.serverURL&&i.autoPlay&&o.play(),o},this.destroySound=function(e,t){if(!z(e))return!1;var s,n=le.sounds[e];for(n._iO={},n.stop(),n.unload(),s=0;s<le.soundIDs.length;s++)if(le.soundIDs[s]===e){le.soundIDs.splice(s,1);break}return t||n.destruct(!0),delete le.sounds[e],!0},this.load=function(e,t){return!!z(e)&&le.sounds[e].load(t)},this.unload=function(e){return!!z(e)&&le.sounds[e].unload()},this.onposition=this.onPosition=function(e,t,s,n){return!!z(e)&&le.sounds[e].onposition(t,s,n)},this.clearOnPosition=function(e,t,s){return!!z(e)&&le.sounds[e].clearOnPosition(t,s)},this.start=this.play=function(e,t){var s=null,n=t&&!(t instanceof Object);if(!we||!le.ok())return!1;if(z(e,n))n&&(t={url:t});else{if(!n)return!1;n&&(t={url:t}),t&&t.url&&(t.id=e,s=le.createSound(t).play())}return null===s&&(s=le.sounds[e].play(t)),s},this.setPosition=function(e,t){return!!z(e)&&le.sounds[e].setPosition(t)},this.stop=function(e){return!!z(e)&&le.sounds[e].stop()},this.stopAll=function(){for(var e in le.sounds)le.sounds.hasOwnProperty(e)&&le.sounds[e].stop()},this.pause=function(e){return!!z(e)&&le.sounds[e].pause()},this.pauseAll=function(){var e;for(e=le.soundIDs.length-1;0<=e;e--)le.sounds[le.soundIDs[e]].pause()},this.resume=function(e){return!!z(e)&&le.sounds[e].resume()},this.resumeAll=function(){var e;for(e=le.soundIDs.length-1;0<=e;e--)le.sounds[le.soundIDs[e]].resume()},this.togglePause=function(e){return!!z(e)&&le.sounds[e].togglePause()},this.setPan=function(e,t){return!!z(e)&&le.sounds[e].setPan(t)},this.setVolume=function(e,t){return!!z(e)&&le.sounds[e].setVolume(t)},this.mute=function(e){var t=0;if(e instanceof String&&(e=null),e)return!!z(e)&&le.sounds[e].mute();for(t=le.soundIDs.length-1;0<=t;t--)le.sounds[le.soundIDs[t]].mute();return le.muted=!0},this.muteAll=function(){le.mute()},this.unmute=function(e){if(e instanceof String&&(e=null),e)return!!z(e)&&le.sounds[e].unmute();for(e=le.soundIDs.length-1;0<=e;e--)le.sounds[le.soundIDs[e]].unmute();return le.muted=!1,!0},this.unmuteAll=function(){le.unmute()},this.toggleMute=function(e){return!!z(e)&&le.sounds[e].toggleMute()},this.getMemoryUse=function(){var e=0;return de&&8!==h&&(e=parseInt(de._getMemoryUse(),10)),e},this.disable=function(s){var n;if(s===t&&(s=!1),ve)return!1;for(ve=!0,n=le.soundIDs.length-1;0<=n;n--)N(le.sounds[le.soundIDs[n]]);return u(s),te.remove(e,"load",v),!0},this.canPlayMIME=function(e){var t;return le.hasHTML5&&(t=X({type:e})),!t&&De&&(t=e&&le.ok()?!!(8<h&&e.match($e)||e.match(le.mimePattern)):null),t},this.canPlayURL=function(e){var t;return le.hasHTML5&&(t=X({url:e})),!t&&De&&(t=e&&le.ok()?!!e.match(le.filePattern):null),t},this.canPlayLink=function(e){return!(e.type===t||!e.type||!le.canPlayMIME(e.type))||le.canPlayURL(e.href)},this.getSoundById=function(e,t){return e?le.sounds[e]:null},this.onready=function(t,s){if("function"!=typeof t)throw F("needFunction","onready");return s||(s=e),m("onready",t,s),w(),!0},this.ontimeout=function(t,s){if("function"!=typeof t)throw F("needFunction","ontimeout");return s||(s=e),m("ontimeout",t,s),w({type:"ontimeout"}),!0},this._wD=this._writeDebug=function(e,t){return!0},this._debug=function(){},this.reboot=function(t,s){var n,i,o;for(n=le.soundIDs.length-1;0<=n;n--)le.sounds[le.soundIDs[n]].destruct();if(de)try{Pe&&(ke=de.innerHTML),be=de.parentNode.removeChild(de)}catch(e){}if(ke=be=De=de=null,le.enabled=O=we=xe=Te=fe=me=ve=Ee=le.swfLoaded=!1,le.soundIDs=[],le.sounds={},Me=0,t)ge=[];else for(n in ge)if(ge.hasOwnProperty(n))for(i=0,o=ge[n].length;i<o;i++)ge[n][i].fired=!1;return le.html5={usingFlash:null},le.flash={},le.html5Only=!1,le.ignoreFlash=!1,e.setTimeout(function(){_(),s||le.beginDelayedInit()},20),le},this.reset=function(){return le.reboot(!0,!0)},this.getMoviePercent=function(){return de&&"PercentLoaded"in de?de.PercentLoaded():null},this.beginDelayedInit=function(){ye=!0,S(),setTimeout(function(){return!Te&&(M(),C(),Te=!0)},20),y()},this.destruct=function(){le.disable(!0)},a=function(e){var s,n,i,o,a,r,l,c,d,u,g,f=this,m=!1,w=[],v=0,y=null;n=s=null,this.sID=this.id=e.id,this.url=e.url,this._iO=this.instanceOptions=this.options=p(e),this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,g=!this.url,this.id3={},this._debug=function(){},this.load=function(e){var s;if(e!==t?f._iO=p(e,f.options):(e=f.options,f._iO=e,y&&y!==f.url&&(f._iO.url=f.url,f.url=null)),f._iO.url||(f._iO.url=f.url),f._iO.url=$(f._iO.url),!(s=f.instanceOptions=f._iO).url&&!f.url)return f;if(s.url===f.url&&0!==f.readyState&&2!==f.readyState)return 3===f.readyState&&s.onload&&re(f,function(){s.onload.apply(f,[!!f.duration])}),f;if(f.loaded=!1,f.readyState=1,f.playState=0,f.id3={},Y(s))f._setup_html5(s)._called_load||(f._html5_canplay=!1,f.url!==s.url&&(f._a.src=s.url,f.setPosition(0)),f._a.autobuffer="auto",f._a.preload="auto",f._a._called_load=!0,s.autoPlay&&f.play());else{if(le.html5Only||f._iO.url&&f._iO.url.match(/data\:/i))return f;try{f.isHTML5=!1,f._iO=U(j(s)),s=f._iO,8===h?de._load(f.id,s.url,s.stream,s.autoPlay,s.usePolicyFile):de._load(f.id,s.url,!!s.stream,!!s.autoPlay,s.loops||1,!!s.autoLoad,s.usePolicyFile)}catch(e){I({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return f.url=s.url,f},this.unload=function(){return 0!==f.readyState&&(f.isHTML5?(r(),f._a&&(f._a.pause(),y=J(f._a))):8===h?de._unload(f.id,"about:blank"):de._unload(f.id),i()),f},this.destruct=function(e){f.isHTML5?(r(),f._a&&(f._a.pause(),J(f._a),Ee||a(),f._a._s=null,f._a=null)):(f._iO.onfailure=null,de._destroySound(f.id)),e||le.destroySound(f.id,!0)},this.start=this.play=function(e,s){var n,i,o,a,r;if(i=!0,i=null,s=s===t||s,e||(e={}),f.url&&(f._iO.url=f.url),f._iO=p(f._iO,f.options),f._iO=p(e,f._iO),f._iO.url=$(f._iO.url),f.instanceOptions=f._iO,!f.isHTML5&&f._iO.serverURL&&!f.connected)return f.getAutoPlay()||f.setAutoPlay(!0),f;if(Y(f._iO)&&(f._setup_html5(f._iO),l()),1===f.playState&&!f.paused&&((n=f._iO.multiShot)||(f.isHTML5&&f.setPosition(f._iO.position),i=f)),null!==i)return i;if(e.url&&e.url!==f.url&&(f.readyState||f.isHTML5||8!==h||!g?f.load(f._iO):g=!1),f.loaded||(0===f.readyState?(f.isHTML5||le.html5Only?f.isHTML5?f.load(f._iO):i=f:(f._iO.autoPlay=!0,f.load(f._iO)),f.instanceOptions=f._iO):2===f.readyState&&(i=f)),null!==i)return i;if(!f.isHTML5&&9===h&&0<f.position&&f.position===f.duration&&(e.position=0),f.paused&&0<=f.position&&(!f._iO.serverURL||0<f.position))f.resume();else{if(f._iO=p(e,f._iO),null!==f._iO.from&&null!==f._iO.to&&0===f.instanceCount&&0===f.playState&&!f._iO.serverURL){if(n=function(){f._iO=p(e,f._iO),f.play(f._iO)},f.isHTML5&&!f._html5_canplay?(f.load({oncanplay:n}),i=!1):f.isHTML5||f.loaded||f.readyState&&2===f.readyState||(f.load({onload:n}),i=!1),null!==i)return i;f._iO=u()}(!f.instanceCount||f._iO.multiShotEvents||f.isHTML5&&f._iO.multiShot&&!Ee||!f.isHTML5&&8<h&&!f.getAutoPlay())&&f.instanceCount++,f._iO.onposition&&0===f.playState&&c(f),f.playState=1,f.paused=!1,f.position=f._iO.position===t||isNaN(f._iO.position)?0:f._iO.position,f.isHTML5||(f._iO=U(j(f._iO))),f._iO.onplay&&s&&(f._iO.onplay.apply(f),m=!0),f.setVolume(f._iO.volume,!0),f.setPan(f._iO.pan,!0),f.isHTML5?2>f.instanceCount?(l(),i=f._setup_html5(),f.setPosition(f._iO.position),i.play()):(o=new Audio(f._iO.url),a=function(){te.remove(o,"onended",a),f._onfinish(f),J(o),o=null},r=function(){te.remove(o,"canplay",r);try{o.currentTime=f._iO.position/1e3}catch(e){}o.play()},te.add(o,"ended",a),f._iO.position?te.add(o,"canplay",r):o.play()):(i=de._start(f.id,f._iO.loops||1,9===h?f.position:f.position/1e3,f._iO.multiShot||!1),9===h&&!i&&f._iO.onplayerror&&f._iO.onplayerror.apply(f))}return f},this.stop=function(e){var t=f._iO;return 1===f.playState&&(f._onbufferchange(0),f._resetOnPosition(0),f.paused=!1,f.isHTML5||(f.playState=0),d(),t.to&&f.clearOnPosition(t.to),f.isHTML5?f._a&&(e=f.position,f.setPosition(0),f.position=e,f._a.pause(),f.playState=0,f._onTimer(),r()):(de._stop(f.id,e),t.serverURL&&f.unload()),f.instanceCount=0,f._iO={},t.onstop&&t.onstop.apply(f)),f},this.setAutoPlay=function(e){f._iO.autoPlay=e,f.isHTML5||(de._setAutoPlay(f.id,e),e&&!f.instanceCount&&1===f.readyState&&f.instanceCount++)},this.getAutoPlay=function(){return f._iO.autoPlay},this.setPosition=function(e){e===t&&(e=0);var s=f.isHTML5?Math.max(e,0):Math.min(f.duration||f._iO.duration,Math.max(e,0));if(f.position=s,e=f.position/1e3,f._resetOnPosition(f.position),f._iO.position=s,f.isHTML5){if(f._a){if(f._html5_canplay){if(f._a.currentTime!==e)try{f._a.currentTime=e,(0===f.playState||f.paused)&&f._a.pause()}catch(e){}}else if(e)return f;f.paused&&f._onTimer(!0)}}else e=9===h?f.position:e,f.readyState&&2!==f.readyState&&de._setPosition(f.id,e,f.paused||!f.playState,f._iO.multiShot);return f},this.pause=function(e){return f.paused||0===f.playState&&1!==f.readyState?f:(f.paused=!0,f.isHTML5?(f._setup_html5().pause(),r()):(e||e===t)&&de._pause(f.id,f._iO.multiShot),f._iO.onpause&&f._iO.onpause.apply(f),f)},this.resume=function(){var e=f._iO;return f.paused?(f.paused=!1,f.playState=1,f.isHTML5?(f._setup_html5().play(),l()):(e.isMovieStar&&!e.serverURL&&f.setPosition(f.position),de._pause(f.id,e.multiShot)),!m&&e.onplay?(e.onplay.apply(f),m=!0):e.onresume&&e.onresume.apply(f),f):f},this.togglePause=function(){return 0===f.playState?(f.play({position:9!==h||f.isHTML5?f.position/1e3:f.position}),f):(f.paused?f.resume():f.pause(),f)},this.setPan=function(e,s){return e===t&&(e=0),s===t&&(s=!1),f.isHTML5||de._setPan(f.id,e),f._iO.pan=e,s||(f.pan=e,f.options.pan=e),f},this.setVolume=function(e,s){return e===t&&(e=100),s===t&&(s=!1),f.isHTML5?f._a&&(f._a.volume=Math.max(0,Math.min(1,e/100))):de._setVolume(f.id,le.muted&&!f.muted||f.muted?0:e),f._iO.volume=e,s||(f.volume=e,f.options.volume=e),f},this.mute=function(){return f.muted=!0,f.isHTML5?f._a&&(f._a.muted=!0):de._setVolume(f.id,0),f},this.unmute=function(){f.muted=!1;var e=f._iO.volume!==t;return f.isHTML5?f._a&&(f._a.muted=!1):de._setVolume(f.id,e?f._iO.volume:f.options.volume),f},this.toggleMute=function(){return f.muted?f.unmute():f.mute()},this.onposition=this.onPosition=function(e,s,n){return w.push({position:parseInt(e,10),method:s,scope:n!==t?n:f,fired:!1}),f},this.clearOnPosition=function(e,t){var s;if(e=parseInt(e,10),isNaN(e))return!1;for(s=0;s<w.length;s++)e!==w[s].position||t&&t!==w[s].method||(w[s].fired&&v--,w.splice(s,1))},this._processOnPosition=function(){var e,t;if(!(e=w.length)||!f.playState||v>=e)return!1;for(e-=1;0<=e;e--)!(t=w[e]).fired&&f.position>=t.position&&(t.fired=!0,v++,t.method.apply(t.scope,[t.position]));return!0},this._resetOnPosition=function(e){var t,s;if(!(t=w.length))return!1;for(t-=1;0<=t;t--)(s=w[t]).fired&&e<=s.position&&(s.fired=!1,v--);return!0},u=function(){var e,t,s=f._iO,n=s.from,i=s.to;return t=function(){f.clearOnPosition(i,t),f.stop()},e=function(){null===i||isNaN(i)||f.onPosition(i,t)},null!==n&&!isNaN(n)&&(s.position=n,s.multiShot=!1,e()),s},c=function(){var e,t=f._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&f.onPosition(parseInt(e,10),t[e])},d=function(){var e,t=f._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&f.clearOnPosition(parseInt(e,10))},l=function(){f.isHTML5&&W(f)},r=function(){f.isHTML5&&q(f)},(i=function(e){e||(w=[],v=0),m=!1,f._hasTimer=null,f._a=null,f._html5_canplay=!1,f.bytesLoaded=null,f.bytesTotal=null,f.duration=f._iO&&f._iO.duration?f._iO.duration:null,f.durationEstimate=null,f.buffered=[],f.eqData=[],f.eqData.left=[],f.eqData.right=[],f.failures=0,f.isBuffering=!1,f.instanceOptions={},f.instanceCount=0,f.loaded=!1,f.metadata={},f.readyState=0,f.muted=!1,f.paused=!1,f.peakData={left:0,right:0},f.waveformData={left:[],right:[]},f.playState=0,f.position=null,f.id3={}})(),this._onTimer=function(e){var t,i=!1,o={};if(f._hasTimer||e)return f._a&&(e||(0<f.playState||1===f.readyState)&&!f.paused)&&((t=f._get_html5_duration())!==s&&(s=t,f.duration=t,i=!0),f.durationEstimate=f.duration,(t=1e3*f._a.currentTime||0)!==n&&(n=t,i=!0),(i||e)&&f._whileplaying(t,o,o,o,o)),i},this._get_html5_duration=function(){var e=f._iO;return(e=f._a&&f._a.duration?1e3*f._a.duration:e&&e.duration?e.duration:null)&&!isNaN(e)&&1/0!==e?e:null},this._apply_loop=function(e,t){e.loop=1<t?"loop":""},this._setup_html5=function(e){e=p(f._iO,e);var t,s=Ee?ce:f._a,n=decodeURI(e.url);if(Ee?n===decodeURI(se)&&(t=!0):n===decodeURI(y)&&(t=!0),s){if(s._s)if(Ee)s._s&&s._s.playState&&!t&&s._s.stop();else if(!Ee&&n===decodeURI(y))return f._apply_loop(s,e.loops),s;t||(i(!1),s.src=e.url,se=y=f.url=e.url,s._called_load=!1)}else f._a=e.autoLoad||e.autoPlay?new Audio(e.url):Be&&10>opera.version()?new Audio(null):new Audio,s=f._a,s._called_load=!1,Ee&&(ce=s);return f.isHTML5=!0,f._a=s,s._s=f,o(),f._apply_loop(s,e.loops),e.autoLoad||e.autoPlay?f.load():(s.autobuffer=!1,s.preload="auto"),s},o=function(){if(f._a._added_events)return!1;var e;f._a._added_events=!0;for(e in ae)ae.hasOwnProperty(e)&&f._a&&f._a.addEventListener(e,ae[e],!1);return!0},a=function(){var e;f._a._added_events=!1;for(e in ae)ae.hasOwnProperty(e)&&f._a&&f._a.removeEventListener(e,ae[e],!1)},this._onload=function(e){var t=!!e||!f.isHTML5&&8===h&&f.duration;return f.loaded=t,f.readyState=t?3:2,f._onbufferchange(0),f._iO.onload&&re(f,function(){f._iO.onload.apply(f,[t])}),!0},this._onbufferchange=function(e){return!(0===f.playState||e&&f.isBuffering||!e&&!f.isBuffering)&&(f.isBuffering=1===e,f._iO.onbufferchange&&f._iO.onbufferchange.apply(f),!0)},this._onsuspend=function(){return f._iO.onsuspend&&f._iO.onsuspend.apply(f),!0},this._onfailure=function(e,t,s){f.failures++,f._iO.onfailure&&1===f.failures&&f._iO.onfailure(f,e,t,s)},this._onfinish=function(){var e=f._iO.onfinish;f._onbufferchange(0),f._resetOnPosition(0),f.instanceCount&&(f.instanceCount--,f.instanceCount||(d(),f.playState=0,f.paused=!1,f.instanceCount=0,f.instanceOptions={},f._iO={},r(),f.isHTML5&&(f.position=0)),(!f.instanceCount||f._iO.multiShotEvents)&&e&&re(f,function(){e.apply(f)}))},this._whileloading=function(e,t,s,n){var i=f._iO;f.bytesLoaded=e,f.bytesTotal=t,f.duration=Math.floor(s),f.bufferLength=n,f.durationEstimate=f.isHTML5||i.isMovieStar?f.duration:i.duration?f.duration>i.duration?f.duration:i.duration:parseInt(f.bytesTotal/f.bytesLoaded*f.duration,10),f.isHTML5||(f.buffered=[{start:0,end:f.duration}]),(3!==f.readyState||f.isHTML5)&&i.whileloading&&i.whileloading.apply(f)},this._whileplaying=function(e,s,n,i,o){var a=f._iO;return!isNaN(e)&&null!==e&&(f.position=Math.max(0,e),f._processOnPosition(),!f.isHTML5&&8<h&&(a.usePeakData&&s!==t&&s&&(f.peakData={left:s.leftPeak,right:s.rightPeak}),a.useWaveformData&&n!==t&&n&&(f.waveformData={left:n.split(","),right:i.split(",")}),a.useEQData&&o!==t&&o&&o.leftEQ&&(e=o.leftEQ.split(","),f.eqData=e,f.eqData.left=e,o.rightEQ!==t&&o.rightEQ&&(f.eqData.right=o.rightEQ.split(",")))),1===f.playState&&(!f.isHTML5&&8===h&&!f.position&&f.isBuffering&&f._onbufferchange(0),a.whileplaying&&a.whileplaying.apply(f)),!0)},this._oncaptiondata=function(e){f.captiondata=e,f._iO.oncaptiondata&&f._iO.oncaptiondata.apply(f,[e])},this._onmetadata=function(e,t){var s,n,i={};for(s=0,n=e.length;s<n;s++)i[e[s]]=t[s];f.metadata=i,f._iO.onmetadata&&f._iO.onmetadata.apply(f)},this._onid3=function(e,t){var s,n,i=[];for(s=0,n=e.length;s<n;s++)i[e[s]]=t[s];f.id3=p(f.id3,i),f._iO.onid3&&f._iO.onid3.apply(f)},this._onconnect=function(e){e=1===e,(f.connected=e)&&(f.failures=0,z(f.id)&&(f.getAutoPlay()?f.play(t,f.getAutoPlay()):f._iO.autoLoad&&f.load()),f._iO.onconnect&&f._iO.onconnect.apply(f,[e]))},this._ondataerror=function(e){0<f.playState&&f._iO.ondataerror&&f._iO.ondataerror.apply(f)}},E=function(){return pe.body||pe._docElement||pe.getElementsByTagName("div")[0]},r=function(e){return pe.getElementById(e)},p=function(e,s){var n,i,o=e||{};n=s===t?le.defaultOptions:s;for(i in n)n.hasOwnProperty(i)&&o[i]===t&&(o[i]="object"!=typeof n[i]||null===n[i]?n[i]:p(o[i],n[i]));return o},re=function(t,s){t.isHTML5||8!==h?s():e.setTimeout(s,0)},f={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},g=function(e,s){var n,i=!0,o=s!==t,a=le.setupOptions;for(n in e)if(e.hasOwnProperty(n))if("object"!=typeof e[n]||null===e[n]||e[n]instanceof Array||e[n]instanceof RegExp)o&&f[s]!==t?le[s][n]=e[n]:a[n]!==t?(le.setupOptions[n]=e[n],le[n]=e[n]):f[n]===t?i=!1:le[n]instanceof Function?le[n].apply(le,e[n]instanceof Array?e[n]:[e[n]]):le[n]=e[n];else{if(f[n]!==t)return g(e[n],n);i=!1}return i},te=function(){function t(e){var t=(e=Oe.call(e)).length;return n?(e[1]="on"+e[1],3<t&&e.pop()):3===t&&e.push(!1),e}function s(e,t){var s=e.shift(),o=[i[t]];n?s[o](e[0],e[1]):s[o].apply(s,e)}var n=e.attachEvent,i={add:n?"attachEvent":"addEventListener",remove:n?"detachEvent":"removeEventListener"};return{add:function(){s(t(arguments),"add")},remove:function(){s(t(arguments),"remove")}}}(),ae={abort:o(function(){}),canplay:o(function(){var e,s=this._s;if(s._html5_canplay)return!0;if(s._html5_canplay=!0,s._onbufferchange(0),e=s._iO.position===t||isNaN(s._iO.position)?null:s._iO.position/1e3,s.position&&this.currentTime!==e)try{this.currentTime=e}catch(e){}s._iO._oncanplay&&s._iO._oncanplay()}),canplaythrough:o(function(){var e=this._s;e.loaded||(e._onbufferchange(0),e._whileloading(e.bytesLoaded,e.bytesTotal,e._get_html5_duration()),e._onload(!0))}),ended:o(function(){this._s._onfinish()}),error:o(function(){this._s._onload(!1)}),loadeddata:o(function(){var e=this._s;!e._loaded&&!Re&&(e.duration=e._get_html5_duration())}),loadedmetadata:o(function(){}),loadstart:o(function(){this._s._onbufferchange(1)}),play:o(function(){this._s._onbufferchange(0)}),playing:o(function(){this._s._onbufferchange(0)}),progress:o(function(e){var t,s,n=this._s,i=0,i=e.target.buffered;t=e.loaded||0;var o=e.total||1;if(n.buffered=[],i&&i.length){for(t=0,s=i.length;t<s;t++)n.buffered.push({start:1e3*i.start(t),end:1e3*i.end(t)});i=1e3*(i.end(0)-i.start(0)),t=Math.min(1,i/(1e3*e.target.duration))}isNaN(t)||(n._onbufferchange(0),n._whileloading(t,o,n._get_html5_duration()),t&&o&&t===o&&ae.canplaythrough.call(this,e))}),ratechange:o(function(){}),suspend:o(function(e){var t=this._s;ae.progress.call(this,e),t._onsuspend()}),stalled:o(function(){}),timeupdate:o(function(){this._s._onTimer()}),waiting:o(function(){this._s._onbufferchange(1)})},Y=function(e){return!(!e||!(e.type||e.url||e.serverURL))&&(!(e.serverURL||e.type&&i(e.type))&&(e.type?X({type:e.type}):X({url:e.url})||le.html5Only||e.url.match(/data\:/i)))},J=function(e){var t;return e&&(t=Re&&!Ie?null:Fe?"about:blank":null,e.src=t,void 0!==e._called_unload&&(e._called_load=!1)),Ee&&(se=null),t},X=function(e){if(!le.useHTML5Audio||!le.hasHTML5)return!1;var s=e.url||null;e=e.type||null;var n,o=le.audioFormats;if(e&&le.html5[e]!==t)return le.html5[e]&&!i(e);if(!Q){Q=[];for(n in o)o.hasOwnProperty(n)&&(Q.push(n),o[n].related&&(Q=Q.concat(o[n].related)));Q=RegExp("\\.("+Q.join("|")+")(\\?.*)?$","i")}return(n=s?s.toLowerCase().match(Q):null)&&n.length?n=n[1]:e&&(s=e.indexOf(";"),n=(-1!==s?e.substr(0,s):e).substr(6)),n&&le.html5[n]!==t?s=le.html5[n]&&!i(n):(e="audio/"+n,s=le.html5.canPlayType({type:e}),s=(le.html5[n]=s)&&le.html5[e]&&!i(e)),s},ee=function(){function e(e){var t,s,n=t=!1;if(!o||"function"!=typeof o.canPlayType)return t;if(e instanceof Array){for(t=0,s=e.length;t<s;t++)(le.html5[e[t]]||o.canPlayType(e[t]).match(le.html5Test))&&(n=!0,le.html5[e[t]]=!0,le.flash[e[t]]=!!e[t].match(We));t=n}else e=!(!o||"function"!=typeof o.canPlayType)&&o.canPlayType(e),t=!(!e||!e.match(le.html5Test));return t}if(!le.useHTML5Audio||!le.hasHTML5)return De=le.html5.usingFlash=!0,!1;var s,n,i,o=Audio!==t?Be&&10>opera.version()?new Audio(null):new Audio:null,a={};i=le.audioFormats;for(s in i)if(i.hasOwnProperty(s)&&(n="audio/"+s,a[s]=e(i[s].type),a[n]=a[s],s.match(We)?(le.flash[s]=!0,le.flash[n]=!0):(le.flash[s]=!1,le.flash[n]=!1),i[s]&&i[s].related))for(n=i[s].related.length-1;0<=n;n--)a["audio/"+i[s].related[n]]=a[s],le.html5[i[s].related[n]]=a[s],le.flash[i[s].related[n]]=a[s];return a.canPlayType=o?e:null,le.html5=p(le.html5,a),le.html5.usingFlash=V(),De=le.html5.usingFlash,!0},T={},F=function(){},j=function(e){return 8===h&&1<e.loops&&e.stream&&(e.stream=!1),e},U=function(e,t){return e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)&&(e.usePolicyFile=!0),e},l=function(){return!1},N=function(e){for(var t in e)e.hasOwnProperty(t)&&"function"==typeof e[t]&&(e[t]=l)},R=function(e){e===t&&(e=!1),(ve||e)&&le.disable(e)},B=function(e){if(e)if(e.match(/\.swf(\?.*)?$/i)){if(e.substr(e.toLowerCase().lastIndexOf(".swf?")+4))return e}else e.lastIndexOf("/")!==e.length-1&&(e+="/");return e=(e&&-1!==e.lastIndexOf("/")?e.substr(0,e.lastIndexOf("/")+1):"./")+le.movieURL,le.noSWFCache&&(e+="?ts="+(new Date).getTime()),e},k=function(){8!==(h=parseInt(le.flashVersion,10))&&9!==h&&(le.flashVersion=h=8);var e=le.debugMode||le.debugFlash?"_debug.swf":".swf";le.useHTML5Audio&&!le.html5Only&&le.audioFormats.mp4.required&&9>h&&(le.flashVersion=h=9),le.version=le.versionNumber+(le.html5Only?" (HTML5-only mode)":9===h?" (AS3/Flash 9)":" (AS2/Flash 8)"),8<h?(le.defaultOptions=p(le.defaultOptions,le.flash9Options),le.features.buffering=!0,le.defaultOptions=p(le.defaultOptions,le.movieStarOptions),le.filePatterns.flash9=RegExp("\\.(mp3|"+Ge.join("|")+")(\\?.*)?$","i"),le.features.movieStar=!0):le.features.movieStar=!1,le.filePattern=le.filePatterns[8!==h?"flash9":"flash8"],le.movieURL=(8===h?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e),le.features.peakData=le.features.waveformData=le.features.eqData=8<h},A=function(e,t){if(!de)return!1;de._setPolling(e,t)},P=function(){},z=this.getSoundById,L=function(){var e=[];return le.debugMode&&e.push("sm2_debug"),le.debugFlash&&e.push("flash_debug"),le.useHighPerformance&&e.push("high_performance"),e.join(" ")},H=function(){F("fbHandler");var e=le.getMoviePercent(),t={type:"FLASHBLOCK"};if(le.html5Only)return!1;le.ok()?le.oMC&&(le.oMC.className=[L(),"movieContainer","swf_loaded"+(le.didFlashBlock?" swf_unblocked":"")].join(" ")):(De&&(le.oMC.className=L()+" movieContainer "+(null===e?"swf_timedout":"swf_error")),le.didFlashBlock=!0,w({type:"ontimeout",ignoreInit:!0,error:t}),I(t))},m=function(e,s,n){ge[e]===t&&(ge[e]=[]),ge[e].push({method:s,scope:n||null,fired:!1})},w=function(e){if(e||(e={type:le.ok()?"onready":"ontimeout"}),!we&&e&&!e.ignoreInit||"ontimeout"===e.type&&(le.ok()||ve&&!e.ignoreInit))return!1;var t,s={success:e&&e.ignoreInit?le.ok():!ve},n=e&&e.type?ge[e.type]||[]:[],i=[],s=[s],o=De&&!le.ok();for(e.error&&(s[0].error=e.error),e=0,t=n.length;e<t;e++)!0!==n[e].fired&&i.push(n[e]);if(i.length)for(e=0,t=i.length;e<t;e++)i[e].scope?i[e].method.apply(i[e].scope,s):i[e].method.apply(this,s),o||(i[e].fired=!0);return!0},v=function(){e.setTimeout(function(){le.useFlashBlock&&H(),w(),"function"==typeof le.onload&&le.onload.apply(e),le.waitForWindowLoad&&te.add(e,"load",v)},1)},ie=function(){if(ne!==t)return ne;var s,n=!1,i=navigator,o=i.plugins,a=e.ActiveXObject;if(o&&o.length)(i=i.mimeTypes)&&i["application/x-shockwave-flash"]&&i["application/x-shockwave-flash"].enabledPlugin&&i["application/x-shockwave-flash"].enabledPlugin.description&&(n=!0);else if(a!==t&&!he.match(/MSAppHost/i)){try{s=new a("ShockwaveFlash.ShockwaveFlash")}catch(e){s=null}n=!!s}return ne=n},V=function(){var e,t,s=le.audioFormats;if(Ie&&he.match(/os (1|2|3_0|3_1)/i)?(le.hasHTML5=!1,le.html5Only=!0,le.oMC&&(le.oMC.style.display="none")):!le.useHTML5Audio||le.html5&&le.html5.canPlayType||(le.hasHTML5=!1),le.useHTML5Audio&&le.hasHTML5)for(t in G=!0,s)s.hasOwnProperty(t)&&s[t].required&&(le.html5.canPlayType(s[t].type)?le.preferFlash&&(le.flash[t]||le.flash[s[t].type])&&(e=!0):(G=!1,e=!0));return le.ignoreFlash&&(e=!1,G=!0),le.html5Only=le.hasHTML5&&le.useHTML5Audio&&!e,!le.html5Only},$=function(e){var t,s,n=0;if(e instanceof Array){for(t=0,s=e.length;t<s;t++)if(e[t]instanceof Object){if(le.canPlayMIME(e[t].type)){n=t;break}}else if(le.canPlayURL(e[t])){n=t;break}e[n].url&&(e[n]=e[n].url),e=e[n]}return e},W=function(e){e._hasTimer||(e._hasTimer=!0,!He&&le.html5PollingInterval&&(null===_e&&0===Ce&&(_e=setInterval(K,le.html5PollingInterval)),Ce++))},q=function(e){e._hasTimer&&(e._hasTimer=!1,!He&&le.html5PollingInterval&&Ce--)},K=function(){var e;if(null!==_e&&!Ce)return clearInterval(_e),_e=null,!1;for(e=le.soundIDs.length-1;0<=e;e--)le.sounds[le.soundIDs[e]].isHTML5&&le.sounds[le.soundIDs[e]]._hasTimer&&le.sounds[le.soundIDs[e]]._onTimer()},I=function(s){s=s!==t?s:{},"function"==typeof le.onerror&&le.onerror.apply(e,[{type:s.type!==t?s.type:null}]),s.fatal!==t&&s.fatal&&le.disable()},oe=function(){if(!Le||!ie())return!1;var e,t,s=le.audioFormats;for(t in s)if(s.hasOwnProperty(t)&&("mp3"===t||"mp4"===t)&&(le.html5[t]=!1,s[t]&&s[t].related))for(e=s[t].related.length-1;0<=e;e--)le.html5[s[t].related[e]]=!1},this._setSandboxType=function(e){},this._externalInterfaceOK=function(e){if(le.swfLoaded)return!1;le.swfLoaded=!0,Ue=!1,Le&&oe(),setTimeout(d,Pe?100:1)},M=function(e,s){function n(e,t){return'<param name="'+e+'" value="'+t+'" />'}if(fe&&me)return!1;if(le.html5Only)return k(),le.oMC=r(le.movieID),d(),me=fe=!0,!1;var i,o,a,l=s||le.url,c=le.altURL||l,h=E(),u=L(),p=null,p=(p=pe.getElementsByTagName("html")[0])&&p.dir&&p.dir.match(/rtl/i);if(e=e===t?le.id:e,k(),le.url=B(qe?l:c),s=le.url,le.wmode=!le.wmode&&le.useHighPerformance?"transparent":le.wmode,null!==le.wmode&&(he.match(/msie 8/i)||!Pe&&!le.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(Se.push(T.spcWmode),le.wmode=null),h={name:e,id:e,src:s,quality:"high",allowScriptAccess:le.allowScriptAccess,bgcolor:le.bgColor,pluginspage:Ke+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:le.wmode,hasPriority:"true"},le.debugFlash&&(h.FlashVars="debug=1"),le.wmode||delete h.wmode,Pe)l=pe.createElement("div"),o=['<object id="'+e+'" data="'+s+'" type="'+h.type+'" title="'+h.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+Ke+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',n("movie",s),n("AllowScriptAccess",le.allowScriptAccess),n("quality",h.quality),le.wmode?n("wmode",le.wmode):"",n("bgcolor",le.bgColor),n("hasPriority","true"),le.debugFlash?n("FlashVars",h.FlashVars):"","</object>"].join("");else for(i in l=pe.createElement("embed"),h)h.hasOwnProperty(i)&&l.setAttribute(i,h[i]);if(P(),u=L(),h=E())if(le.oMC=r(le.movieID)||pe.createElement("div"),le.oMC.id)a=le.oMC.className,le.oMC.className=(a?a+" ":"movieContainer")+(u?" "+u:""),le.oMC.appendChild(l),Pe&&(i=le.oMC.appendChild(pe.createElement("div")),i.className="sm2-object-box",i.innerHTML=o),me=!0;else{if(le.oMC.id=le.movieID,le.oMC.className="movieContainer "+u,i=u=null,le.useFlashBlock||(le.useHighPerformance?u={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(u={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},p&&(u.left=Math.abs(parseInt(u.left,10))+"px"))),Ne&&(le.oMC.style.zIndex=1e4),!le.debugFlash)for(a in u)u.hasOwnProperty(a)&&(le.oMC.style[a]=u[a]);try{Pe||le.oMC.appendChild(l),h.appendChild(le.oMC),Pe&&(i=le.oMC.appendChild(pe.createElement("div")),i.className="sm2-object-box",i.innerHTML=o),me=!0}catch(e){throw Error(F("domError")+" \n"+e.toString())}}return fe=!0},C=function(){return le.html5Only?(M(),!1):!(de||!le.url)&&((de=le.getMovie(le.id))||(be?(Pe?le.oMC.innerHTML=ke:le.oMC.appendChild(be),be=null,fe=!0):M(le.id,le.url),de=le.getMovie(le.id)),"function"==typeof le.oninitmovie&&setTimeout(le.oninitmovie,1),!0)},y=function(){setTimeout(b,1e3)},b=function(){var t,s=!1;return!(!le.url||xe)&&(xe=!0,te.remove(e,"load",y),!(Ue&&!je)&&(we||0<(t=le.getMoviePercent())&&100>t&&(s=!0),void setTimeout(function(){if(t=le.getMoviePercent(),s)return xe=!1,e.setTimeout(y,1),!1;!we&&ze&&(null===t?le.useFlashBlock||0===le.flashLoadTimeout?le.useFlashBlock&&H():!le.useFlashBlock&&G?e.setTimeout(function(){le.setup({preferFlash:!1}).reboot(),le.didFlashBlock=!0,le.beginDelayedInit()},1):w({type:"ontimeout",ignoreInit:!0}):0!==le.flashLoadTimeout&&R(!0))},le.flashLoadTimeout)))},x=function(){return je||!Ue?(te.remove(e,"focus",x),!0):(je=ze=!0,xe=!1,y(),te.remove(e,"focus",x),!0)},u=function(t){if(we)return!1;if(le.html5Only)return we=!0,v(),!0;var s,n=!0;return le.useFlashBlock&&le.flashLoadTimeout&&!le.getMoviePercent()||(we=!0,ve&&(s={type:!ne&&De?"NO_FLASH":"INIT_TIMEOUT"})),(ve||t)&&(le.useFlashBlock&&le.oMC&&(le.oMC.className=L()+" "+(null===le.getMoviePercent()?"swf_timedout":"swf_error")),w({type:"ontimeout",error:s,ignoreInit:!0}),I(s),n=!1),ve||(le.waitForWindowLoad&&!ye?te.add(e,"load",v):v()),n},c=function(){var e,s=le.setupOptions;for(e in s)s.hasOwnProperty(e)&&(le[e]===t?le[e]=s[e]:le[e]!==s[e]&&(le.setupOptions[e]=le[e]))},d=function(){if(we)return!1;if(le.html5Only)return we||(te.remove(e,"load",le.beginDelayedInit),le.enabled=!0,u()),!0;C();try{de._externalInterfaceTest(!1),A(!0,le.flashPollingInterval||(le.useHighPerformance?10:50)),le.debugMode||de._disableDebug(),le.enabled=!0,le.html5Only||te.add(e,"unload",l)}catch(e){return I({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),R(!0),u(),!1}return u(),te.remove(e,"load",le.beginDelayedInit),!0},S=function(){return!O&&(O=!0,c(),P(),!ne&&le.hasHTML5&&le.setup({useHTML5Audio:!0,preferFlash:!1}),ee(),!ne&&De&&(Se.push(T.needFlash),le.setup({flashLoadTimeout:1})),pe.removeEventListener&&pe.removeEventListener("DOMContentLoaded",S,!1),C(),!0)},Z=function(){return"complete"===pe.readyState&&(S(),pe.detachEvent("onreadystatechange",Z)),!0},D=function(){ye=!0,te.remove(e,"load",D)},(_=function(){He&&(le.setupOptions.useHTML5Audio=!0,le.setupOptions.preferFlash=!1,Ie||Ae&&!he.match(/android\s2\.3/i))&&(Ie&&(le.ignoreFlash=!0),Ee=!0)})(),ie(),te.add(e,"focus",x),te.add(e,"load",y),te.add(e,"load",D),pe.addEventListener?pe.addEventListener("DOMContentLoaded",S,!1):pe.attachEvent?pe.attachEvent("onreadystatechange",Z):I({type:"NO_DOM2_EVENTS",fatal:!0})}var n=null;void 0!==e.SM2_DEFER&&SM2_DEFER||(n=new s),e.SoundManager=s,e.soundManager=n}(window),function(e,t,s){!function(){var n,i,o,a="sw-datepicker",r=!1,l={classes:"",inline:!1,language:"ru",startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"@",toggleSelected:!0,keyboardNav:!0,position:"bottom left",offset:12,view:"days",minView:"days",showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:",",range:!1,todayButton:!1,clearButton:!1,showEvent:"focus",autoClose:!1,monthsField:"monthsShort",prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:"",onShow:"",onHide:"",onChangeMonth:"",onChangeYear:"",onChangeDecade:"",onChangeView:"",onRenderCell:""},c={ctrlRight:[17,39],ctrlUp:[17,38],ctrlLeft:[17,37],ctrlDown:[17,40],shiftRight:[16,39],shiftUp:[16,38],shiftLeft:[16,37],shiftDown:[16,40],altUp:[18,38],altRight:[18,39],altLeft:[18,37],altDown:[18,40],ctrlShiftUp:[16,17,38]},d=function(e,i){this.el=e,this.$el=t(e),this.opts=t.extend(!0,{},l,i,this.$el.data()),n==s&&(n=t("body")),this.opts.startDate||(this.opts.startDate=new Date),"INPUT"==this.el.nodeName&&(this.elIsInput=!0),this.opts.altField&&(this.$altField="string"==typeof this.opts.altField?t(this.opts.altField):this.opts.altField),this.inited=!1,this.visible=!1,this.silent=!1,this.currentDate=this.opts.startDate,this.currentView=this.opts.view,this._createShortCuts(),this.selectedDates=[],this.views={},this.keys=[],this.minRange="",this.maxRange="",this._prevOnSelectValue="",this.init()};(o=d).prototype={VERSION:"2.2.3",viewIndexes:["days","months","years"],init:function(){r||this.opts.inline||!this.elIsInput||this._buildDatepickersContainer(),this._buildBaseHtml(),this._defineLocale(this.opts.language),this._syncWithMinMaxDates(),this.elIsInput&&(this.opts.inline||(this._setPositionClasses(this.opts.position),this._bindEvents()),this.opts.keyboardNav&&!this.opts.onlyTimepicker&&this._bindKeyboardEvents(),this.$datepicker.on("mousedown",this._onMouseDownDatepicker.bind(this)),this.$datepicker.on("mouseup",this._onMouseUpDatepicker.bind(this))),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this.opts.timepicker&&(this.timepicker=new t.fn.datepicker.Timepicker(this,this.opts),this._bindTimepickerEvents()),this.opts.onlyTimepicker&&this.$datepicker.addClass("-only-timepicker-"),this.views[this.currentView]=new t.fn.datepicker.Body(this,this.currentView,this.opts),this.views[this.currentView].show(),this.nav=new t.fn.datepicker.Navigation(this,this.opts),this.view=this.currentView,this.$el.on("clickCell.adp",this._onClickCell.bind(this)),this.$datepicker.on("mouseenter",".sw-datepicker--cell",this._onMouseEnterCell.bind(this)),this.$datepicker.on("mouseleave",".sw-datepicker--cell",this._onMouseLeaveCell.bind(this)),this.inited=!0},_createShortCuts:function(){this.minDate=this.opts.minDate?this.opts.minDate:new Date(-86399999136e5),this.maxDate=this.opts.maxDate?this.opts.maxDate:new Date(86399999136e5)},_bindEvents:function(){this.$el.on(this.opts.showEvent+".adp",this._onShowEvent.bind(this)),this.$el.on("mouseup.adp",this._onMouseUpEl.bind(this)),this.$el.on("blur.adp",this._onBlur.bind(this)),this.$el.on("keyup.adp",this._onKeyUpGeneral.bind(this)),t(e).on("resize.adp",this._onResize.bind(this)),t("body").on("mouseup.adp",this._onMouseUpBody.bind(this))},_bindKeyboardEvents:function(){this.$el.on("keydown.adp",this._onKeyDown.bind(this)),this.$el.on("keyup.adp",this._onKeyUp.bind(this)),this.$el.on("hotKey.adp",this._onHotKey.bind(this))},_bindTimepickerEvents:function(){this.$el.on("timeChange.adp",this._onTimeChange.bind(this))},isWeekend:function(e){return-1!==this.opts.weekends.indexOf(e)},_defineLocale:function(e){"string"==typeof e?(this.loc=t.fn.datepicker.language[e],this.loc||(this.loc=t.extend(!0,{},t.fn.datepicker.language.ru)),this.loc=t.extend(!0,{},t.fn.datepicker.language.ru,t.fn.datepicker.language[e])):this.loc=t.extend(!0,{},t.fn.datepicker.language.ru,e),this.opts.dateFormat&&(this.loc.dateFormat=this.opts.dateFormat),this.opts.timeFormat&&(this.loc.timeFormat=this.opts.timeFormat),""!==this.opts.firstDay&&(this.loc.firstDay=this.opts.firstDay),this.opts.timepicker&&(this.loc.dateFormat=[this.loc.dateFormat,this.loc.timeFormat].join(this.opts.dateTimeSeparator)),this.opts.onlyTimepicker&&(this.loc.dateFormat=this.loc.timeFormat);var s=this._getWordBoundaryRegExp;(this.loc.timeFormat.match(s("aa"))||this.loc.timeFormat.match(s("AA")))&&(this.ampm=!0)},_buildDatepickersContainer:function(){r=!0,n.append('<div class="sw-datepickers-container" id="sw-datepickers-container"></div>'),i=t("#sw-datepickers-container")},_buildBaseHtml:function(){var e,s=t('<div class="sw-datepicker-inline">');e="INPUT"==this.el.nodeName?this.opts.inline?s.insertAfter(this.$el):i:s.appendTo(this.$el),this.$datepicker=t('<div class="sw-datepicker"><i class="sw-datepicker--pointer"></i><nav class="sw-datepicker--nav"></nav><div class="sw-datepicker--content"></div></div>').appendTo(e),this.$content=t(".sw-datepicker--content",this.$datepicker),this.$nav=t(".sw-datepicker--nav",this.$datepicker)},_triggerOnChange:function(){if(!this.selectedDates.length){if(""===this._prevOnSelectValue)return;return this._prevOnSelectValue="",this.opts.onSelect("","",this)}var e,t=this.selectedDates,s=o.getParsedDate(t[0]),n=this,i=new Date(s.year,s.month,s.date,s.hours,s.minutes);e=t.map(function(e){return n.formatDate(n.loc.dateFormat,e)}).join(this.opts.multipleDatesSeparator),(this.opts.multipleDates||this.opts.range)&&(i=t.map(function(e){var t=o.getParsedDate(e);return new Date(t.year,t.month,t.date,t.hours,t.minutes)})),this._prevOnSelectValue=e,this.opts.onSelect(e,i,this)},next:function(){var e=this.parsedDate,t=this.opts;switch(this.view){case"days":this.date=new Date(e.year,e.month+1,1),t.onChangeMonth&&t.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(e.year+1,e.month,1),t.onChangeYear&&t.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(e.year+10,0,1),t.onChangeDecade&&t.onChangeDecade(this.curDecade)}},prev:function(){var e=this.parsedDate,t=this.opts;switch(this.view){case"days":this.date=new Date(e.year,e.month-1,1),t.onChangeMonth&&t.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(e.year-1,e.month,1),t.onChangeYear&&t.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(e.year-10,0,1),t.onChangeDecade&&t.onChangeDecade(this.curDecade)}},formatDate:function(e,t){t=t||this.date;var s,n=e,i=this._getWordBoundaryRegExp,a=this.loc,r=o.getLeadingZeroNum,l=o.getDecade(t),c=o.getParsedDate(t),d=c.fullHours,h=c.hours,u=e.match(i("aa"))||e.match(i("AA")),p="am",g=this._replacer;switch(this.opts.timepicker&&this.timepicker&&u&&(s=this.timepicker._getValidHoursFromDate(t,u),d=r(s.hours),h=s.hours,p=s.dayPeriod),!0){case/@/.test(n):n=n.replace(/@/,t.getTime());case/aa/.test(n):n=g(n,i("aa"),p);case/AA/.test(n):n=g(n,i("AA"),p.toUpperCase());case/dd/.test(n):n=g(n,i("dd"),c.fullDate);case/d/.test(n):n=g(n,i("d"),c.date);case/DD/.test(n):n=g(n,i("DD"),a.days[c.day]);case/D/.test(n):n=g(n,i("D"),a.daysShort[c.day]);case/mm/.test(n):n=g(n,i("mm"),c.fullMonth);case/m/.test(n):n=g(n,i("m"),c.month+1);case/MM/.test(n):n=g(n,i("MM"),this.loc.months[c.month]);case/M/.test(n):n=g(n,i("M"),a.monthsShort[c.month]);case/ii/.test(n):n=g(n,i("ii"),c.fullMinutes);case/i/.test(n):n=g(n,i("i"),c.minutes);case/hh/.test(n):n=g(n,i("hh"),d);case/h/.test(n):n=g(n,i("h"),h);case/yyyy/.test(n):n=g(n,i("yyyy"),c.year);case/yyyy1/.test(n):n=g(n,i("yyyy1"),l[0]);case/yyyy2/.test(n):n=g(n,i("yyyy2"),l[1]);case/yy/.test(n):n=g(n,i("yy"),c.year.toString().slice(-2))}return n},_replacer:function(e,t,s){return e.replace(t,function(e,t,n,i){return t+s+i})},_getWordBoundaryRegExp:function(e){var t="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+t+")("+e+")($|<|"+t+")","g")},selectDate:function(e){var t=this,s=t.opts,n=t.parsedDate,i=t.selectedDates.length,a="";if(Array.isArray(e))e.forEach(function(e){t.selectDate(e)});else if(e instanceof Date){if(this.lastSelectedDate=e,this.timepicker&&this.timepicker._setTime(e),t._trigger("selectDate",e),this.timepicker&&(e.setHours(this.timepicker.hours),e.setMinutes(this.timepicker.minutes)),"days"==t.view&&e.getMonth()!=n.month&&s.moveToOtherMonthsOnSelect&&(a=new Date(e.getFullYear(),e.getMonth(),1)),"years"==t.view&&e.getFullYear()!=n.year&&s.moveToOtherYearsOnSelect&&(a=new Date(e.getFullYear(),0,1)),a&&(t.silent=!0,t.date=a,t.silent=!1,t.nav._render()),s.multipleDates&&!s.range){if(i===s.multipleDates)return;t._isSelected(e)||t.selectedDates.push(e)}else s.range?2==i?(t.selectedDates=[e],t.minRange=e,t.maxRange=""):1==i?(t.selectedDates.push(e),t.maxRange?t.minRange=e:t.maxRange=e,o.bigger(t.maxRange,t.minRange)&&(t.maxRange=t.minRange,t.minRange=e),t.selectedDates=[t.minRange,t.maxRange]):(t.selectedDates=[e],t.minRange=e):t.selectedDates=[e];t._setInputValue(),s.onSelect&&t._triggerOnChange(),s.autoClose&&!this.timepickerIsActive&&(s.multipleDates||s.range?s.range&&2==t.selectedDates.length&&t.hide():t.hide()),t.views[this.currentView]._render()}},removeDate:function(e){var t=this.selectedDates,s=this;if(e instanceof Date)return t.some(function(n,i){if(o.isSame(n,e))return t.splice(i,1),s.selectedDates.length?s.lastSelectedDate=s.selectedDates[s.selectedDates.length-1]:(s.minRange="",s.maxRange="",s.lastSelectedDate=""),s.views[s.currentView]._render(),s._setInputValue(),s.opts.onSelect&&s._triggerOnChange(),!0})},today:function(){this.silent=!0,this.view=this.opts.minView,this.silent=!1,this.date=new Date,this.opts.todayButton instanceof Date&&this.selectDate(this.opts.todayButton)},clear:function(){this.selectedDates=[],this.minRange="",this.maxRange="",this.views[this.currentView]._render(),this._setInputValue(),this.opts.onSelect&&this._triggerOnChange()},update:function(e,s){var n=arguments.length,i=this.lastSelectedDate;return 2==n?this.opts[e]=s:1==n&&"object"==typeof e&&(this.opts=t.extend(!0,this.opts,e)),this._createShortCuts(),this._syncWithMinMaxDates(),this._defineLocale(this.opts.language),this.nav._addButtonsIfNeed(),this.opts.onlyTimepicker||this.nav._render(),this.views[this.currentView]._render(),this.elIsInput&&!this.opts.inline&&(this._setPositionClasses(this.opts.position),this.visible&&this.setPosition(this.opts.position)),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this.opts.onlyTimepicker&&this.$datepicker.addClass("-only-timepicker-"),this.opts.timepicker&&(i&&this.timepicker._handleDate(i),this.timepicker._updateRanges(),this.timepicker._updateCurrentTime(),i&&(i.setHours(this.timepicker.hours),i.setMinutes(this.timepicker.minutes))),this._setInputValue(),this},_syncWithMinMaxDates:function(){var e=this.date.getTime();this.silent=!0,this.minTime>e&&(this.date=this.minDate),this.maxTime<e&&(this.date=this.maxDate),this.silent=!1},_isSelected:function(e,t){var s=!1;return this.selectedDates.some(function(n){if(o.isSame(n,e,t))return s=n,!0}),s},_setInputValue:function(){var e,t=this,s=t.opts,n=t.loc.dateFormat,i=s.altFieldDateFormat,o=t.selectedDates.map(function(e){return t.formatDate(n,e)});s.altField&&t.$altField.length&&(e=this.selectedDates.map(function(e){return t.formatDate(i,e)}),e=e.join(this.opts.multipleDatesSeparator),this.$altField.val(e)),o=o.join(this.opts.multipleDatesSeparator),this.$el.val(o)},_isInRange:function(e,t){var s=e.getTime(),n=o.getParsedDate(e),i=o.getParsedDate(this.minDate),a=o.getParsedDate(this.maxDate),r=new Date(n.year,n.month,i.date).getTime(),l=new Date(n.year,n.month,a.date).getTime(),c={day:s>=this.minTime&&s<=this.maxTime,month:r>=this.minTime&&l<=this.maxTime,year:n.year>=i.year&&n.year<=a.year};return t?c[t]:c.day},_getDimensions:function(e){var t=e.offset();return{width:e.outerWidth(),height:e.outerHeight(),left:t.left,top:t.top}},_getDateFromCell:function(e){var t=this.parsedDate,n=e.data("year")||t.year,i=e.data("month")==s?t.month:e.data("month"),o=e.data("date")||1;return new Date(n,i,o)},_setPositionClasses:function(e){var t=(e=e.split(" "))[0],s="sw-datepicker -"+t+"-"+e[1]+"- -from-"+t+"-";this.visible&&(s+=" active"),this.$datepicker.removeAttr("class").addClass(s)},setPosition:function(e){e=e||this.opts.position;var t,s,n=this._getDimensions(this.$el),i=this._getDimensions(this.$datepicker),o=e.split(" "),a=this.opts.offset,r=o[0],l=o[1];switch(r){case"top":t=n.top-i.height-a;break;case"right":s=n.left+n.width+a;break;case"bottom":t=n.top+n.height+a;break;case"left":s=n.left-i.width-a}switch(l){case"top":t=n.top;break;case"right":s=n.left+n.width-i.width;break;case"bottom":t=n.top+n.height-i.height;break;case"left":s=n.left;break;case"center":/left|right/.test(r)?t=n.top+n.height/2-i.height/2:s=n.left+n.width/2-i.width/2}this.$datepicker.css({left:s,top:t})},show:function(){var e=this.opts.onShow;this.setPosition(this.opts.position),this.$datepicker.addClass("active"),this.visible=!0,e&&this._bindVisionEvents(e)},hide:function(){var e=this.opts.onHide;this.$datepicker.removeClass("active").css({left:"-100000px"}),this.focused="",this.keys=[],this.inFocus=!1,this.visible=!1,this.$el.blur(),e&&this._bindVisionEvents(e)},down:function(e){this._changeView(e,"down")},up:function(e){this._changeView(e,"up")},_bindVisionEvents:function(e){this.$datepicker.off("transitionend.dp"),e(this,!1),this.$datepicker.one("transitionend.dp",e.bind(this,this,!0))},_changeView:function(e,t){e=e||this.focused||this.date;var s="up"==t?this.viewIndex+1:this.viewIndex-1;s>2&&(s=2),s<0&&(s=0),this.silent=!0,this.date=new Date(e.getFullYear(),e.getMonth(),1),this.silent=!1,this.view=this.viewIndexes[s]},_handleHotKey:function(e){var t,s,n,i=o.getParsedDate(this._getFocusedDate()),a=this.opts,r=!1,l=!1,c=!1,d=i.year,h=i.month,u=i.date;switch(e){case"ctrlRight":case"ctrlUp":h+=1,r=!0;break;case"ctrlLeft":case"ctrlDown":h-=1,r=!0;break;case"shiftRight":case"shiftUp":l=!0,d+=1;break;case"shiftLeft":case"shiftDown":l=!0,d-=1;break;case"altRight":case"altUp":c=!0,d+=10;break;case"altLeft":case"altDown":c=!0,d-=10;break;case"ctrlShiftUp":this.up()}n=o.getDaysCount(new Date(d,h)),s=new Date(d,h,u),n<u&&(u=n),s.getTime()<this.minTime?s=this.minDate:s.getTime()>this.maxTime&&(s=this.maxDate),this.focused=s,t=o.getParsedDate(s),r&&a.onChangeMonth&&a.onChangeMonth(t.month,t.year),l&&a.onChangeYear&&a.onChangeYear(t.year),c&&a.onChangeDecade&&a.onChangeDecade(this.curDecade)},_registerKey:function(e){this.keys.some(function(t){return t==e})||this.keys.push(e)},_unRegisterKey:function(e){var t=this.keys.indexOf(e);this.keys.splice(t,1)},_isHotKeyPressed:function(){var e,t=!1,s=this,n=this.keys.sort();for(var i in c)e=c[i],n.length==e.length&&e.every(function(e,t){return e==n[t]})&&(s._trigger("hotKey",i),t=!0);return t},_trigger:function(e,t){this.$el.trigger(e,t)},_focusNextCell:function(e,t){t=t||this.cellType;var s=o.getParsedDate(this._getFocusedDate()),n=s.year,i=s.month,a=s.date;if(!this._isHotKeyPressed()){switch(e){case 37:"day"==t&&(a-=1),"month"==t&&(i-=1),"year"==t&&(n-=1);break;case 38:"day"==t&&(a-=7),"month"==t&&(i-=3),"year"==t&&(n-=4);break;case 39:"day"==t&&(a+=1),"month"==t&&(i+=1),"year"==t&&(n+=1);break;case 40:"day"==t&&(a+=7),"month"==t&&(i+=3),"year"==t&&(n+=4)}var r=new Date(n,i,a);r.getTime()<this.minTime?r=this.minDate:r.getTime()>this.maxTime&&(r=this.maxDate),this.focused=r}},_getFocusedDate:function(){var e=this.focused||this.selectedDates[this.selectedDates.length-1],t=this.parsedDate;if(!e)switch(this.view){case"days":e=new Date(t.year,t.month,(new Date).getDate());break;case"months":e=new Date(t.year,t.month,1);break;case"years":e=new Date(t.year,0,1)}return e},_getCell:function(e,s){s=s||this.cellType;var n,i=o.getParsedDate(e),a='.sw-datepicker--cell[data-year="'+i.year+'"]';switch(s){case"month":a='[data-month="'+i.month+'"]';break;case"day":a+='[data-month="'+i.month+'"][data-date="'+i.date+'"]'}return(n=this.views[this.currentView].$el.find(a)).length?n:t("")},destroy:function(){var e=this;e.$el.off(".adp").data("sw-datepicker",""),e.selectedDates=[],e.focused="",e.views={},e.keys=[],e.minRange="",e.maxRange="",e.opts.inline||!e.elIsInput?e.$datepicker.closest(".sw-datepicker-inline").remove():e.$datepicker.remove()},_handleAlreadySelectedDates:function(e,t){this.opts.range?this.opts.toggleSelected?this.removeDate(t):2!=this.selectedDates.length&&this._trigger("clickCell",t):this.opts.toggleSelected&&this.removeDate(t),this.opts.toggleSelected||(this.lastSelectedDate=e,this.opts.timepicker&&(this.timepicker._setTime(e),this.timepicker.update()))},_onShowEvent:function(e){this.visible||this.show()},_onBlur:function(){!this.inFocus&&this.visible&&this.hide()},_onMouseDownDatepicker:function(e){this.inFocus=!0},_onMouseUpDatepicker:function(e){this.inFocus=!1,e.originalEvent.inFocus=!0,e.originalEvent.timepickerFocus||this.$el.focus()},_onKeyUpGeneral:function(e){this.$el.val()||this.clear()},_onResize:function(){this.visible&&this.setPosition()},_onMouseUpBody:function(e){e.originalEvent.inFocus||this.visible&&!this.inFocus&&this.hide()},_onMouseUpEl:function(e){e.originalEvent.inFocus=!0,setTimeout(this._onKeyUpGeneral.bind(this),4)},_onKeyDown:function(e){var t=e.which;if(this._registerKey(t),t>=37&&t<=40&&(e.preventDefault(),this._focusNextCell(t)),13==t&&this.focused){if(this._getCell(this.focused).hasClass("-disabled-"))return;if(this.view!=this.opts.minView)this.down();else{var s=this._isSelected(this.focused,this.cellType);if(!s)return this.timepicker&&(this.focused.setHours(this.timepicker.hours),this.focused.setMinutes(this.timepicker.minutes)),void this.selectDate(this.focused);this._handleAlreadySelectedDates(s,this.focused)}}27==t&&this.hide()},_onKeyUp:function(e){var t=e.which;this._unRegisterKey(t)},_onHotKey:function(e,t){this._handleHotKey(t)},_onMouseEnterCell:function(e){var s=t(e.target).closest(".sw-datepicker--cell"),n=this._getDateFromCell(s);this.silent=!0,this.focused&&(this.focused=""),s.addClass("-focus-"),this.focused=n,this.silent=!1,this.opts.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",o.less(this.minRange,this.focused)&&(this.maxRange=this.minRange,this.minRange=""),this.views[this.currentView]._update())},_onMouseLeaveCell:function(e){t(e.target).closest(".sw-datepicker--cell").removeClass("-focus-"),this.silent=!0,this.focused="",this.silent=!1},_onTimeChange:function(e,t,s){var n=new Date,i=!1;this.selectedDates.length&&(i=!0,n=this.lastSelectedDate),n.setHours(t),n.setMinutes(s),i||this._getCell(n).hasClass("-disabled-")?(this._setInputValue(),this.opts.onSelect&&this._triggerOnChange()):this.selectDate(n)},_onClickCell:function(e,t){this.timepicker&&(t.setHours(this.timepicker.hours),t.setMinutes(this.timepicker.minutes)),this.selectDate(t)},set focused(e){if(!e&&this.focused){var t=this._getCell(this.focused);t.length&&t.removeClass("-focus-")}this._focused=e,this.opts.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",o.less(this.minRange,this._focused)&&(this.maxRange=this.minRange,this.minRange="")),this.silent||(this.date=e)},get focused(){return this._focused},get parsedDate(){return o.getParsedDate(this.date)},set date(e){if(e instanceof Date)return this.currentDate=e,this.inited&&!this.silent&&(this.views[this.view]._render(),this.nav._render(),this.visible&&this.elIsInput&&this.setPosition()),e},get date(){return this.currentDate},set view(e){if(this.viewIndex=this.viewIndexes.indexOf(e),!(this.viewIndex<0))return this.prevView=this.currentView,this.currentView=e,this.inited&&(this.views[e]?this.views[e]._render():this.views[e]=new t.fn.datepicker.Body(this,e,this.opts),this.views[this.prevView].hide(),this.views[e].show(),this.nav._render(),this.opts.onChangeView&&this.opts.onChangeView(e),this.elIsInput&&this.visible&&this.setPosition()),e},get view(){return this.currentView},get cellType(){return this.view.substring(0,this.view.length-1)},get minTime(){var e=o.getParsedDate(this.minDate);return new Date(e.year,e.month,e.date).getTime()},get maxTime(){var e=o.getParsedDate(this.maxDate);return new Date(e.year,e.month,e.date).getTime()},get curDecade(){return o.getDecade(this.date)}},o.getDaysCount=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},o.getParsedDate=function(e){return{year:e.getFullYear(),month:e.getMonth(),fullMonth:e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,date:e.getDate(),fullDate:e.getDate()<10?"0"+e.getDate():e.getDate(),day:e.getDay(),hours:e.getHours(),fullHours:e.getHours()<10?"0"+e.getHours():e.getHours(),minutes:e.getMinutes(),fullMinutes:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes()}},o.getDecade=function(e){var t=10*Math.floor(e.getFullYear()/10);return[t,t+9]},o.template=function(e,t){return e.replace(/#\{([\w]+)\}/g,function(e,s){if(t[s]||0===t[s])return t[s]})},o.isSame=function(e,t,s){if(!e||!t)return!1;var n=o.getParsedDate(e),i=o.getParsedDate(t),a=s||"day";return{day:n.date==i.date&&n.month==i.month&&n.year==i.year,month:n.month==i.month&&n.year==i.year,year:n.year==i.year}[a]},o.less=function(e,t,s){return!(!e||!t)&&t.getTime()<e.getTime()},o.bigger=function(e,t,s){return!(!e||!t)&&t.getTime()>e.getTime()},o.getLeadingZeroNum=function(e){return parseInt(e)<10?"0"+e:e},o.resetTime=function(e){if("object"==typeof e)return e=o.getParsedDate(e),new Date(e.year,e.month,e.date)},t.fn.datepicker=function(e){return this.each(function(){if(t.data(this,a)){var s=t.data(this,a);s.opts=t.extend(!0,s.opts,e),s.update()}else t.data(this,a,new d(this,e))})},t.fn.datepicker.Constructor=d,t.fn.datepicker.language={ru:{days:["","","","","","",""],daysShort:["","","","","","",""],daysMin:["","","","","","",""],months:["","","","","","","","","","","",""],monthsShort:["","","","","","","","","","","",""],today:"",clear:"",dateFormat:"dd.mm.yyyy",timeFormat:"hh:ii",firstDay:1}},t(function(){t(".sw-datepicker-here").datepicker()})}(),function(){var e={days:'<div class="sw-datepicker--days sw-datepicker--body"><div class="sw-datepicker--days-names"></div><div class="sw-datepicker--cells sw-datepicker--cells-days"></div></div>',months:'<div class="sw-datepicker--months sw-datepicker--body"><div class="sw-datepicker--cells sw-datepicker--cells-months"></div></div>',years:'<div class="sw-datepicker--years sw-datepicker--body"><div class="sw-datepicker--cells sw-datepicker--cells-years"></div></div>'},n=t.fn.datepicker,i=n.Constructor;n.Body=function(e,s,n){this.d=e,this.type=s,this.opts=n,this.$el=t(""),this.opts.onlyTimepicker||this.init()},n.Body.prototype={init:function(){this._buildBaseHtml(),this._render(),this._bindEvents()},_bindEvents:function(){this.$el.on("click",".sw-datepicker--cell",t.proxy(this._onClickCell,this))},_buildBaseHtml:function(){this.$el=t(e[this.type]).appendTo(this.d.$content),this.$names=t(".sw-datepicker--days-names",this.$el),this.$cells=t(".sw-datepicker--cells",this.$el)},_getDayNamesHtml:function(e,t,n,i){return t=t!=s?t:e,n=n||"",(i=i!=s?i:0)>7?n:7==t?this._getDayNamesHtml(e,0,n,++i):(n+='<div class="sw-datepicker--day-name'+(this.d.isWeekend(t)?" -weekend-":"")+'">'+this.d.loc.daysMin[t]+"</div>",this._getDayNamesHtml(e,++t,n,++i))},_getCellContents:function(e,t){var s="sw-datepicker--cell sw-datepicker--cell-"+t,n=new Date,o=this.d,a=i.resetTime(o.minRange),r=i.resetTime(o.maxRange),l=o.opts,c=i.getParsedDate(e),d={},h=c.date;switch(t){case"day":o.isWeekend(c.day)&&(s+=" -weekend-"),c.month!=this.d.parsedDate.month&&(s+=" -other-month-",l.selectOtherMonths||(s+=" -disabled-"),l.showOtherMonths||(h=""));break;case"month":h=o.loc[o.opts.monthsField][c.month];break;case"year":var u=o.curDecade;h=c.year,(c.year<u[0]||c.year>u[1])&&(s+=" -other-decade-",l.selectOtherYears||(s+=" -disabled-"),l.showOtherYears||(h=""))}return l.onRenderCell&&(d=l.onRenderCell(e,t)||{},h=d.html?d.html:h,s+=d.classes?" "+d.classes:""),l.range&&(i.isSame(a,e,t)&&(s+=" -range-from-"),i.isSame(r,e,t)&&(s+=" -range-to-"),1==o.selectedDates.length&&o.focused?((i.bigger(a,e)&&i.less(o.focused,e)||i.less(r,e)&&i.bigger(o.focused,e))&&(s+=" -in-range-"),i.less(r,e)&&i.isSame(o.focused,e)&&(s+=" -range-from-"),i.bigger(a,e)&&i.isSame(o.focused,e)&&(s+=" -range-to-")):2==o.selectedDates.length&&i.bigger(a,e)&&i.less(r,e)&&(s+=" -in-range-")),i.isSame(n,e,t)&&(s+=" -current-"),o.focused&&i.isSame(e,o.focused,t)&&(s+=" -focus-"),o._isSelected(e,t)&&(s+=" -selected-"),o._isInRange(e,t)&&!d.disabled||(s+=" -disabled-"),{html:h,classes:s}},_getDaysHtml:function(e){for(var t,s,n=i.getDaysCount(e),o=new Date(e.getFullYear(),e.getMonth(),1).getDay(),a=new Date(e.getFullYear(),e.getMonth(),n).getDay(),r=o-this.d.loc.firstDay,l=6-a+this.d.loc.firstDay,c="",d=1-(r=r<0?r+7:r),h=n+(l=l>6?l-7:l);d<=h;d++)s=e.getFullYear(),t=e.getMonth(),c+=this._getDayHtml(new Date(s,t,d));return c},_getDayHtml:function(e){var t=this._getCellContents(e,"day");return'<div class="'+t.classes+'" data-date="'+e.getDate()+'" data-month="'+e.getMonth()+'" data-year="'+e.getFullYear()+'">'+t.html+"</div>"},_getMonthsHtml:function(e){for(var t="",s=i.getParsedDate(e),n=0;n<12;)t+=this._getMonthHtml(new Date(s.year,n)),n++;return t},_getMonthHtml:function(e){var t=this._getCellContents(e,"month");return'<div class="'+t.classes+'" data-month="'+e.getMonth()+'">'+t.html+"</div>"},_getYearsHtml:function(e){var t=(i.getParsedDate(e),i.getDecade(e)),s="",n=t[0]-1;for(n;n<=t[1]+1;n++)s+=this._getYearHtml(new Date(n,0));return s},_getYearHtml:function(e){var t=this._getCellContents(e,"year");return'<div class="'+t.classes+'" data-year="'+e.getFullYear()+'">'+t.html+"</div>"},_renderTypes:{days:function(){var e=this._getDayNamesHtml(this.d.loc.firstDay),t=this._getDaysHtml(this.d.currentDate);this.$cells.html(t),this.$names.html(e)},months:function(){var e=this._getMonthsHtml(this.d.currentDate);this.$cells.html(e)},years:function(){var e=this._getYearsHtml(this.d.currentDate);this.$cells.html(e)}},_render:function(){this.opts.onlyTimepicker||this._renderTypes[this.type].bind(this)()},_update:function(){var e,s,n,i=this;t(".sw-datepicker--cell",this.$cells).each(function(o,a){s=t(this),n=i.d._getDateFromCell(t(this)),e=i._getCellContents(n,i.d.cellType),s.attr("class",e.classes)})},show:function(){this.opts.onlyTimepicker||(this.$el.addClass("active"),this.acitve=!0)},hide:function(){this.$el.removeClass("active"),this.active=!1},_handleClick:function(e){var t=e.data("date")||1,s=e.data("month")||0,n=e.data("year")||this.d.parsedDate.year,i=this.d;{if(i.view==this.opts.minView){var o=new Date(n,s,t),a=this.d._isSelected(o,this.d.cellType);return a?void i._handleAlreadySelectedDates.bind(i,a,o)():void i._trigger("clickCell",o)}i.down(new Date(n,s,t))}},_onClickCell:function(e){var s=t(e.target).closest(".sw-datepicker--cell");s.hasClass("-disabled-")||this._handleClick.bind(this)(s)}}}(),function(){var e=t.fn.datepicker,s=e.Constructor;e.Navigation=function(e,t){this.d=e,this.opts=t,this.$buttonsContainer="",this.init()},e.Navigation.prototype={init:function(){this._buildBaseHtml(),this._bindEvents()},_bindEvents:function(){this.d.$nav.on("click",".sw-datepicker--nav-action",t.proxy(this._onClickNavButton,this)),this.d.$nav.on("click",".sw-datepicker--nav-title",t.proxy(this._onClickNavTitle,this)),this.d.$datepicker.on("click",".sw-datepicker--button",t.proxy(this._onClickNavButton,this))},_buildBaseHtml:function(){this.opts.onlyTimepicker||this._render(),this._addButtonsIfNeed()},_addButtonsIfNeed:function(){this.opts.todayButton&&this._addButton("today"),this.opts.clearButton&&this._addButton("clear")},_render:function(){var e=this._getTitle(this.d.currentDate),n=s.template('<div class="sw-datepicker--nav-action" data-action="prev">#{prevHtml}</div><div class="sw-datepicker--nav-title">#{title}</div><div class="sw-datepicker--nav-action" data-action="next">#{nextHtml}</div>',t.extend({title:e},this.opts));this.d.$nav.html(n),"years"==this.d.view&&t(".sw-datepicker--nav-title",this.d.$nav).addClass("-disabled-"),this.setNavStatus()},_getTitle:function(e){return this.d.formatDate(this.opts.navTitles[this.d.view],e)},_addButton:function(e){this.$buttonsContainer.length||this._addButtonsContainer();var n={action:e,label:this.d.loc[e]},i=s.template('<span class="sw-datepicker--button" data-action="#{action}">#{label}</span>',n);t("[data-action="+e+"]",this.$buttonsContainer).length||this.$buttonsContainer.append(i)},_addButtonsContainer:function(){this.d.$datepicker.append('<div class="sw-datepicker--buttons"></div>'),this.$buttonsContainer=t(".sw-datepicker--buttons",this.d.$datepicker)},setNavStatus:function(){if((this.opts.minDate||this.opts.maxDate)&&this.opts.disableNavWhenOutOfRange){var e=this.d.parsedDate,t=e.month,n=e.year,i=e.date;switch(this.d.view){case"days":this.d._isInRange(new Date(n,t-1,1),"month")||this._disableNav("prev"),this.d._isInRange(new Date(n,t+1,1),"month")||this._disableNav("next");break;case"months":this.d._isInRange(new Date(n-1,t,i),"year")||this._disableNav("prev"),this.d._isInRange(new Date(n+1,t,i),"year")||this._disableNav("next");break;case"years":var o=s.getDecade(this.d.date);this.d._isInRange(new Date(o[0]-1,0,1),"year")||this._disableNav("prev"),this.d._isInRange(new Date(o[1]+1,0,1),"year")||this._disableNav("next")}}},_disableNav:function(e){t('[data-action="'+e+'"]',this.d.$nav).addClass("-disabled-")},_activateNav:function(e){t('[data-action="'+e+'"]',this.d.$nav).removeClass("-disabled-")},_onClickNavButton:function(e){var s=t(e.target).closest("[data-action]").data("action");this.d[s]()},_onClickNavTitle:function(e){if(!t(e.target).hasClass("-disabled-"))return"days"==this.d.view?this.d.view="months":void(this.d.view="years")}}}(),function(){var e=t.fn.datepicker,s=e.Constructor;e.Timepicker=function(e,t){this.d=e,this.opts=t,this.init()},e.Timepicker.prototype={init:function(){var e="input";this._setTime(this.d.date),this._buildHTML(),navigator.userAgent.match(/trident/gi)&&(e="change"),this.d.$el.on("selectDate",this._onSelectDate.bind(this)),this.$ranges.on(e,this._onChangeRange.bind(this)),this.$ranges.on("mouseup",this._onMouseUpRange.bind(this)),this.$ranges.on("mousemove focus ",this._onMouseEnterRange.bind(this)),this.$ranges.on("mouseout blur",this._onMouseOutRange.bind(this))},_setTime:function(e){var t=s.getParsedDate(e);this._handleDate(e),this.hours=t.hours<this.minHours?this.minHours:t.hours,this.minutes=t.minutes<this.minMinutes?this.minMinutes:t.minutes},_setMinTimeFromDate:function(e){this.minHours=e.getHours(),this.minMinutes=e.getMinutes(),this.d.lastSelectedDate&&this.d.lastSelectedDate.getHours()>e.getHours()&&(this.minMinutes=this.opts.minMinutes)},_setMaxTimeFromDate:function(e){this.maxHours=e.getHours(),this.maxMinutes=e.getMinutes(),this.d.lastSelectedDate&&this.d.lastSelectedDate.getHours()<e.getHours()&&(this.maxMinutes=this.opts.maxMinutes)},_setDefaultMinMaxTime:function(){var e=this.opts;this.minHours=e.minHours<0||e.minHours>23?0:e.minHours,this.minMinutes=e.minMinutes<0||e.minMinutes>59?0:e.minMinutes,this.maxHours=e.maxHours<0||e.maxHours>23?23:e.maxHours,this.maxMinutes=e.maxMinutes<0||e.maxMinutes>59?59:e.maxMinutes},_validateHoursMinutes:function(e){this.hours<this.minHours?this.hours=this.minHours:this.hours>this.maxHours&&(this.hours=this.maxHours),this.minutes<this.minMinutes?this.minutes=this.minMinutes:this.minutes>this.maxMinutes&&(this.minutes=this.maxMinutes)},_buildHTML:function(){var e=s.getLeadingZeroNum,n={hourMin:this.minHours,hourMax:e(this.maxHours),hourStep:this.opts.hoursStep,hourValue:this.hours,hourVisible:e(this.displayHours),minMin:this.minMinutes,minMax:e(this.maxMinutes),minStep:this.opts.minutesStep,minValue:e(this.minutes)},i=s.template('<div class="sw-datepicker--time"><div class="sw-datepicker--time-current">   <span class="sw-datepicker--time-current-hours">#{hourVisible}</span>   <span class="sw-datepicker--time-current-colon">:</span>   <span class="sw-datepicker--time-current-minutes">#{minValue}</span></div><div class="sw-datepicker--time-sliders">   <div class="sw-datepicker--time-row">      <input type="range" name="hours" value="#{hourValue}" min="#{hourMin}" max="#{hourMax}" step="#{hourStep}"/>   </div>   <div class="sw-datepicker--time-row">      <input type="range" name="minutes" value="#{minValue}" min="#{minMin}" max="#{minMax}" step="#{minStep}"/>   </div></div></div>',n);this.$timepicker=t(i).appendTo(this.d.$datepicker),this.$ranges=t('[type="range"]',this.$timepicker),this.$hours=t('[name="hours"]',this.$timepicker),this.$minutes=t('[name="minutes"]',this.$timepicker),this.$hoursText=t(".sw-datepicker--time-current-hours",this.$timepicker),this.$minutesText=t(".sw-datepicker--time-current-minutes",this.$timepicker),this.d.ampm&&(this.$ampm=t('<span class="sw-datepicker--time-current-ampm">').appendTo(t(".sw-datepicker--time-current",this.$timepicker)).html(this.dayPeriod),this.$timepicker.addClass("-am-pm-"))},_updateCurrentTime:function(){var e=s.getLeadingZeroNum(this.displayHours),t=s.getLeadingZeroNum(this.minutes);this.$hoursText.html(e),this.$minutesText.html(t),this.d.ampm&&this.$ampm.html(this.dayPeriod)},_updateRanges:function(){this.$hours.attr({min:this.minHours,max:this.maxHours}).val(this.hours),this.$minutes.attr({min:this.minMinutes,max:this.maxMinutes}).val(this.minutes)},_handleDate:function(e){this._setDefaultMinMaxTime(),e&&(s.isSame(e,this.d.opts.minDate)?this._setMinTimeFromDate(this.d.opts.minDate):s.isSame(e,this.d.opts.maxDate)&&this._setMaxTimeFromDate(this.d.opts.maxDate)),this._validateHoursMinutes(e)},update:function(){this._updateRanges(),this._updateCurrentTime()},_getValidHoursFromDate:function(e,t){var n=e,i=e;e instanceof Date&&(n=s.getParsedDate(e),i=n.hours);var o="am";if(t||this.d.ampm)switch(!0){case 0==i:i=12;break;case 12==i:o="pm";break;case i>11:i-=12,o="pm"}return{hours:i,dayPeriod:o}},set hours(e){this._hours=e;var t=this._getValidHoursFromDate(e);this.displayHours=t.hours,this.dayPeriod=t.dayPeriod},get hours(){return this._hours},_onChangeRange:function(e){var s=t(e.target),n=s.attr("name");this.d.timepickerIsActive=!0,this[n]=s.val(),this._updateCurrentTime(),this.d._trigger("timeChange",[this.hours,this.minutes]),this._handleDate(this.d.lastSelectedDate),this.update()},_onSelectDate:function(e,t){this._handleDate(t),this.update()},_onMouseEnterRange:function(e){var s=t(e.target).attr("name");t(".sw-datepicker--time-current-"+s,this.$timepicker).addClass("-focus-")},_onMouseOutRange:function(e){var s=t(e.target).attr("name");this.d.inFocus||t(".sw-datepicker--time-current-"+s,this.$timepicker).removeClass("-focus-")},_onMouseUpRange:function(e){this.d.timepickerIsActive=!1}}}()}(window,swQ),function(e){function t(e){return JSON.stringify?JSON.stringify(e):JSON.encode?JSON.encode(e):e.toString()}e.ajaxSetup({async:!0}),e.fn.SW=function(e){if("object"!=typeof e&&e){if("string"==typeof e)return}else if(e.hasOwnProperty("swKey")&&e.hasOwnProperty("swDomainKey")){if("object"==typeof window.swQ.fn.SWD)return;return window.swQ.fn.SWD=new s(e),window.swQ.fn.SWD}return this};var s=function(t){this.setLanguages(),this.setConsts(),this.setSettings(),this.setStrings(),this.setSounds(),e.extend(t,{sessionId:this.getCookie(this.strings.sessionId)||!1,opened:this.getCookie(this.strings.opened),clientName:this.getCookie(this.strings.clientName)||this.settings.clientName,superVisorMode:"true"==this.getCookie(this.strings.isConnection),rating:!0,cursorPosition:{x:0,y:0}}),e.extend(this.settings,t),this.client_server_offset=0,this.initTimeouts(),this.initIntervals(),this.init(),this.Storage=new i,this.page_ident=this.pageIdentGen()};s.prototype.runTrigger=function(e){var t=this,s=Array.prototype.slice.call(arguments,1);this.settings.appEvents.hasOwnProperty(e)&&"function"==typeof this.settings.appEvents[e]&&setTimeout(function(){t.settings.appEvents[e].apply(t,s)},1)},s.prototype.recallInitExitTimer=function(e){var t=this;this.setTimeout("RecallExitTimer",function(){t.recallInitExitEvents.call(t)},e)},s.prototype.recallRemoveExitEvents=function(){e("body").off("mouseleave.streamwood"),this.productSetShowTime("recall_exit"),this.recallInitExitTimer(this.productTimeToShow("recall_exit"))},s.prototype.recallInitExitEvents=function(){var t=this;this.recallIsEnabled()&&e("body").on("mouseleave.streamwood",function(s){if(s.pageY-e(document).scrollTop()<=10&&!t.settings.recallOpened){t.settings.generatorOpened&&t.hideGenerator.call(t),t.settings.registratorOpened&&t.hideRegistrator.call(t),t.settings.recallSource="leaving",t.showRecall.call(t),t.recallRemoveExitEvents.call(t);var n=e(".stream-wood-recall-3");if(n.hasClass("stream-wood-recall-center")){var i=t.settings.cursorPosition.x-n.width()/2;i<0&&(i=0),i+n.width()>window.innerWidth&&(i=window.innerWidth-n.width()-60),n.css("left",i+"px"),n.css("top",e(document).scrollTop()),n.css("margin-left","0")}}})},s.prototype.initEvents=function(){var t=this;this.recallIsEnabled()&&this.settings.design.client_exit_show&&this.recallInitExitTimer(this.productTimeToShow("recall_exit")),e("body").click(function(e){t.settings.recallOpened&&void 0!==e.originalEvent&&void 0!==e.screenX&&void 0!==e.screenY&&0!=e.screenX&&0!=e.screenY&&(t.hideRecall.call(t),t.showBtn.call(t))}),e(document).on("mousemove.streamwood",function(e){t.settings.cursorPosition={x:e.pageX,y:e.pageY}}).on("click.streamwood",function(e){t.settings.superVisorMode&&t.IOemit.apply(t,["swSupervisorCommandToOperator",{action:"sendClickPosition",x:e.pageX,y:e.pageY}])}).on("scroll.streamwood",function(){var s,n=e(".stream-wood-generator").height(),i=e(".stream-wood-recall-3");if(window.innerHeight>n&&t.settings.generatorOpened){var o=e(".stream-wood-generator:visible,.stream-wood-generator-2:visible");0!==o.length&&t.setElementTop(o)}var a=i.height();window.innerHeight>a&&i.hasClass("stream-wood-recall-center")&&t.settings.recallOpened&&((s=window.innerHeight/2-a/2+e(document).scrollTop())<0&&(s=0),i.css("top",s+"px"));var r=e(".stream-wood-zalike-window-head").height(),l=e(".stream-wood-zalike-window").height(),c=l-r,d=e(window).scrollTop(),h=e(document).height(),u=e(window).height();d==h-u?t.settings.zalikeAnimating||parseInt(e(".stream-wood-zalike-window").css("bottom"))==-l||(t.settings.zalikeAnimating=!0,e(".stream-wood-zalike-window").animate({bottom:-l},500,function(){t.settings.zalikeAnimating=!1})):0<h-u-d&&(t.settings.zalikeAnimating||parseInt(e(".stream-wood-zalike-window").css("bottom"))==-c||(t.settings.zalikeAnimating=!0,e(".stream-wood-zalike-window").animate({bottom:-c},500,function(){t.settings.zalikeAnimating=!1})))}),e(window).on("resize.streamwood",function(){t.settings.superVisorMode&&t.IOemit.apply(t,["swSupervisorCommandToOperator",{action:"sendWindowSize",width:e(document).width(),height:e(document).height(),clientName:t.settings.clientName}]);var s=e(".stream-wood-generator:visible");0!==s.length&&t.setElementTop(s),e(".dark-cover-all").height(e(document).height())})},s.prototype.init=function(){var s=this,n=this.getUrlParts();if(n.hasOwnProperty("nodeId")&&(this.settings.nodeId=n.nodeId||0),n.hasOwnProperty("superVisor")&&1==n.superVisor)return this.IOinit(),void(this.settings.inFrame=!0);var i=this.getDocVars(),o=i.url;/mtproxy\.yandex\.net/.test(o)?this.IOinit():(e(".stream-wood-chat,.stream-wood-invitation,.stream-wood-btn,.stream-wood-noreply,.stream-wood-generator").remove(),e.getJSON(this.settings.serverUrl+"/api/?callback=?",{Action:"load",swDomainKey:this.settings.swDomainKey,swKey:this.settings.swKey,swSessionId:this.settings.sessionId,swUrl:i.url,swReferrer:i.referrer,findOperatorId:this.settings.findOperatorId,findDepartmentId:this.settings.findDepartmentId,findOperatorType:this.settings.findOperatorType,userData:this.settings.userData,Params:encodeURIComponent(t(this.getUrlParts()))}).done(function(e){s.load.apply(s,[e]),s.initEvents.call(s),s.runTrigger.apply(s,["onafterload"])}))},s.prototype.load=function(t){var s=this;if(t.Success){var i,o,a,r,l,c,d,h;0!=t.Data.settings.servertime&&void 0!==t.Data.settings.servertime?s.setClientServerOffset(t.Data.settings.servertime):s.setClientServerOffset(parseInt(Date.now()/1e3)),void 0!==t.Data.settings.locale&&this.languages.hasOwnProperty(t.Data.settings.locale)?this.language=t.Data.settings.locale:this.language="ru",this.settings.foreverChat&&(this.settings.hideCloseBtn=1,this.settings.chatOpened=!0),i=this.getCookie(this.strings.sessionId),this.updateSession(t.Data.sessionId),this.setFirstLoadTime(),this.setInterval("iAmOnline",function(){s.iAmOnline.call(s)},6e4),this.showError();var u=t.Data.clientName||"";if((this.settings.clientName||"")!=u&&(this.settings.clientName=u),this.setCookie(this.strings.clientName,this.settings.clientName),this.createSwBtn(),this.createChat(),"1"==this.getCookie(this.strings.soundOff)&&this.disableSound(),this.hideChat(),t.Data.settings["zalike-show"]&&this.createZalike(t.Data.settings),this.settings.crm=t.Data.crm||{cookie:[],getparam:[]},t.Data.settings){this.settings.design=t.Data.settings,this.settings.hideAnchor=t.Data.settings["anchor-hide"]||this.settings.hideAnchor,this.settings.hideOfflineAnchor=t.Data.settings["anchor-offline-hide"]||this.settings.hideOfflineAnchor;var p;p=t.Data.settings["anchor-logo-image"]?this.settings.imgServerUrl+"/host/"+this.settings.swDomainKey+"/logo."+t.Data.settings["anchor-logo-image"]:this.settings.serverUrl+"/img/icons/logo-default.png",e(".stream-wood-btn").addClass("sw-btn-image").append(e("<div>").addClass("logo-img").append(e('<img class="logo-btn-img" width="33" height="33" alt="">').attr("src",p)))}if(this.createInvitation(),i==this.getCookie(this.strings.sessionId)?this.sendUpdatedStat():this.sendUpdatedStat(!0),e(".stream-wood-chat .sw-messages-list").scrollTop(100*e(".stream-wood-chat .sw-messages-list .sw-ml-item").length),this.pageIdentAdd(this.page_ident),this.pageIdentGetMainPage()?this.pageIdentObserve():this.pageIdentSetMainPage(this.page_ident),this.settings.ipAddr=t.Data.ipAddr||this.settings.ipAddr,this.settings.nodeId=t.Data.nodeId||0,this.settings.device=t.Data.device,this.settings.tariff=t.Data.tariff,t.Data.departments&&(this.settings.departments=t.Data.departments),t.Data.generator_departments&&(this.settings.generatorDepartments=t.Data.generator_departments),this.managerIsOnline(t.Data.manager))this.hideChat(),t.Data.hasOwnProperty("messages")&&t.Data.messages.length>0?(this.setManager(t.Data.manager),this.setMessages(t.Data.messages)):(this.settings.rating=!1,this.setManagerNoMessages(t.Data.manager),this.createFirstMessageForm(),e(".stream-wood-chat").find(".sw-send-group").find("span").hide().end().find(".sw-send-btn-text").show().end().end().find(".sw-send-btn").unbind("click").click(function(){return!1!==s.startDialogContactChooser.call(s)&&(e(".stream-wood-chat .sw-message").val()?(s.showError.call(s),s.setManager.apply(s,[s.settings.manager]),s.sendFirstMessage.call(s)):e(".stream-wood-chat .sw-message").focus(),!1)}),void 0!==this.settings.design.sendContact&&this.appendContactInfoProperties(e(".stream-wood-chat")));else if(this.settings.departments&&this.getOnlineManagerFromDepartments()&&"1"==this.settings.design.selectType||t.Data.managers&&"2"==this.settings.design.selectType){var g;if(this.settings.rating=!1,l="<dt><span>"+this.languages[this.language].swDepText+'</span><span class="compact"></span></dt><dd>',c=this.languages[this.language].swHelloText,this.settings.departments&&"1"==this.settings.design.selectType){switch(g=this.settings.departments,this.settings.swDomainKey){case"894eb64ae457d8d5e251775ba3cec316":a=this.languages[this.language].swChangeManagerText;break;default:a=this.languages[this.language].swChangeDepText}f=this.getOnlineManagerFromDepartments();this.settings.invitationManager=f}else if(t.Data.managers){this.settings.managers=g=t.Data.managers,a=this.languages[this.language].swChangeManagerText;var f=this.arrayFind(this.settings.managers,function(e){return s.managerIsOnline(e)});this.settings.invitationManager=f}switch(this.updateBtn(f||{}),e(".stream-wood-chat .sw-manager").addClass("sw-manager-select").append(e('<p class="sw-title">').text(c)).append(e('<p class="sw-info">').text(a)),h=this.createFirstMessageForm(),o=0,d="checked",this.settings.swDomainKey){case"894eb64ae457d8d5e251775ba3cec316":l+="<select name=\"sw-select-department\" class=\"sw-select-manager\" onchange=\"swQ('.stream-wood-chat .sw-select-manager-c').hide();swQ('.stream-wood-chat .sw-select-manager-c input').attr('checked',false);swQ('#mgs_'+this.value).show();swQ('#mgs_'+this.value+' input:first').attr('checked',true);\">",e(this.settings.departments).each(function(){l+='<option value="'+o+'">'+this.name+"</option>",o++}),l+="</select></dd>";var m="";o=0,d="checked",e(this.settings.departments).each(function(){m+='<dl class="sw-select-manager sw-select-manager-c"',0!=o&&(m+=' style="display:none"'),m+=' id="mgs_'+o+'"><dt><span></span><span class="compact"></span></dt><dd>';var t=0;e(this.managers).each(function(){this.img=this.getManagerAvatarSrc(this);var e='<img src="'+this.img+'" width="24" height="24" alt=""> ';this.status==s.consts.SW_MANAGER_STATUS_ONLINE||1==this.from_mobile?m+='<label class="sw-manager-img"><input type="radio" name="sw-select-manager" '+d+' value="'+t+'">'+(e+='<img class="sw-status" src="/img/blank.gif" width="10" height="10" alt="">')+this.name+" "+(this.surname||"")+"</option></label>":m+='<label class="sw-manager-img">'+(e+='<img class="sw-status sw-status-offline" src="/img/blank.gif" width="10" height="10" alt="">')+this.name+" "+(this.surname||"")+"</option></label>",t++}),m+="</dd></dl>",d="",o++}),h.find(".sw-newmessage").prepend(m);break;default:1==this.settings.design.operatorShowType?(o=0,e(g).each(function(){o>0&&(d=""),l+='<label><input type="radio" name="sw-select-manager" '+d+' value="'+o+'">'+this.name+" "+(this.surname||"")+"</label>",o++})):(o=0,l+='<select name="sw-select-manager" class="sw-select-manager">',e(g).each(function(){l+='<option value="'+o+'">'+this.name+" "+(this.surname||"")+"</option>",o++}),l+="</select>"),l+="</dd>"}g&&h.find(".sw-newmessage").prepend(e('<dl class="sw-select-manager">').html(l)),this.hideChat(),e(".stream-wood-chat").find(".sw-send-group").find("span").hide().end().find(".sw-send-btn-text").show().end().end().find(".sw-send-btn").unbind("click").click(function(){var t=e.trim(e(".stream-wood-chat .sw-message").val());if(e(".stream-wood-chat .sw-message").val()&&0!=t.length){s.showError.call(s);var n;switch(s.settings.swDomainKey){case"894eb64ae457d8d5e251775ba3cec316":n=s.settings.departments[e(".sw-select-manager select").val()].managers[e('.sw-select-manager input[name="sw-select-manager"]:checked').val()];break;default:if(!1===s.startDialogContactChooser.call(s))return!1;if(1==s.settings.design.operatorShowType)s.settings.departments?n=s.settings.departments[e('.sw-select-manager input[name="sw-select-manager"]:checked').val()].manager:s.settings.managers&&(n=s.settings.managers[e('.sw-select-manager input[name="sw-select-manager"]:checked').val()]);else{var i=e(".stream-wood-chat .sw-select-manager select").val();s.settings.departments?n=s.settings.departments[i].manager||s.settings.departments[i].managers[0]:s.settings.managers&&(n=s.settings.managers[i])}}s.setManager.apply(s,[n]),s.sendFirstMessage.call(s)}else e(".stream-wood-chat .sw-message").focus();return!1}),void 0!==this.settings.design.sendContact&&this.appendContactInfoProperties(e(".stream-wood-chat"))}else this.setCookie(this.strings.isConnection,"false"),this.settings.superVisorMode=!1,this.settings.rating=!1,this.settings.feedback=!0,this.setNoManager(),this.hideChat(),e(".stream-wood-chat .sw-sound").hide(),this.settings.design.offlineSelect&&(l="<dt><span>",1==this.settings.design.selectType?(l+=this.languages[this.language].swDepText,this.settings.offline=t.Data.offline_departments):2==this.settings.design.selectType&&(l+=this.languages[this.language].swManagerText,this.settings.offline=t.Data.offline_managers),l+='</span><span class="compact"></span></dt><dd>',o=0,d="checked",1==this.settings.design.operatorShowType?e(this.settings.offline).each(function(e,t){o>0&&(d=""),l+='<label><input type="radio" name="sw-select-manager" '+d+' value="'+this.id+'">'+this.name+"</label>",o++}):(l+='<select name="sw-select-manager" class="sw-offline-select-manager">',1==s.settings.design.selectType?l+='<option value="0">&lt;&lt; &gt;&gt;</option>':2==s.settings.design.selectType&&(l+='<option value="0">&lt;&lt; &gt;&gt;</option>'),e(this.settings.offline).each(function(e,t){1==s.settings.design.selectType?l+='<option value="'+this.id+'">'+this.name+"</option>":2==s.settings.design.selectType&&(l+='<option value="'+this.id+'">'+this.name+" "+(this.surname||"")+"</option>"),o++}),l+="</select>"),l+="</dd>"),"953c57481e782e86d0f09611b23e303e"==this.settings.swDomainKey&&(l="<dt><span>"+this.languages[this.language].swDepText+'</span><span class="compact"></span></dt><dd class="sw-fusospb">',this.settings.offline=t.Data.offline_departments,o=0,d="checked",l+='<select name="sw-select-manager" id="sw-offline-select-manager">',e(this.settings.offline).each(function(e,t){1==s.settings.design.selectType?l+='<option value="'+this.id+'">'+this.name+"</option>":2==s.settings.design.selectType&&(l+='<option value="'+this.id+'">'+this.name+" "+(this.surname||"")+"</option>"),o++}),l+="</select></dd>"),this.createFormMessage(e(".stream-wood-chat"),l),this.hideChat(),e(".stream-wood-chat").find(".sw-send-group").find("span").hide().end().find(".sw-send-btn-text").show().end().end(),this.appendContactInfoProperties(e(".stream-wood-chat")),e(".stream-wood-chat .sw-send-btn").unbind("click").click(function(e){s.sendButtonClick.apply(s,[e])}),+this.settings.design.no_personal_data||n.personal_data(this.settings.design.personal_data_text).appendTo(".stream-wood-chat .sw-message-group"),+this.settings.design.advertising_agree&&n.advertising_agree(this.settings.design.advertising_agree_url).appendTo(".stream-wood-chat .sw-message-group");if(e(".sw-newmessage textarea").keypress(function(t){1!=t.ctrlKey||13!=t.keyCode&&13!=t.which&&10!=t.keyCode&&10!=t.which||e(".stream-wood-chat .sw-send-btn").click()}),this.settings.design["collector-hide"]=t.Data.settings["collector-hide"],!t.Data.settings["collector-hide"]){var w=e(n.noreply);if(w.appendTo("body"),r=t.Data.settings["collector-title"]||this.languages[this.language].swNoReplyText,a=t.Data.settings["collector-text"]||this.languages[this.language].swNoReplyContactsText,this.settings.design.offlineSelect&&(1==this.settings.design.selectType?(l="<dt><span>"+this.languages[this.language].swDepText+'</span><span class="compact"></span></dt><dd class="department">',this.settings.offline=t.Data.offline_departments):2==this.settings.design.selectType&&(l="<dt><span>"+this.languages[this.language].swManagerText+'</span><span class="compact"></span></dt><dd class="department">',this.settings.offline=t.Data.offline_managers),o=0,d="checked",1==this.settings.design.operatorShowType?e(this.settings.offline).each(function(){o>0&&(d=""),l+='<label><input type="radio" name="sw-select-manager-noreply" '+d+' value="'+this.id+'">'+this.name+"</option></label>",o++}):(l+='<select name="sw-select-manager-noreply" class="sw-select-manager">',e(this.settings.offline).each(function(){var e=this.name;2==s.settings.design.selectType&&(e+=" "+(this.surname||"")),l+='<option value="'+this.id+'">'+e+"</option>",o++}),l+="</select>"),l+="</dd>"),w.find(".sw-title").text(r),w.find(".sw-info").text(a),this.settings.offline||(l=""),this.createFormMessage(w,l),this.appendContactInfoProperties(w),w.find(".sw-send-btn").unbind("click").click(function(){s.noReplySendButtonClick.call(s)}),w.find(".sw-cancel-btn").unbind("click").click(function(){s.slideDownNoReply.call(s)}),!+this.settings.design.no_personal_data)n.personal_data(this.settings.design.personal_data_text).appendTo(".stream-wood-noreply .sw-message-group");if(+this.settings.design.advertising_agree)n.advertising_agree(this.settings.design.advertising_agree_url).appendTo(".stream-wood-noreply .sw-message-group");if(!this.settings.feedback){var v=this.Storage.get(this.strings.firstMessage);v&&this.noreplyInitTimer(v)}this.hideNoReply()}if(void 0!==this.settings.design["generator-new-version"]&&"1"==this.settings.design["generator-new-version"]?this.createNewVersionGenerator():this.createGenerator(),this.recallIsEnabled()&&this.createRecallVersion3(),this.webpushIsEnabled()&&"subscribed"!=s.Storage.get("webpush_subscription")&&s.webpushServiceWorkerCheck()&&(e(document).on("click",".stream-wood-webpush-close",function(){return s.webpushModalHide(),!1}),e(document).on("click",".webpush-wrap button",function(){return s.webpushModalHide(),s.Storage.set("webpush_subscription","subscribed"),window.open(s.settings.design["webpush-url"],"_blank","width=630,height=730,top=200,left=200"),!1}),this.webpushInitTimer()),void 0!==this.settings.design["registrator-show"]&&1==this.settings.design["registrator-show"]&&this.createRegistrator(),e(n.dark_cover_all).height(e(document).height()).hide().appendTo(document.body),this.settings.hideAll)return;"mobile"!=this.settings.device||this.settings.design.noMobileOptimize?(this.setInvitationInfo(),this.invitationInitTimer(),this.settings.design["feedback-invitation-show"]&&(this.settings.design["feedback-invitation-hide"]=0),this.feedbackInitTimer()):(e(".stream-wood-chat,.stream-wood-invitation,.stream-wood-noreply,.stream-wood-btn .logo-img").remove(),e(".stream-wood-btn").removeClass("sw-btn-image").removeClass("sw-btn-position-right").removeClass("sw-btn-position-left").removeClass("sw-btn-position-top").css({left:"",right:"",marginRight:""}).addClass("sw-btn-position-bottom"),this.settings.design["anchor-position"]="bottom",e(".stream-wood-btn").addClass("stream-wood-mobile-btn").find(".sw-title").addClass("mobile-title").end().find(".sw-status").addClass("mobile-status"),e(".stream-wood-btn").attr("target","_blank").attr("href","http://web.archive.org/web/20171014090326/https://clients.streamwood.ru/mobile?swDomainKey="+this.settings.swDomainKey+"&swKey="+this.settings.swKey).unbind("click").click(function(){s.deleteInterval.apply(s,["iAmOnline"])}),this.setCookie(this.strings.innerWidth,window.innerWidth),this.setCookie(this.strings.innerHeight,window.innerHeight),this.settings.hideAnchor?this.hideBtn():(this.showBtn(),s.mobileResize.call(s))),this.settings.chatOpened?(this.showChat(),this.hideBtn()):(this.showBtn(),this.hideChat()),101==this.settings.tariff&&(e(".stream-wood-chat,.stream-wood-invitation,.stream-wood-noreply,.stream-wood-btn").remove(),this.invitationStopTimer(),this.feedbackStopTimer(),this.hideBtn()),this.settings.feedback||this.IOinit(),this.settings.needBeep&&(this.settings.needBeep=!1,this.playBeep())}else t.Errors?(e.each(t.Errors,function(e,t){s.showError(t+"")}),this.hideBtn(),this.hideChat(),this.showSystemError()):(this.showError("    api  load"),this.hideBtn(),this.hideChat(),this.showSystemError());var y=this.getCookie(this.strings.rating);y&&0==y?e(".stream-wood-chat .sw-send-group").find(".good").hide().end().find(".bad").addClass("bad-press").attr("title"," ").unbind("click").click(function(){if(s.settings.manager)return e(".stream-wood-chat .sw-send-group .bad").removeClass("bad-press"),e(".stream-wood-chat .sw-send-group .good").show(),s.deleteCookie.apply(s,[s.strings.rating]),!1}):y&&1==y&&e(".stream-wood-chat .sw-send-group").find(".bad").hide().end().find(".good").addClass("good-press").attr("title"," ").unbind("click").click(function(){if(s.settings.manager)return e(".stream-wood-chat .sw-send-group .good").removeClass("good-press"),e(".stream-wood-chat .sw-send-group .bad").show(),s.deleteCookie.apply(s,[s.strings.rating]),!1}),this.settings.rating||e(".stream-wood-chat .sw-send-group").find(".good,.bad,.sw-upload").hide().end().find(".sw-send-btn").removeClass("sw-send-btn-rating-on"),this.applySettings()},s.prototype.arrayFind=function(e,t){var s=!1;return e?[].find?e.find(t,this):(e.forEach(function(e){!s&&t.call(this,e)&&(s=e)},this),s):s},s.prototype.getOnlineManagerFromDepartments=function(){var e,t=this;return(e=this.arrayFind(this.settings.departments,function(e){return e.manager&&t.managerIsOnline(e.manager)}))?e=e.manager:this.settings.departments.forEach(function(s){e=t.arrayFind(s.managers,function(e){return t.managerIsOnline(e)})}),e},s.prototype.reload=function(t){var s=this;this.setTimeout("reload",function(){e(".stream-wood-chat,.stream-wood-invitation,.stream-wood-btn,.stream-wood-noreply,.stream-wood-generator,.stream-wood-recall-3,.stream-wood-recall-btn,.dark-cover-all").unbind("*").remove(),e(document).unbind("mousemove.streamwood").unbind("click.streamwood").unbind("scroll.streamwood"),e(window).unbind("resize.streamwood"),s.deleteAllTimeouts.call(s),s.deleteAllIntervals.call(s),s.init()},parseInt(t))},s.prototype.showError=function(t,s,n){void 0===n&&(n=".stream-wood-chat"),"Object"!=typeof n&&(n=e(n)),s?(n.find(".sw-"+s+"-error").empty(),t?(n.find(".sw-"+s+"-error").append(e("<p>").html(t)).show(),n.find(".sw-"+s+"-loader").hide()):n.find(".sw-"+s+"-error").hide()):(n.find(".sw-error-main").empty(),t?(n.find(".sw-error-main").append(e("<p>").html(t)).show(),n.find(".sw-loader").hide()):n.find(".sw-"+s+"-error").hide())},s.prototype.getDocVars=function(){return void 0===this._getDocVarsCache&&(this._getDocVarsCache={url:"string"==typeof document.URL?document.URL:"",title:"string"==typeof document.title?document.title:"",referrer:"string"==typeof document.referrer?document.referrer:""},document.referrer&&this.setCookie(this.strings.referrer,document.referrer)),this._getDocVarsCache},s.prototype.getCookiesForCrm=function(){var t=this,s={};return this.settings.crm.cookie.length&&e.each(this.settings.crm.cookie,function(){s[this]=t.getCookie(this)||""}),s},s.prototype.getParamsForCrm=function(){var t=this,s={};return this.settings.crm.getparam.length&&e.each(this.settings.crm.getparam,function(){s[this]=t.getUriParamByName(this)||""}),s},s.prototype.getUrlParts=function(){var e={},t=window.location.search.substring(1);if(t.length>0)for(var s=t.split("&"),n=0;n<s.length;n++){var i=s[n].split("=");e[i[0]]=decodeURIComponent(i[1])}return e},s.prototype.sendUpdatedStat=function(t){var s=parseInt(this.getCookie(this.strings.timePage)||1),n=parseInt(this.getCookie(this.strings.timeAll)||1);this.deleteCookie(this.strings.timePage);var i=0;this.getCookie(this.strings.noNewVisit)||t||(i=1);var o=new Date;o.setHours(o.getHours()+16),this.setCookie(this.strings.noNewVisit,1,o);var a=this.getDocVars();e.getJSON(this.settings.serverUrl+"/api/?callback=?",{Action:"updateStat",swDomainKey:this.settings.swDomainKey,swKey:this.settings.swKey,swSessionId:this.settings.sessionId,swUrl:a.url,swReferrer:a.referrer,swTitle:a.title,swNewVisit:i,swTimePage:s,swTimeAll:n})},s.prototype.updateTimeAll=function(){var e=new Date;e.setDate(e.getDate()+1),this.setCookie(this.strings.timeAll,parseInt(this.getCookie(this.strings.timeAll))+1||1,e),this.setCookie(this.strings.timePage,parseInt(this.getCookie(this.strings.timePage))+1||1,e)},s.prototype.pageIdentAdd=function(t){var s=this,n=new Date;n.setFullYear(n.getFullYear()+1);var i=this.getCookie(this.strings.currentOpenedPages),o=i?i+"."+t:t;this.setCookie(this.strings.currentOpenedPages,o,n),this.setInterval("incrementPageTime",function(){s.incrementPageTime.apply(s,[t])},1e3),e(window).on("beforeunload",function(){s.pageIdentRemove.apply(s,[t]),s.deleteInterval.apply(s,["incrementPageTime"])});var a=document.cookie.match(/sw_openedpage_([a-z]+)=\d+/gi);a&&setTimeout(function(){var t=document.cookie.match(/sw_openedpage_[a-z]+=\d+/gi);e(a).each(function(e,n){if(-1!=t.indexOf(n)){var i=n.substr(0,19);s.deleteCookie(i)}})},5e3)},s.prototype.incrementPageTime=function(e){var t=new Date,s=parseInt((new Date).getTime()/1e3);t.setFullYear(t.getFullYear()+1),this.setCookie("sw_openedpage_"+e,s,t)},s.prototype.pageIdentRemove=function(e){var t=[],s=(this.getCookie(this.strings.currentOpenedPages)||"").split(".");if(this.deleteCookie("sw_openedpage_"+e),0==s.length)return this.deleteCookie(this.strings.currentOpenedPages);for(var n in s)s.hasOwnProperty(n)&&s[n]!==e&&t.push(s[n]);if(t.length>0){var i=new Date;i.setFullYear(i.getFullYear()+1),this.setCookie(this.strings.currentOpenedPages,t.join("."),i),this.pageIdentSetUpdateMainPage(t[0])}else this.deleteCookie(this.strings.currentOpenedPages),this.deleteCookie(this.strings.mainPage),this.deleteCookie(this.strings.updateMainPage)},s.prototype.pageIdentSetMainPage=function(e){var t=this,s=new Date;s.setFullYear(s.getFullYear()+1),this.setCookie(this.strings.mainPage,e,s),this.setInterval("updateTimeAll",function(){t.updateTimeAll.call(t)},1e3)},s.prototype.pageIdentObserve=function(){var e=this;this.setInterval("pageIdentObserve",function(){e.getCookie(e.strings.updateMainPage)===e.page_ident&&(e.pageIdentSetMainPage.apply(e,[e.page_ident]),e.deleteInterval.apply(e,["pageIdentObserve"]),e.deleteCookie.apply(e,[e.strings.updateMainPage]));var t=parseInt((new Date).getTime()/1e3),s=e.getCookie.apply(e,[e.strings.mainPage]),n=e.getCookie.apply(e,["sw_openedpage_"+s]);((n=parseInt(n))+3<t||isNaN(n))&&e.pageIdentRemove.apply(e,[s])},1e3)},s.prototype.pageIdentSetUpdateMainPage=function(e){if(e.length>0){var t=new Date;t.setFullYear(t.getFullYear()+1),this.setCookie(this.strings.updateMainPage,e,t)}else this.deleteCookie(this.strings.updateMainPage)},s.prototype.pageIdentGetMainPage=function(){return this.getCookie(this.strings.mainPage)},s.prototype.pageIdentGen=function(){for(var e="",t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",s=0;s<5;s++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},s.prototype.getDateToGenerator=function(e){switch(parseInt(this.settings.design["generator-countdown-type"])){case 1:var t=e.getDate()+parseInt(this.settings.design["generator-count-days"]);e=new Date(e.getFullYear(),e.getMonth(),t);break;case 2:e.setHours(e.getHours()+parseInt(this.settings.design["generator-count-hours"]));break;case 3:var s=this.settings.design["generator-end-date"].split("-");e=new Date(parseInt(s[0]),parseInt(s[1])-1,parseInt(s[2]))}return e},s.prototype.getDateToGeneratorNew=function(e){switch(parseInt(this.settings.design["generator-countdown-type"])){case 1:var t=e.getDate()+parseInt(this.settings.design["generator-count-days"]);e=new Date(e.getFullYear(),e.getMonth(),t);break;case 2:e.setHours(e.getHours()+parseInt(this.settings.design["generator-count-hours"]));break;case 3:var s=this.settings.design["generator-exacttime"].split(" "),n=s[0].split("-"),i=s[1].split(":");e=new Date(parseInt(n[0]),parseInt(n[1])-1,parseInt(n[2]),parseInt(i[0]),parseInt(i[1]))}return e},s.prototype.setRating=function(t){if(this.settings.manager){var s,n,i,o="",a=e(".stream-wood-chat .sw-send-group");if((t=e(t)).hasClass("good")?(s=a.find(".bad"),n=t,o="good-press",i=1):t.hasClass("bad")&&(s=a.find(".good"),n=t,o="bad-press",i=0),n.hasClass(o))n.removeClass(o),s.show(),this.deleteCookie(this.strings.rating);else{var r=e(".stream-wood-chat .sw-messages-list");n.addClass(o).attr("title",this.languages[this.language].swChangeRatingText),s.hide(),e("<div>").addClass("sw-ml-item sw-ml-item-my sw-ml-item-access").append(e("<p>").addClass("sw-name-d").text(this.languages[this.language].swSendResultText)).appendTo(r),r.scrollTop(100*e(".stream-wood-chat .sw-messages-list .sw-ml-item").length),this.setCookie(this.strings.rating,i),e.getJSON(this.settings.serverUrl+"/api/?callback=?",{Action:"setRating",swManagerId:this.settings.manager.id,swDomainKey:this.settings.swDomainKey,swKey:this.settings.swKey,swSessionId:this.settings.sessionId,swRating:i})}return!1}},s.prototype.sendFirstMessage=function(){var t=e(".stream-wood-chat .sw-name").val();t=t.split('"').join("");var s=e(".stream-wood-chat .sw-message").val();if(t||(t=""),this.setCookie(this.strings.clientName,t),this.settings.clientName=t,this.settings.message=s,void 0!==this.settings.design.sendContact){var n=e(".stream-wood-chat .sw-contact-type").val(),i=e(".stream-wood-chat .sw-email").val(),o=e(".stream-wood-chat .sw-phone").val();this.settings.swContactType=n,this.settings.swEmail=i,this.settings.swPhone=o}e(".stream-wood-chat .sw-name").val()&&(this.settings.clientName=e(".stream-wood-chat .sw-name").val()),this.setManager(this.settings.manager);var a=[],r=new Date;if(s=this.stripTags(s),a.push({message:s,d:r.getDate(),m:r.getMonth()+1,y:r.getFullYear(),hour:r.getHours(),min:r.getMinutes(),wait:!0}),e(".stream-wood-chat .sw-newmessage").remove(),this.setMessages(a),e(".stream-wood-chat .sw-messages-list .sw-ml-item-type").remove(),this.trySendFirstMessage(),this.settings.design["collector-hide"]||(this.noreplyInitTimer(s),this.Storage.set(this.strings.firstMessage,s)),void 0!==this.settings.design.metrica_id&&void 0!==this.settings.design.chat_goal){var l="yaCounter"+this.settings.design.metrica_id||"",c=this.settings.design.chat_goal||"";window[l]&&window[l].reachGoal(c)}void 0!==window._gaq&&window._gaq.push(["_trackEvent","StreamWood","NewMessage",this.settings.clientName+"  "]),void 0!==window.ga&&"function"==typeof window.ga&&window.ga("send","event","StreamWood","NewMessage",this.settings.clientName+"  ")},s.prototype.trySendFirstMessage=function(){var s=this;if(this.settings.swSocketInitialized){if(this.settings.message){var n=this.settings.sessionId,i=this.settings.message;e.browser.msie&&parseInt(e.browser.version)<9&&"windows-1251"==(document.charset||document.characterSet)&&(i=this.utf8_encode(i));var o={swClientName:this.settings.clientName,message:i,managerId:this.settings.manager.id,managerKey:this.settings.manager.key,hostKey:this.settings.swDomainKey,firstMessage:!0,ip:this.settings.ipAddr};1==this.settings.manager.from_mobile&&0==this.settings.manager.status?e.ajax({type:"POST",url:this.settings.serverUrl+"/api/?Action=cloudMessage&swDomainKey="+this.settings.swDomainKey+"&swKey="+this.settings.swKey+"&swSessionId="+n+"&callback=?",data:o,cache:!1,dataType:"json",success:function(t){e(".stream-wood-chat .sw-messages-list .sw-ml-item").removeClass("sw-ml-item-wait")}}):this.IOemit("swSendMessageFromSession",o),this.deleteTimeout("swTypeTimer");var a={swClientName:this.settings.clientName,swFormType:"chat",swMessage:i};this.settings.design.sendContact&&(a=e.extend(this.feedbackDefaultParams(),a),this.managerIsOnline(this.settings.manager)||(this.feedbackRequest(a),e(".stream-wood-chat .sw-messages-list .sw-ml-item").removeClass("sw-ml-item-wait"))),e.getJSON(this.settings.serverUrl+"/api/?callback=?",{Action:"firstMessage",swManagerId:this.settings.manager.id,swDomainKey:this.settings.swDomainKey,swKey:this.settings.swKey,swSessionId:n,Params:encodeURIComponent(t(a))})}}else this.setTimeout("swTypeTimer",function(){s.trySendFirstMessage.call(s)},250)},s.prototype.setTitle=function(){var t=this;this.settings.title||e(".stream-wood-chat .sw-message:focus").length||(this.settings.title=document.title,document.title="*** "+this.languages[this.language].swNewMesageText+" *** ||"+document.title,this.setInterval("titleTimer",function(){document.title==t.settings.title?document.title="*** "+t.languages[t.language].swNewMesageText+" *** ||"+document.title:t.settings.title&&(document.title=t.settings.title)},1e3*this.settings.titleTimeout))},s.prototype.resetTitle=function(){this.deleteInterval("titleTimer"),this.settings.title&&(document.title=this.settings.title,this.settings.title=!1)},s.prototype.playBeep=function(){var e=this;this.sounds.incomingSoundHandler?this.settings.design.soundOff||"1"==this.getCookie(this.strings.soundOff)||this.sounds.incomingSoundHandler.play():(window.soundManager=new SoundManager,window.soundManager.setup({url:this.settings.serverUrl+"/js/soundmanager/swf/",preferFlash:!1,onready:function(){e.sounds.incomingSoundHandler=window.soundManager.createSound({url:e.settings.serverUrl+"/img/streamwood5.mp3"}),e.settings.design.soundOff||"1"==e.getCookie.apply(e,[e.strings.soundOff])||e.sounds.incomingSoundHandler.play()},ontimeout:function(){}}),window.soundManager.beginDelayedInit())},s.prototype.applySettings=function(){var t,s,n,i,o,a,r=e(".stream-wood-btn");if(this.settings.hasOwnProperty("design")){var l=this.settings.design;if((l["background-color"]||"000000"==l["background-color"]||"000"==l["background-color"])&&(this.settings.feedback&&!l["chat-offline-color"]||e(".stream-wood-chat, .stream-wood-invitation, .stream-wood-noreply").find(".sw-manager").css("background-color","#"+l["background-color"])),this.settings.hideAnchor||(!l["anchor-offline-grey"]||this.settings.manager||this.settings.managers||this.settings.departments?(!this.settings.hideOfflineAnchor||this.settings.manager||this.settings.managers||this.settings.departments)&&(l["anchor-background-css"]?l["anchor-background-css"].split(";").forEach(function(t){var s=t.split(":"),n=e.trim(s[0]),i=e.trim(s[1]);n&&i&&r.css(n,i)}):l["anchor-background-color"]&&r.css("background-color","#"+l["anchor-background-color"])):r.addClass("stream-wood-btn-g")),l["background-image"]&&(!this.settings.feedback||this.settings.managerStatus==this.consts.SW_MANAGER_STATUS_ONLINE)){var c=this.settings.imgServerUrl+"/host/"+this.settings.swDomainKey+"/bgr."+l["background-image"];c+="?"+(l.updated_at||""),e(".stream-wood-chat, .stream-wood-invitation, .stream-wood-noreply").find(".sw-manager").css("background","url('"+c+"') repeat-x bottom")}var d=r.find("span.sw-title");l["anchor-text"]&&d.html(l["anchor-text"]),l["anchor-text-font-color"]&&d.css("color","#"+l["anchor-text-font-color"]),l["anchor-text-font-family"]&&d.css("font-family",l["anchor-text-font-family"]),l["anchor-text-font-size"]&&d.css("font-size",l["anchor-text-font-size"]+"px");if(l["anchor-size"]?(r.addClass("sw-btn-small"),16):20,l["anchor-position"]){if(e.browser.msie)r.addClass("sw-btn-position-"+l["anchor-position"]+"-ie"),"right"!=l["anchor-position"]&&"left"!=l["anchor-position"]||(r.css({"border-radius":"0 5px 5px 0"}).find("span").css({"margin-top":"65px"}).find(".sw-title").css({marginRight:0,marginLeft:0,marginBottom:15}).end().end().find(".logo-img").css({top:13,left:8,borderRadius:"28px !important"}).find(".logo-btn-img").css({borderRadius:"28px !important",width:30,height:30}),l["anchor-offline-grey"]&&(d.css({marginRight:0,marginLeft:0}),e(".stream-wood-btn.stream-wood-btn-g span.sw-title").css({marginTop:15,marginBottom:15})));else{r.addClass("sw-btn-position-"+l["anchor-position"]);var h=r.width();if(h>220){var u=h-190,p=-51;l["anchor-logo"]&&(p=-74),parseInt(p)-parseInt(u)/2}}e(".stream-wood-invitation").addClass("stream-wood-invitation-"+l["anchor-position"]),e(".stream-wood-chat").addClass("stream-wood-"+l["anchor-position"]),e(".stream-wood-noreply").addClass("stream-wood-noreply-"+l["anchor-position"])}else e(".stream-wood-invitation").addClass("stream-wood-invitation-bottom"),e(".stream-wood-chat").addClass("stream-wood-bottom"),e(".stream-wood-noreply").addClass("stream-wood-noreply-bottom"),r.addClass("sw-btn-position-bottom");"1"==this.settings.design.sendMessageType&&(e(".stream-wood-chat .sw-send-group span span").remove(),e(".stream-wood-chat .sw-send-group .sw-enter").html("  Enter")),l["chat-compact"]&&(e(".stream-wood-chat,.stream-wood-invitation,.stream-wood-noreply").addClass("stream-wood-compact"),this.settings.design.sendMessageType||e(".stream-wood-chat .sw-send-group span span").remove()),(l["font-color"]||"000000"==l["font-color"]||"000"==l["font-color"])&&(this.settings.managers||this.settings.departments||this.settings.manager)&&e(".stream-wood-chat .sw-manager .sw-manager-name,.stream-wood-chat .sw-manager.sw-manager-no-messages .sw-title,.stream-wood-chat .sw-manager.sw-manager-select .sw-title,.stream-wood-invitation .sw-manager .sw-manager-name,.stream-wood-invitation .sw-manager .invitation-text").css("color","#"+l["font-color"]),l["font-family"]&&e(".stream-wood-chat,.stream-wood-chat .sw-manager-name,.stream-wood-chat .sw-manager.sw-manager-no-messages .sw-title,.stream-wood-chat .sw-manager.sw-manager-select .sw-title,.stream-wood-invitation,.stream-wood-invitation .sw-manager-name").css("font-family",l["font-family"]),l["font-size"]&&e(".stream-wood-chat, .stream-wood-chat .sw-manager-name,.stream-wood-chat .sw-manager.sw-manager-no-messages .sw-title,.stream-wood-chat .sw-manager.sw-manager-select .sw-title,.stream-wood-invitation, .stream-wood-invitation .sw-manager-name").css("font-size",l["font-size"]+"px"),(l["department-font-color"]||"000000"==l["department-font-color"]||"000"==l["department-font-color"])&&(this.settings.managers||this.settings.departments||this.settings.manager)&&e(".stream-wood-chat .sw-manager .sw-manager-position,.stream-wood-chat .sw-manager.sw-manager-select .sw-info,.stream-wood-invitation .sw-manager .sw-manager-position").css("color","#"+l["department-font-color"]),l["department-font-family"]&&e(".stream-wood-chat,.stream-wood-chat .sw-manager-position,.stream-wood-chat .sw-manager.sw-manager-select .sw-info,.stream-wood-invitation .sw-manager .sw-manager-position").css("font-family",l["department-font-family"]),l["department-font-size"]&&e(".stream-wood-chat,.stream-wood-chat .sw-manager-position,.stream-wood-chat,.sw-manager.sw-manager-select .sw-info,.stream-wood-invitation .sw-manager .sw-manager-position").css("font-size",l["department-font-size"]+"px"),l["dialog-font-family"]&&e(".stream-wood-chat .sw-messages-list p").css("font-family",l["dialog-font-family"]),l["dialog-font-size"]&&e(".stream-wood-chat .sw-messages-list p").css("font-size",l["dialog-font-size"]+"px"),l["chat-outer-shadow-color"]&&(s=l["chat-outer-shadow-color"].split(":"),(i=e(".stream-wood-chat").css("box-shadow"))&&(n=(n=i.replace(/rgba?\([^\)]+\)/gi,""))+" rgba("+s[0]+", 0.35)"),e(".stream-wood-chat").css({"box-shadow":n,"-webkit-box-shadow":n,"-moz-box-shadow":n})),l["chat-outer-shadow-value"]&&((i=e(".stream-wood-chat").css("box-shadow"))&&(o=i.replace(/^.*(rgba?\([^)]+\)).*$/,"$1"),a=i.replace(/rgba?\([^\)]+\)/gi,"").split(" "),e.browser.msie?a[3]=l["chat-outer-shadow-value"]+"px":a[4]=l["chat-outer-shadow-value"]+"px",n=a.join(" ")+" "+o),e(".stream-wood-chat").css({"box-shadow":n,"-webkit-box-shadow":n,"-moz-box-shadow":n}));var g=e(".stream-wood-chat .sw-send-group .sw-send-btn-text");if(l["chat-sendbtn-font-family"]&&g.css("font-family",l["chat-sendbtn-font-family"]),l["chat-sendbtn-font-size"]&&g.css("font-size",l["chat-sendbtn-font-size"]+"px"),l["chat-sendbtn-font-color"]&&g.css("color","#"+l["chat-sendbtn-font-color"]),l["chat-sendbtn-bkg-color"]&&e(".stream-wood-chat .sw-send-group .sw-send-btn,.stream-wood-invitation .sw-send-group .sw-send-btn:eq(1)").attr("style",l["chat-sendbtn-bkg-css"]),l["chat-sendbtn-shadow"]&&l["chat-sendbtn-shadow-color"]){s=l["chat-sendbtn-shadow-color"].split(":");var f="1px";l["chat-sendbtn-shadow-value"]&&(f=l["chat-sendbtn-shadow-value"]+"px"),n="inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 0 7px "+f+" rgba("+s[0]+", 0.35)",e(".stream-wood-chat .sw-send-group .sw-send-btn").css({"box-shadow":n,"-webkit-box-shadow":n,"-moz-box-shadow":n})}if("mobile"!==this.settings.device&&("pixel"===l["anchor-offset"]||"percent"===l["anchor-offset"])){var m,w,v="percent"===l["anchor-offset"]?"%":"px",y=e(".stream-wood-chat, .stream-wood-invitation, .stream-wood-btn");switch(l["anchor-position"]){case"right":case"left":m="top",w=e(window).height(),y.css("top",l["anchor-offset-value"]+v);break;case"top":case"bottom":default:m="right",w=e(window).width(),y.css("right",l["anchor-offset-value"]+v)}"%"===v&&y.each(function(){var t=e(this),s=t.offset()["top"===m?"top":"left"],n=t.width();t.is(":hidden")&&(t.css("opacity","0").show(),s=t.offset()["top"===m?"top":"left"],n=t.width(),t.hasClass("stream-wood-btn")||-1===["right","left"].indexOf(l["anchor-position"])||(n=t.height()),t.css("opacity","1").hide());var i=w-(s+n);if("top"!==m&&(i=s),i<0){var o="calc("+t.css(m)+" - "+-i+"px)";t.css(m,o)}})}var b;l["anchor-text-shadow"]&&2!=l["anchor-text-shadow"]?1==l["anchor-text-shadow"]&&d.css("text-shadow","none"):(l["anchor-text-shadow-color"]&&(b=l["anchor-text-shadow-color"].split(":"),d.css("text-shadow","rgba("+b[0]+", 0.75) 1px 2px 1px"),e.browser.msie&&d.css("filter","progid:DXImageTransform.Microsoft.Shadow(direction=120,strength=2,color=#"+b[1]+")")),e.browser.msie&&d.css("display","inline-block"));var k=r.find("span.sw-status");l["anchor-status-text"]&&2!=l["anchor-status-text"]?(k.hide(),d.addClass("only-title"),e.browser.msie&&d.addClass("only-title-ie")):(this.managerIsOnline(this.settings.manager)||this.settings.departments||this.settings.managers?l["anchor-status-text-online"]&&k.html(l["anchor-status-text-online"]):l["anchor-status-text-offline"]&&k.html(l["anchor-status-text-offline"]),l["anchor-status-font-color"]&&k.css("color","#"+l["anchor-status-font-color"]),l["anchor-status-font-family"]&&k.css("font-family",l["anchor-status-font-family"]),l["anchor-status-font-size"]&&k.css("font-size",l["anchor-status-font-size"]+"px"),l["anchor-status-shadow"]&&(l["anchor-status-shadow-color"]?(b=l["anchor-status-shadow-color"].split(":"),k.css("text-shadow","rgba("+b[0]+", 0.75) 1px 1px 0"),e.browser.msie&&k.css({display:"inline-block",filter:"progid:DXImageTransform.Microsoft.Shadow(direction=120,strength=2,color=#"+b[1]+")"})):(k.css("text-shadow","rgba(14, 30, 56, 0.75) 1px 1px 0"),e.browser.msie&&k.css("display","inline-block").css("filter","progid:DXImageTransform.Microsoft.Shadow(direction=120,strength=2,color=#0e1e38)")))),l["anchor-outer-shadow-color"]&&!l["anchor-offline-grey"]&&(b=l["anchor-outer-shadow-color"].split(":"),(i=r.css("box-shadow"))&&(n=(n=i.replace(/rgba?\([^\)]+\)/gi,""))+" rgba("+b[0]+", 0.35)"),r.css({"box-shadow":n,"-webkit-box-shadow":n,"-moz-box-shadow":n})),l["anchor-outer-shadow-value"]&&!l["anchor-offline-grey"]&&((i=r.css("box-shadow"))&&(o=i.replace(/^.*(rgba?\([^)]+\)).*$/,"$1"),a=i.replace(/rgba?\([^\)]+\)/gi,"").split(" "),e.browser.msie?a[3]=l["anchor-outer-shadow-value"]+"px":a[4]=l["anchor-outer-shadow-value"]+"px",n=a.join(" ")+" "+o),r.css({"box-shadow":n,"-webkit-box-shadow":n,"-moz-box-shadow":n}));var x;if(l["anchor-text-rotate-value"]&&0!=l["anchor-text-rotate-value"]&&(x="rotate("+l["anchor-text-rotate-value"]+"deg)",d.css({display:"inline-block",transform:x,"-moz-transform":x,"-webkit-transform":x,"-o-transform":x,"-ms-transform":x})),l["anchor-text-shadow"]&&2!=l["anchor-text-shadow"]||l["anchor-status-rotate-value"]&&0!=l["anchor-status-rotate-value"]&&(x="rotate("+l["anchor-status-rotate-value"]+"deg)",k.css({display:"inline-block",transform:x,"-moz-transform":x,"-webkit-transform":x,"-o-transform":x,"-ms-transform":x})),this.settings.feedback||l["operator-rating"]&&2!=l["operator-rating"]?(e(".stream-wood-chat .sw-send-group .bad,.stream-wood-chat .sw-send-group .good").hide(),e(".stream-wood-chat .sw-send-group .sw-send-btn").removeClass("sw-send-btn-rating-on")):(e(".stream-wood-chat .sw-send-group .good").hasClass("good-press")||e(".stream-wood-chat .sw-send-group .bad").show(),e(".stream-wood-chat .sw-send-group .bad").hasClass("bad-press")||e(".stream-wood-chat .sw-send-group .good").show(),e(".stream-wood-chat .sw-send-group .sw-send-btn").addClass("sw-send-btn-rating-on")),l["anchor-logo"]){if(r.addClass("sw-btn-image"),r.find(".logo-img").show(),t=l["anchor-logo-bg-color"]?"#"+l["anchor-logo-bg-color"]:"#FFFFFF",r.find(".logo-img").css("background-color",t),t=l["anchor-logo-border-color"]?"#"+l["anchor-logo-border-color"]:"#BB361B",r.find(".logo-img").css("border","3px solid "+t),"top"==l["anchor-position"]&&r.find(".logo-img").css("top","3px"),-1!==["a15124b2ce9c3b3b49c0493a74944196","8d40d4f18ceb006b60b43b5beed497f0","2d5cb83767014cee6b3021161aa17b7d","e08662a9858fb331755922a0d0edfdfb"].indexOf(this.settings.swDomainKey)){var T=r.find(".logo-img .logo-btn-img").css("border-radius","4px");"8d40d4f18ceb006b60b43b5beed497f0"!=this.settings.swDomainKey&&T.css({height:41,width:41}),r.find(".logo-img").css({border:"none",borderRadius:0,backgroundColor:"transparent",top:-1,left:-1,boxShadow:"none"})}}else r.removeClass("sw-btn-image"),r.find(".logo-img").hide();l["anchor-smooth"]&&(r.addClass("sw-no-border-radius"),e(".stream-wood-chat").addClass("sw-chat-no-border-radius"),e(".stream-wood-chat .sw-container .sw-manager,.stream-wood-invitation .sw-manager,.stream-wood-noreply .sw-manager").addClass("sw-manager-no-border-radius"))}else e(".stream-wood-invitation").addClass("stream-wood-invitation-bottom"),r.addClass("sw-btn-position-bottom"),e(".stream-wood-noreply").addClass("stream-wood-noreply-bottom");(this.settings.chatOpened||this.settings.invitationOpened||this.settings.feedbackOpened)&&this.hideBtn(),e(".stream-wood-mobile-btn .mobile-title,.stream-wood-mobile-btn .mobile-status").css("transform","none")},s.prototype.applyGeneratorSettings=function(){var t,s={},n=e(".stream-wood-generator"),i=n.find(".sw-send-group");if(this.settings.design.hasOwnProperty("generator-settings")&&void 0!==this.settings.design["generator-settings"])(o=this.settings.design["generator-settings"])["gen-background-color"]&&n.find(".sw-manager").css({backgroundColor:"#"+o["gen-background-color"],border:"1px solid #"+o["gen-background-color"]}),o["gen-title-font-color"]&&(s.color="#"+o["gen-title-font-color"]),o["gen-title-font-family"]&&"mobile"!=this.settings.device&&(s["font-family"]=o["gen-title-font-family"]),o["gen-title-font-size"]&&"mobile"!=this.settings.device&&(s["font-size"]=o["gen-title-font-size"]+"px"),o["gen-title-shadow-color"]&&(t="rgba("+o["gen-title-shadow-color"].split(":")[0]+", 0.75) 1px 1px 0",s["text-shadow"]=t),n.find(".sw-manager .generator-title").css(s),s={},o["gen-text-font-color"]&&(s.color="#"+o["gen-text-font-color"]),o["gen-text-font-family"]&&"mobile"!=this.settings.device&&(s["font-family"]=o["gen-text-font-family"]),o["gen-text-font-size"]&&"mobile"!=this.settings.device&&(s["font-size"]=o["gen-text-font-size"]+"px"),i.find(".sw-action-text").css(s),s={},o["gen-yesbtn-font-color"]&&(s.color="#"+o["gen-yesbtn-font-color"]),o["gen-yesbtn-font-family"]&&"mobile"!=this.settings.device&&(s["font-family"]=o["gen-yesbtn-font-family"]),o["gen-yesbtn-font-size"]&&"mobile"!=this.settings.device&&(s["font-size"]=o["gen-yesbtn-font-size"]+"px"),o["gen-yesbtn-text-shadow"]&&(s["text-shadow"]="rgba(14, 30, 56, 0.74902) 1px 1px 0px"),i.find(".sw-yes-button-span").css(s),o["gen-yesbtn-text"]&&i.find(".sw-yes-button-span").html(o["gen-yesbtn-text"]),o["gen-yesbtn-bg-color"]&&i.find(".sw-append-btn").attr("style",o["gen-yesbtn-bg-css"]),s={},o["gen-nobtn-font-color"]&&(s.color="#"+o["gen-nobtn-font-color"]),o["gen-nobtn-font-family"]&&"mobile"!=this.settings.device&&(s["font-family"]=o["gen-nobtn-font-family"]),o["gen-nobtn-font-size"]&&"mobile"!=this.settings.device&&(s["font-size"]=o["gen-nobtn-font-size"]+"px"),o["gen-nobtn-text-shadow"]&&(s["text-shadow"]="rgba(14, 30, 56, 0.74902) 1px 1px 0px"),i.find(".sw-no-button-span").css(s),o["gen-nobtn-text"]&&i.find(".sw-no-button-span").html(o["gen-nobtn-text"]),o["gen-nobtn-bg-color"]&&i.find(".sw-cancel-btn").attr("style",o["gen-nobtn-bg-css"]);else{var o=this.settings.design;o["gen-background-color"]&&n.find(".sw-manager").css("background-color","#"+o["gen-background-color"]),o["gen-text-font-color"]&&(s.color="#"+o["gen-title-font-color"]),o["gen-text-font-family"]&&"mobile"!=this.settings.device&&(s["font-family"]=o["gen-title-font-family"]),o["gen-text-font-size"]&&"mobile"!=this.settings.device&&(s["font-size"]=o["gen-title-font-size"]+"px"),n.find(".sw-manager .generator-title").css(s),s={},o["gen-title-font-color"]&&(s.color="#"+o["gen-text-font-color"]),o["gen-title-font-family"]&&"mobile"!=this.settings.device&&(s["font-family"]=o["gen-text-font-family"]),o["gen-title-font-size"]&&"mobile"!=this.settings.device&&(s["font-size"]=o["gen-text-font-size"]+"px"),i.find(".action-text").css(s)}void 0!==this.settings.design["generator-persdata-red-border"]&&"1"==this.settings.design["generator-persdata-red-border"]?n.find(".sw-disclaimer").css("border","1px solid red"):n.find(".sw-disclaimer").css("border","none")},s.prototype.applyNewVersionGeneratorSettings=function(){if(this.settings.design.hasOwnProperty("generator-settings")&&void 0!==this.settings.design["generator-settings"]){var t=this.settings.design["generator-settings"],s=e(".stream-wood-generator-2");if(t["gen-wallpaper"]){s.addClass("stream-wood-generator-wallpaper");n=this.settings.imgServerUrl+"/host/"+this.settings.swDomainKey+"/"+this.settings.design["generator-id"]+"/gen-bg."+t["gen-bg-img"];n+="?"+(t.updated_at||""),s.css("background-image","url("+n+")"),s.css("width",t["gen-bg-width"]+"px"),s.css("height",t["gen-bg-height"]+"px")}else{if(t["gen-load-logo"]){s.addClass("stream-wood-generator-with-logo");var n=this.settings.imgServerUrl+"/host/"+this.settings.swDomainKey+"/"+this.settings.design["generator-id"]+"/gen-logo."+t["gen-logo-img"];n+="?"+(t.updated_at||""),s.find(".stream-wood-generator-logo-container").css({backgroundImage:"url("+n+")",height:s.height(),float:"left"})}t["gen-logo-bg-color"]&&s.find(".stream-wood-generator-logo-container").css("background-color","#"+t["gen-logo-bg-color"]),t["gen-bg-color"]&&s.find(".stream-wood-generator-container,.stream-wood-generator-copyright").css("background-color","#"+t["gen-bg-color"]),t["gen-title-bg-color"]&&s.find(".stream-wood-generator-title").css("background-color","#"+t["gen-title-bg-color"])}t["gen-title-font-color"]&&s.find(".stream-wood-generator-title .generator-title-span").css("color","#"+t["gen-title-font-color"]),t["gen-counter-bg-color"]&&(s.find(".stream-wood-generator-counter-box").css("background-color","#"+t["gen-counter-bg-color"]),s.find(".stream-wood-generator-counter-dot").css("color","#"+t["gen-counter-bg-color"])),t["gen-counter-font-color"]&&s.find(".stream-wood-generator-counter-num").css("color","#"+t["gen-counter-font-color"]),t["gen-action-font-color"]&&s.find(".stream-wood-generator-action-content,.stream-wood-generator-counter-text-box,.stream-wood-generator-copyright,.stream-wood-generator-copyright a").css("color","#"+t["gen-action-font-color"]),t["gen-yesbtn-bg-color"]&&s.find(".stream-wood-generator-send-btn").css("background-color","#"+t["gen-yesbtn-bg-color"]),t["gen-yesbtn-font-color"]&&s.find(".stream-wood-generator-send-btn").css("color","#"+t["gen-yesbtn-font-color"]),t["gen-nobtn-bg-color"]&&s.find(".stream-wood-generator-cancel-btn").css("background-color","#"+t["gen-nobtn-bg-color"]),t["gen-nobtn-font-color"]&&s.find(".stream-wood-generator-cancel-btn").css("color","#"+t["gen-nobtn-font-color"]),t["gen-one-button"]&&s.find(".stream-wood-generator-client-data").addClass("stream-wood-generator-one-button")}void 0!==this.settings.design["generator-persdata-red-border"]&&"1"==this.settings.design["generator-persdata-red-border"]?s.find(".stream-wood-disclaimer").css("border","1px solid red"):s.find(".stream-wood-disclaimer").css("border","none")},s.prototype.createFirstMessageForm=function(){var t='<div class="sw-newmessage">';t+='<dl><dt><span class="compact">'+this.languages[this.language].swYouNameText+'</span></dt><dd><input class="sw-name" value="'+this.settings.clientName+'"/></dd></dl>',t+=this.appendContactInfo(),t+="<dl><dt>"+this.languages[this.language].swQuestionText+"</dt><dd>&nbsp;</dd></dl>",t+='<textarea class="sw-message"></textarea>';var s=e(t+="</div>");return+this.settings.design.no_personal_data||n.personal_data(this.settings.design.personal_data_text).appendTo(s),+this.settings.design.advertising_agree&&n.advertising_agree(this.settings.design.advertising_agree_url).appendTo(s),e(".stream-wood-chat .sw-message-group").append(s)},s.prototype.getSelectType=function(e){var t=0;switch(e){case"feedback":t=this.settings.design["feedback-selecttype"];break;case"collector":t=this.settings.design["collector-selecttype"]}return parseInt(t)},s.prototype.getFormContactSelectHtml=function(e){var t='<dl><dt><select class="sw-contact-type" name="contact-type"><option value="2">'+this.languages[this.language].swPhoneText+'</option><option value="1">'+this.languages[this.language].swEmailText+'</option></select></dt><dd><input class="sw-email sw-phone" type="phone" maxlength="50" placeholder="7 (***) ***-**-**"/><div class="sw-error sw-phone-error" style="display:none"></div><div class="sw-error sw-email-error" style="display:none"></div></dd></dl>',s="<dl><dt>"+this.languages[this.language].swPhoneText+'</dt><dd><input class="sw-phone" type="phone" maxlength="50" placeholder="7 (***) ***-**-**"/><div class="sw-error sw-phone-error" style="display:none"></div></dd></dl>',n="<dl><dt>"+this.languages[this.language].swEmailText+'</dt><dd><input class="sw-email" type="email" maxlength="50"/><div class="sw-error sw-email-error" style="display:none"></div></dd></dl>';switch(this.getSelectType(e)){case 1:t=s;break;case 2:t=n;break;case 3:t=n+s}return t},s.prototype.getMessagePlaceholder=function(e){var t="";if("feedback"===e)switch(this.getSelectType(e)){case 1:t=this.languages[this.language].swFeedbackText1;break;case 2:t=this.languages[this.language].swFeedbackText2;break;case 3:t=this.languages[this.language].swFeedbackText3;break;default:t=this.languages[this.language].swFeedbackText0}return t},s.prototype.createFormMessage=function(t,s){var n="feedback";t.hasClass("stream-wood-noreply")&&(n="collector");var i=this.getMessagePlaceholder(n),o=e("<div>").addClass("sw-feedback").append(e('<dl class="sw-select-manager">').html(s)).append(e("<dl>").html("<dt>"+this.languages[this.language].swYouNameText+'</dt><dd><input class="sw-name" value="'+this.settings.clientName+'"/></dd>')).append(this.getFormContactSelectHtml(n)).append(e("<textarea>").prop("placeholder",i).addClass("sw-message sw-message-empty"));t.find(".sw-message-group").append(o)},s.prototype.showSystemError=function(){e(".stream-wood-chat .sw-manager,.stream-wood-chat .sw-send-group").hide(),e(".stream-wood-chat").css({"margin-bottom":0})},s.prototype.createSwBtn=function(){var t=this;e(n.btn).attr("title",this.languages[this.language].swSendQuestionText).find(".sw-title").text(this.languages[this.language].swSendQuestionText).end().find(".sw-status").text(this.languages[this.language].swOperatorOfflineText).end().click(function(e){e.preventDefault(),t.slideUp.call(t)}).appendTo("body")},s.prototype.createZalike=function(t){var s=this,i="",o="";if(t.hasOwnProperty("zalike-settings")){var a=t["zalike-settings"];"pixel"===a["zalike-offset"]?i=a["zalike-offset-value"]+"px":"percent"===a["zalike-offset"]&&(i=a["zalike-offset-value"]+"%"),o="left"===a["zalike-position"]?"left":"right",e(n.zalike).last(".stream-wood-zalike-window").css(o,i).end().find(".stream-wood-zalike-window-head").css("background-color","#"+a["zalike-head-color"]).end().find(".stream-wood-zalike-window-footer").css("background-color","#"+a["zalike-head-color"]).end().find(".stream-wood-zalike-window-body-center").css("background-color","#"+a["zalike-body-color"]).end().find(".stream-wood-zalike-close").css({color:"#"+a["zalike-title-font-color"]}).end().find(".stream-wood-zalike-title").text(t["zalike-title"]).css({color:"#"+a["zalike-title-font-color"],fontFamily:a["zalike-title-font"],fontSize:a["zalike-title-font-size"]+"px"}).end().find(".stream-wood-zalike-subtitle").text(t["zalike-subtitle"]).css({color:"#"+a["zalike-subtitle-font-color"],fontFamily:a["zalike-subtitle-font"],fontSize:a["zalike-subtitle-font-size"]+"px"}).end().find(".stream-wood-zalike-window-body-center").text(t["zalike-content"]).css({color:"#"+a["zalike-body-font-color"],fontFamily:a["zalike-body-font"],fontSize:a["zalike-body-font-size"]+"px"}).end().find(".stream-wood-zalike-window-footer a").attr("href","http://web.archive.org/web/20171014090326/https://streamwood.ru/zalike/?utm_source=consultant&utm_medium=self&utm_campaign="+location.hostname+"&utm_content="+this.settings.sessionId+"&utm_term=").end().appendTo("body"),s.ZalikePos.call(s),e(".stream-wood-zalike-window-head").click(function(){"0px"===e(".stream-wood-zalike-window").css("bottom")?(e(".stream-wood-zalike-close").fadeOut(),s.ZalikePos.call(s),s.setTimeout.call(s,"zalikeCloseTimer",function(){e(".stream-wood-zalike-window").removeClass("stream-wood-zalike-window-close"),s.showRecallButton()},500)):(e(".stream-wood-recall-btn").hide(),e(".stream-wood-zalike-close").fadeIn(),e(".stream-wood-zalike-window").animate({bottom:0},500),e(".stream-wood-zalike-window").addClass("stream-wood-zalike-window-close"))}),e("#vkAdd").click(function(e){e.preventDefault(),s.vkPost.apply(s,[t])}),-1!==["1228f413d9115cf060ba8b57c1165cba","d5cf016b411420f91b0af1c3cb5714de","950f74609a3b9680cf05e5a7b5665054","2dc85012f08d1101ef199acd6d66d82a","090f425e66c0513a70dc497e3677bc3f"].indexOf(s.settings.swDomainKey)&&e(".stream-wood-zalike-window .stream-wood-zalike-window-footer .stream-wood-zalike-window-footer-link").css("display","none")}},s.prototype.ZalikePos=function(){var t=e(".stream-wood-zalike-window-head").height(),s=e(".stream-wood-zalike-window").height()-t;e(".stream-wood-zalike-window").animate({bottom:-s},500)},s.prototype.webpushModalShow=function(){e(document.body).find(".wrapper").addClass("strmwd-blur");var t=e(n[this.settings.design["webpush-modal-type"]]);t.prependTo(document.body),"undefined"!=this.settings.design["webpush-title"]&&t.find("h2").html(this.settings.design["webpush-title"]),"undefined"!=this.settings.design["webpush-text"]&&t.find("p").html(this.settings.design["webpush-text"]),"undefined"!=this.settings.design["webpush-button-title"]&&t.find("button").html(this.settings.design["webpush-button-title"]),"undefined"!=this.settings.design["webpush-button-color"]&&(t.find("button").css("background-color","#"+this.settings.design["webpush-button-color"]),t.find(".img-wrap").css("background-color","#"+this.settings.design["webpush-button-color"])),"undefined"!=this.settings.design["webpush-title-font-family"]&&t.find("h2").css("font-family",this.settings.design["webpush-title-font-family"]),"undefined"!=this.settings.design["webpush-title-font-size"]&&t.find("h2").css("font-size",this.settings.design["webpush-title-font-size"]+"px"),"undefined"!=this.settings.design["webpush-text-font-family"]&&t.find("p").css("font-family",this.settings.design["webpush-text-font-family"]),"undefined"!=this.settings.design["webpush-text-font-size"]&&t.find("p").css("font-size",this.settings.design["webpush-text-font-size"]+"px"),"undefined"!=this.settings.design["webpush-button-font-family"]&&t.find("button").css("font-family",this.settings.design["webpush-button-font-family"]),"undefined"!=this.settings.design["webpush-button-font-size"]&&t.find("button").css("font-size",this.settings.design["webpush-button-font-size"]+"px"),"undefined"!=this.settings.design["webpush-button-font-color"]?(t.find("button").css("color","#"+this.settings.design["webpush-button-font-color"]),t.find(".img-wrap").css("background-image","url(https://clients.streamwood.ru/StreamWood/img/bgr/ring_"+this.settings.design["webpush-button-font-color"]+".png)")):t.find(".img-wrap").css("background-image","url(https://clients.streamwood.ru/StreamWood/img/bgr/ring_ffffff.png)"),this.webpushOnShow()},s.prototype.webpushModalHide=function(){e(document.body).find(".wrapper").removeClass("strmwd-blur"),e(document).find(".webpush-wrap").hide(),this.webpushOnClose()},s.prototype.webpushServiceWorkerCheck=function(){return"serviceWorker"in navigator&&"PushManager"in window},s.prototype.vkPost=function(t){var s=this,n=(screen.width-656)/2,i=(screen.height-377)/4;this.settings.zalikeOpened=!0,this.serviceWin=open(s.settings.serverUrl+"/zalikepost/"+s.settings.swDomainKey+"/"+s.settings.sessionId+"/?get=addPost","publish","width=656,height=377, top="+i+", left="+n+",resizable=yes,scrollbars=yes,status=yes"),e.getJSON(s.settings.serverUrl+"/zalikepost/?get=clickPost",{k:s.settings.swDomainKey,session_id:s.settings.sessionId},function(e){s.setInterval.call(s,"checkVk",function(){s.serviceWin.closed&&(s.checkVk.apply(s,[e,t]),s.deleteInterval.apply(s,["checkVk"]),s.settings.zalikeOpened=!1)},10)})},s.prototype.checkVk=function(t,s){e.getJSON(this.settings.serverUrl+"/zalikepost/?get=checkPost",{z_id:t.id},function(t){2===t.status&&e(".stream-wood-zalike-window-body").html('<div class="stream-wood-zalike-window-body-result">'+s["zalike-content-after"]+"</div>").fadeIn("slow")})},s.prototype.showZalike=function(){this.createZalike(this.settings.design)},s.prototype.updateSession=function(e){if(e)if(e!=this.getCookie(this.strings.sessionId)&&this.deleteCookie(this.strings.timeAll),"690e6de4e3e2c0916b6160d9959d156b"===this.settings.swKey)this.setCookie(this.strings.sessionId,e),this.settings.sessionId=e;else{var t=new Date;t.setHours(t.getHours()+20),this.setCookie(this.strings.sessionId,e,t),this.settings.sessionId=e}else this.deleteCookie(this.strings.sessionId),this.settings.sessionId=""},s.prototype.hideChat=function(){var t,s={};switch(t=e(".stream-wood-chat").stop().hide(),this.settings.design["anchor-position"]){case"top":s.marginTop=-t.outerHeight();break;case"left":s.marginLeft=-t.outerWidth();break;case"right":s.marginRight=-t.outerWidth();break;default:s.marginBottom=-t.outerHeight()}t.css(s)},s.prototype.hideBtn=function(){this.deleteInterval("btnTimer");var t={},s=e(".stream-wood-btn").stop().hide();switch(this.settings.design["anchor-position"]){case"top":t.marginTop=-s.outerHeight();break;case"left":t.marginLeft=-s.outerHeight();break;case"right":t.marginRight=-s.outerHeight();break;default:t.marginBottom=-s.outerHeight()}s.css(t)},s.prototype.hideInvitation=function(){var t=e(".stream-wood-invitation").stop().hide(),s={};switch(this.settings.design["anchor-position"]){case"top":s.marginTop=-t.outerHeight();break;case"left":s.marginLeft=-t.outerWidth();break;case"right":s.marginRight=-t.outerWidth();break;default:s.marginBottom=-t.outerHeight()}t.css(s),this.invitationOnClose()},s.prototype.hideNoReply=function(){var t=e(".stream-wood-noreply").stop().hide(),s={};switch(this.settings.design["anchor-position"]){case"top":s.marginTop=-t.outerHeight();break;case"left":s.marginLeft=-t.outerWidth();break;case"right":s.marginRight=-t.outerWidth();break;default:s.marginBottom=-t.outerHeight()}t.css(s),this.noreplyOnClose()},s.prototype.hideRecall=function(){var t=e(".stream-wood-recall-3"),s=this.settings.design["recall-settings"];if(void 0!==s["recall-position"]&&null!=s["recall-position"]){t.stop().show();var n={},i=e(".stream-wood-recall-side .stream-wood-recall-container").css("width"),o=parseInt(i.substr(0,i.length-2))+4;switch(parseInt(s["recall-position"])){case 1:n.marginLeft=-o,t.find(".stream-wood-recall-hide-right .recall-hide").addClass("recall-hide-close").removeClass("recall-hide-open");break;case 2:n.right=-o,t.find(".stream-wood-recall-hide-left .recall-hide").addClass("recall-hide-close").removeClass("recall-hide-open")}t.animate(n,1500,"easeOutExpo")}else t.hide();e("body>div").not("[class*=stream-wood-]").each(function(){e(this).removeClass("strmwd-blur")}),void 0!==s["recall-dark-all"]&&1==s["recall-dark-all"]&&e(".dark-cover-all").hide(),this.settings.invitationOpened?this.slideUpInvitation():this.settings.chatOpened?this.showChat():this.showBtn(),this.recallOnClose(),e(".strmwd-registrator-btn").show(),this.showRecallButton()},s.prototype.showRecallButton=function(){!this.settings.design["recall-on"]||this.settings.chatOpened||this.settings.invitationOpened||this.settings.generatorOpened||this.settings.feedbackOpened||this.settings.recallOpened||this.settings.registratorOpened||e(".stream-wood-recall-btn").appendTo(document.body).fadeIn(500)},s.prototype.showChat=function(){var t={};e(".strmwd-registrator-btn,.stream-wood-recall-btn").hide();var s=e(".stream-wood-chat");if(s.stop().appendTo(document.body).show(),e(window).height()<s.outerHeight()?(s.addClass("stream-wood-absolute"),this.settings.smallWindow=!0):(s.removeClass("stream-wood-absolute"),this.settings.smallWindow=!1),!this.settings.invitationOpened){switch(this.initBtnTimer(),this.settings.design["anchor-position"]){case"top":t.marginTop=0;break;case"left":this.settings.smallWindow&&(t.top=0),t.marginLeft=0;break;case"right":this.settings.smallWindow&&(t.top=0),t.marginRight=0;break;default:t.marginBottom=0}s.css(t)}},s.prototype.chatBtnCanShow=function(){var e=this.settings;return!(e.hideAnchor||"mobile"===e.device&&("mobile"!==e.device||e.design.hideOnMobile)||e.generatorOpened||e.recallOpened||101==e.tariff)},s.prototype.showBtn=function(){var t=this;if(this.chatBtnCanShow())if(!this.settings.hideOfflineAnchor||this.settings.manager||this.settings.managers||this.settings.departments){this.initBtnTimer();var s={},n=e(".stream-wood-btn").stop().show();switch(this.settings.design["anchor-position"]){case"top":s.marginTop=0;break;case"left":s.marginLeft=0;break;case"right":s.marginRight=0;break;default:s.marginBottom=0}t.settings.design["anchor-disable-animation"]?n.css(s):n.animate(s,1500,"easeOutBounce",function(){t.runTrigger.apply(t,["onaftershowbtn"])})}else this.hideBtn();else this.hideBtn()},s.prototype.showRecallMobile=function(t){var s=e(".stream-wood-recall-mobile");s.css("width",window.innerWidth+"px"),e(".strmwd-registrator-btn,.stream-wood-recall-btn").hide(),this.settings.generatorOpened||(this.settings.invitationOpened?this.slideDownInvitation():this.settings.chatOpened||this.settings.feedbackOpened?this.slideDown():this.hideBtn(),s.find(".sw-phone-container").show().end().find(".sw-phone-container-call").hide().end().find(".sw-recall-phone").addClass("sw-phone-empty").val(" "),s.show(),this.recallOnShow(),this.settings.recallAnimationIteration=0,void 0!==t&&e(".stream-wood-recall-2 .sw-recall-phone").val(t))},s.prototype.getRecallTitle=function(){var e=window.location.href.toLowerCase();e=e.replace(/^https?:\/\/(www\.)?/,"");var t=this.settings.design["recall-settings"].title_urls;return void 0!==t[e]&&t[e]},s.prototype.showRecall=function(t){var s=this,n=e(".stream-wood-recall-3");this.settings.invitationOpened?this.slideDownInvitation():this.settings.feedbackOpened?this.slideDown():this.hideBtn(),e(".stream-wood-recall-btn,.strmwd-registrator-btn").hide(),e("body>div").not("[class*=stream-wood-]").each(function(){e(this).addClass("strmwd-blur")});var i=n;i.appendTo(document.body);var o=!0;if(void 0!==s.settings.design["recall-settings"]&&null!=s.settings.design["recall-settings"]){var a=s.settings.design["recall-settings"];if(void 0!==a["recall-position"]&&null!=a["recall-position"]){var r=n.stop().show(),l={};switch(parseInt(a["recall-position"])){case 1:o=!1,l.marginLeft=0,n.find(".stream-wood-recall-hide-right .recall-hide").addClass("recall-hide-open").removeClass("recall-hide-close");break;case 2:o=!1,l.right=0,n.find(".stream-wood-recall-hide-left .recall-hide").addClass("recall-hide-open").removeClass("recall-hide-close")}r.animate(l,1500,"easeOutExpo")}else o=!0;void 0!==a["recall-dark-all"]&&1==a["recall-dark-all"]&&e(".dark-cover-all").show()}if(o){var c=window.innerHeight/2-i.height()/2;c<0&&(c=0),c+=e(document).scrollTop(),i.css("top",c+"px"),i.css("left","50%");var d=i.css("width"),h=parseInt(d.substr(0,d.length-2))/2;i.css("margin-left","-"+h+"px"),e(".stream-wood-recall-3").fadeIn(1e3)}this.recallOnShow(),void 0!==t&&n.find(".sw-recall-phone").val(t)},s.prototype.slideDownEnd=function(){this.hideChat(),this.showBtn(),this.settings.chatOpened=!1,this.deleteCookie(this.strings.opened),e(".strmwd-registrator-btn").show(),this.showRecallButton()},s.prototype.slideDown=function(){var t=this,s={};this.deleteTimeout("swTypeTimer");var n=e(".stream-wood-chat").stop();switch(this.settings.design["anchor-position"]){case"top":s.marginTop=-n.outerHeight();break;case"left":s.marginLeft=-n.outerWidth();break;case"right":s.marginRight=-n.outerWidth();break;default:s.marginBottom=-n.outerHeight()}this.settings.feedbackOpened&&this.feedbackOnClose(),n.animate(s,1e3,"easeOutExpo",function(e){n.hide(),t.slideDownEnd.apply(t,[e])}),this.settings.manager.key&&this.IOemit("swSessionEndType",{visor:this.settings.superVisorMode})},s.prototype.slideDownInvitation=function(){var t=this,s=e(".stream-wood-invitation").stop(),n={};switch(this.settings.design["anchor-position"]){case"top":n.marginTop=-s.outerHeight();break;case"left":n.marginLeft=-s.outerWidth();break;case"right":n.marginRight=-s.outerWidth();break;default:n.marginBottom=-s.outerHeight()}s.animate(n,1500,"easeOutExpo",function(){s.hide(),t.showBtn.call(t)}),this.invitationOnClose(),e(".strmwd-registrator-btn").show(),this.showRecallButton()},s.prototype.slideDownNoReply=function(){var t=this,s=e(".stream-wood-noreply").stop(),n={};switch(this.settings.design["anchor-position"]){case"top":n.marginTop=-s.outerHeight();break;case"left":n.marginLeft=-s.outerWidth();break;case"right":n.marginRight=-s.outerWidth();break;default:n.marginBottom=-s.outerHeight()}s.animate(n,1500,"easeOutExpo",function(){s.hide(),t.slideUp.call(t)}),this.noreplyOnClose(),e(".strmwd-registrator-btn").show(),this.showRecallButton()},s.prototype.slideUp=function(){if(!this.settings.invitationOpened){var t={};e(".strmwd-registrator-btn,.stream-wood-recall-btn").hide();var s=e(".stream-wood-chat").stop().appendTo(document.body).show();switch(e(window).height()<s.outerHeight()?(s.addClass("stream-wood-absolute"),this.settings.smallWindow=!0):(s.removeClass("stream-wood-absolute"),this.settings.smallWindow=!1),this.hideBtn(),this.settings.chatOpened=!0,this.setCookie(this.strings.opened,1),this.initBtnTimer(),this.settings.design["anchor-position"]){case"top":t.marginTop=0;break;case"left":this.settings.smallWindow&&(t.top=0),t.marginLeft=0;break;case"right":this.settings.smallWindow&&(t.top=0),t.marginRight=0;break;default:t.marginBottom=0}s.animate(t,1e3,"easeOutExpo"),e(".stream-wood-chat .sw-messages-list .sw-ml-item").length&&e(".stream-wood-chat .sw-messages-list").scrollTop(100*e(".stream-wood-chat .sw-messages-list .sw-ml-item").length),this.settings.feedback&&this.feedbackOnShow()}},s.prototype.slideUpInvitation=function(){if(!(this.settings.chatOpened||this.settings.generatorOpened||this.settings.recallOpened||this.settings.zalikeOpened)){this.hideChat(),this.hideBtn(),e(".strmwd-registrator-btn,.stream-wood-recall-btn").hide();var t=e(".stream-wood-invitation").stop().show(),s={};switch(this.settings.design["anchor-position"]){case"top":s.marginTop=0;break;case"left":s.marginLeft=0;break;case"right":s.marginRight=0;break;default:s.marginBottom=0}t.animate(s,1500,"easeOutExpo"),this.playBeep(),this.invitationOnShow()}},s.prototype.slideUpNoReply=function(){this.hideChat(),this.hideBtn(),this.hideInvitation(),e(".strmwd-registrator-btn").hide(),e(".stream-wood-recall-btn").hide();var t=e(".stream-wood-noreply").stop().show(),s={};switch(this.settings.design["anchor-position"]){case"top":s.marginTop=0;break;case"left":s.marginLeft=0;break;case"right":s.marginRight=0;break;default:s.marginBottom=0}t.animate(s,1500,"easeOutExpo"),this.noreplyOnShow()},s.prototype.createChat=function(){var t,s=this,i=e(n.chat);i.find(".sw-close").attr("title",this.languages[this.language].swHideText).unbind("click").click(function(e){s.closeSwBtn.apply(s,[e])}),i.find(".sw-sound").attr("title"," ").unbind("click").click(function(e){s.toggleSound.apply(s,[e])}),i.find(".good").attr("title",this.languages[this.language].swSetRatingText),i.find(".bad").attr("title",this.languages[this.language].swSetRatingText),i.find(".good, .bad").unbind("click").click(function(){s.setRating.apply(s,[this])}).end().find("#file_upload").change(function(){s.uploadImage.apply(s)}).end().find(".sw-send-btn-text").text(this.languages[this.language].sendButtonText).end().find(".sw-error").hide().end().appendTo("body"),(t=-1!=["c3c30465451fd3090a06bb1fc3abd18c","7f57e7e9f27081eee01943b00b84518c","1228f413d9115cf060ba8b57c1165cba","8925e776b83854ce9d6b310368526507","4d843007f63f819971f20dd8f3ef0c0c","1d8003bb9ca6857b54bd897325ed73d3","18d55a8d0fed148dee33629c273d13e4","f10ad5c9820dda6704a3dd996da51ec7","8a9394a28909c5a214ce3d293924960b","9921c20772547808a802199268033e4d","887b62cfe500b7b283045d39175638c1","22a44a7dee4e5dd80b71acea47583e4b","cfe9d61cefa4e917a526f369761e63ed","eff8068701a98cce42cfb69777ae7327","991aab5c9509da43668a7d5a4b6ac3c8","78b7a303167842fb5b2310b43a06ff7c","d2fc8f56dc0fc76022a0caf249c7f9d6","e663b1979c0be8f3100e1512afad3bbc","b1f72c6e55ebea13f5d77761a45121d6","d106934787d0d658ad05fe749d4c0abb","e8c31a18732fccb537c982e17a8f11b9","554b398815fa26befdd16fc09ddbb5e2","70088a81da2eaea349933c5ceeaf43db","41466099bb196e76fbaca16cbb691ea5","ab033a1558c219643bc0a3e8ea872f03","c96885ba6735c3f24e66778ab83d26fd","97ecc1cd5d204375179198d498e39a8a","66530c879f2bb4dca2c952f4082ac8c0","2f46f8358b77bec4da5e5a2e21d935e9","d5cf016b411420f91b0af1c3cb5714de","6f4c1005416e5b21bb462c10efdcb390","56878a1fe62a4a8b86b14360b2246c89","c180063c89b7e98bdddfba0726af1b61","71c6a45453019c32bb21565ffccc62a7","ca32bfaba01cab6a67040a17e1ced221","090f425e66c0513a70dc497e3677bc3f","7f906d036cb7687f45fc1cba98c54e2c","950f74609a3b9680cf05e5a7b5665054","2dc85012f08d1101ef199acd6d66d82a","395b3ce453d13dca06b338785bbe8d0c","4d4710ee6f34a4b0269de9a480ed7e6e","c2cb16d6b4ace2d25f7be3549c45fbeb","082ed58ac4b628b3369dc3663a9fdffe","68fde4efe51d74f59c2e4ffb24c10b79","0da9fb26e8c9c83a3ee113aa8c6de6b7","5107e309e6b385d66cd361fedd5ef9d6"].indexOf(this.settings.swDomainKey))||e("<div>").addClass("sw-copyright").html(' <a target="_blank" class="sw-copy" href="http://web.archive.org/web/20171014090326/https://streamwood.ru/?utm_source=consultant&utm_medium=self&utm_campaign='+location.hostname+"&utm_content="+this.settings.sessionId+'&utm_term=">'+this.languages[this.language].swWorkedOnText+" StreamWood <span>"+this.settings.version+"</span></a>").appendTo(".stream-wood-chat .sw-container"),t||this.settings.hideCloseBtn||e("<a>").addClass("sw-close-down").attr("title","").appendTo(".stream-wood-chat .sw-copyright").unbind("click").click(function(e){s.closeSwBtn.apply(s,[e])}),this.settings.hideCloseBtn&&(i.find(".sw-close").unbind("*").remove(),i.find(".sw-sound").css("right",0))},s.prototype.uploadImage=function(){var t=this,s=new FormData;s.append("qqfile",e("#file_upload")[0].files[0]),e.ajax({type:"POST",url:t.settings.serverUrl+"/upload/",data:s,crossDomain:!0,processData:!1,contentType:!1,dataType:"json",success:function(e){if(!0===e.success){var s="http://web.archive.org/web/20171014090326/https://files.streamwood.ru/chat/"+e.name+"."+e.ext;t.genMessage.apply(t,[s]),t.sendMessage.apply(t,[s])}}})},s.prototype.genMessage=function(t){var s=this,n=[],i={},o=new Date;i.message=t,i.d=o.getDate(),i.m=o.getMonth()+1,i.y=o.getFullYear(),i.hour=o.getHours(),i.min=o.getMinutes(),i.wait=!0,n.push(i),s.appendMessages.apply(s,[n]),e(".stream-wood-chat .sw-messages-list").scrollTop(100*e(".stream-wood-chat .sw-messages-list .sw-ml-item").length),e(".stream-wood-chat .sw-messages-list .sw-ml-item-type").remove()},s.prototype.sendMessage=function(t){var s=this,n=s.settings.clientName;n||(n=s.languages[s.language].swGuestNameText);var i={swClientName:n,message:t,managerId:s.settings.manager.id,managerKey:s.settings.manager.key,hostKey:s.settings.swDomainKey,visor:s.settings.superVisorMode,ip:s.settings.ipAddr};1==s.settings.manager.from_mobile&&0==s.settings.manager.status?e.ajax({type:"POST",url:s.settings.serverUrl+"/api/?Action=cloudMessage&swDomainKey="+s.settings.swDomainKey+"&swKey="+s.settings.swKey+"&swSessionId="+s.settings.sessionId+"&callback=?",data:i,cache:!1,dataType:"json",success:function(t){e(".stream-wood-chat .sw-messages-list .sw-ml-item").removeClass("sw-ml-item-wait")}}):s.IOemit.apply(s,["swSendMessageFromSession",i])},s.prototype.createInvitation=function(){var t=this,s=this.appendContactInfo(),i=e(n.invitation);i.find("dt").text(this.languages[this.language].swYouMessageText),+this.settings.design.no_personal_data||n.personal_data(this.settings.design.personal_data_text).appendTo(i.find(".sw-newmessage")),+this.settings.design.advertising_agree&&n.advertising_agree(this.settings.design.advertising_agree_url).appendTo(i.find(".sw-newmessage")),s&&i.find(".sw-newmessage").prepend(s),i.find("textarea").unbind("keypress").keypress(function(t){!t.ctrlKey||13!=t.keyCode&&13!=t.which&&10!=t.keyCode&&10!=t.which||e(".stream-wood-chat .sw-send-btn").click()}).end().find(".sw-cancel-btn").text(this.languages[this.language].swCancelButtonText).unbind("click").click(function(){return t.slideDownInvitation.call(t),!1}).end().find(".jssw-send-btn").text(this.languages[this.language].swQuestButtonText).unbind("click").click(function(){if(!1===t.startDialogContactChooser.call(t,".stream-wood-invitation"))return!1;var s=e(".stream-wood-invitation"),n=s.find(".sw-message");if(n.val()){var i=e(".stream-wood-chat");s.find(".sw-phone").length>0&&i.find(".sw-phone").val(s.find(".sw-phone").val()),s.find(".sw-email").length>0&&i.find(".sw-email").val(s.find(".sw-email").val()),s.find(".sw-contact-type").length>0&&i.find(".sw-contact-type").val(s.find(".sw-contact-type").val()),i.find(".sw-message").val(n.val()),i.find(".sw-send-btn").click(),t.hideInvitation.call(t),t.slideUp.call(t)}else n.focus();return!1}).end().appendTo("body"),void 0!==this.settings.design.sendContact&&this.appendContactInfoProperties(e(".stream-wood-invitation"))},s.prototype.createGenerator=function(){var t,s,i,o=this;t=this.settings.design["generator-title"]||this.languages[this.language].swGeneratorTitleText,s=this.settings.design["generator-content"]||this.languages[this.language].swNoReplyContactsText,this.settings.design["generator-id"]?this.settings.design["generator-img"]&&(this.settings.design["generator-img"].length<10&&(this.settings.design["generator-img"]="generator."+this.settings.design["generator-img"]),i=this.settings.imgServerUrl+"/host/"+this.settings.swDomainKey+"/"+this.settings.design["generator-id"]+"/"+this.settings.design["generator-img"]):this.settings.design["generator-img"]?(this.settings.design["generator-img"].length<10&&(this.settings.design["generator-img"]="generator."+this.settings.design["generator-img"]),i=this.settings.imgServerUrl+"/host/"+this.settings.swDomainKey+"/common/"+this.settings.design["generator-img"]):i=this.settings.serverUrl+"/img/generator-picture.png";var a=e(n.generator);a.find(".generator-title").text(t),a.appendTo(document.body),this.settings.design["generator-imgoff"]&&1==this.settings.design["generator-imgoff"]||e('<img class="sw-action" src="'+i+'" width="360" height="200" alt="">').appendTo(".stream-wood-generator .sw-container .sw-manager"),this.settings.design["generator-counteroff"]&&1==this.settings.design["generator-counteroff"]?e("<div>").addClass("date").appendTo(".stream-wood-generator .sw-container .sw-manager"):(e("<div>").addClass("gen-counter").append(e('<span class="gen-counter-text sw-generator-day" id="streamwood-generator-day">').text("00")).append(e('<span class="gen-counter-text sw-generator-hour" id="streamwood-generator-hour">').text("00")).append(e('<span class="gen-counter-text sw-generator-min" id="streamwood-generator-min">').text("00")).append(e('<span class="gen-counter-text sw-generator-sec" id="streamwood-generator-sec">').text("00")).appendTo(".stream-wood-generator .sw-container .sw-manager"),e("<div>").addClass("gen-date").append(e('<div class="gen-date-text sw-generator-date-day">').text(this.languages[this.language].swGenDaysText0)).append(e('<div class="gen-date-text sw-generator-date-hour">').text(this.languages[this.language].swGenHoursText0)).append(e('<div class="gen-date-text sw-generator-date-min">').text(this.languages[this.language].swGenMinutesText0)).append(e('<div class="gen-date-text sw-generator-date-sec">').text(this.languages[this.language].swGenSecondsText0)).appendTo(".stream-wood-generator .sw-container .sw-manager"));var r;r=void 0!==this.settings.design["generator-contact-type"]&&("1"==this.settings.design["generator-contact-type"]||"3"==this.settings.design["generator-contact-type"])?this.languages[this.language].swGenEmailText:this.languages[this.language].swGenPhoneText,"3"==this.settings.design["generator-contact-type"]?e("<div>").addClass("sw-send-group").append(e('<p class="sw-action-text">').html(s)).append(e('<input type="text" class="sw-gen-name sw-gen-name-margin">').val(this.languages[this.language].swGenNameText)).append(e('<div class="sw-error sw-name-error">').hide()).append(e('<input type="text" class="sw-gen-email">').val(r)).append(e('<a class="sw-send-btn sw-append-btn">')).append(e('<input type="text" class="sw-gen-phone">').val(this.languages[this.language].swGenPhoneText)).append(e('<a class="sw-send-btn sw-cancel-btn">')).append(e('<div class="sw-error sw-email-error">').hide()).appendTo(".stream-wood-generator .sw-container"):e("<div>").addClass("sw-send-group").append(e('<p class="sw-action-text">').html(s)).append(e('<input type="text" class="sw-gen-name">').val(this.languages[this.language].swGenNameText)).append(e('<a class="sw-send-btn sw-append-btn">')).append(e('<div class="sw-error sw-name-error">').hide()).append(e('<input type="text" class="sw-gen-email">').val(r)).append(e('<a class="sw-send-btn sw-cancel-btn">')).append(e('<div class="sw-error sw-email-error">').hide()).appendTo(".stream-wood-generator .sw-container");var l=a.find(".sw-send-group");if(void 0!==this.settings.design["generator-user-field"]){var c=this.settings.design["generator-user-field"];l.find(".sw-cancel-btn").after(e('<input type="text" class="sw-gen-user-field">').val(c)),l.find(".sw-gen-user-field").addClass("sw-gen-user-field-margin"),l.find(".sw-gen-user-field").unbind("focus").focus(function(){e(this).val()==c&&(e(this).val(""),e(this).addClass("sw-gen-focus"))}).unbind("blur").blur(function(){""==e(this).val()&&(e(this).val(c),e(this).removeClass("sw-gen-focus"))})}void 0!==this.settings.design["generator-is-close-btn"]&&"1"==this.settings.design["generator-is-close-btn"]&&(e(".stream-wood-generator").append('<a href="javascript:void(0)" class="sw-generator-close-btn">'),e(".stream-wood-generator .sw-generator-close-btn").unbind("click").bind("click",function(){return o.hideGenerator.call(o),o.generatorInitTimer.call(o),!1})),l.find(".sw-send-btn").append(e('<span class="sw-yes-button-span">').text(this.languages[this.language].swGenBtnYesText)),l.find(".sw-cancel-btn").html(""),l.find(".sw-cancel-btn").append(e('<span class="sw-no-button-span">').text(this.languages[this.language].swGenBtnNoText));var d=this.languages[this.language].swGenNameText,h=r;if(l.find(".sw-gen-name").unbind("focus").focus(function(){e(this).val()==d&&(e(this).val(""),e(this).addClass("sw-gen-focus"))}).unbind("blur").blur(function(){""==e(this).val()&&(e(this).val(d),e(this).removeClass("sw-gen-focus"))}),l.find(".sw-gen-email").unbind("focus").focus(function(){e(this).val()==h&&(e(this).val(""),e(this).addClass("sw-gen-focus"))}).unbind("blur").blur(function(){""==e(this).val()&&(e(this).val(h),e(this).removeClass("sw-gen-focus"))}),void 0!==this.settings.design["generator-contact-type"]&&"2"!=this.settings.design["generator-contact-type"]||a.find(".sw-gen-email").addClass("sw-gen-phone"),l.find(".sw-gen-phone").val("+7").unbind("focus").focus(function(){"+7"==e(this).val()&&(e(this).val("+7"),e(this).addClass("sw-gen-focus"))}).unbind("blur").blur(function(){""!=e(this).val()&&"+7"!=e(this).val()||(e(this).val("+7"),e(this).removeClass("sw-gen-focus"))}),"442e17d841a0ccc5e351037ae06c02a5"==this.settings.swDomainKey&&(l.remove(),"3"==this.settings.design["generator-contact-type"]?e("<div>").addClass("sw-send-group").append(e('<p class="sw-action-text">').html(s)).append(e('<span class="sw-name-span sw-fields">').html(" ")).append(e('<input type="text" class="sw-gen-name">')).append(e('<div class="sw-error sw-name-error">').hide()).append(e('<span class="sw-email-span sw-fields">').html(" ")).append(e('<input type="text" class="sw-gen-email">')).append(e('<div class="sw-error sw-email-error">').hide()).append(e('<span class="sw-phone-span sw-fields">').html(" ")).append(e('<input type="text" class="sw-gen-phone">')).append(e('<a class="sw-send-btn sw-append-btn">')).append(e('<a class="sw-send-btn sw-cancel-btn">')).appendTo(".stream-wood-generator .sw-container"):e("<div>").addClass("sw-send-group").append(e('<p class="sw-action-text">').html(s)).append(e('<span class="sw-name-span sw-fields">').html(" ")).append(e('<input type="text" class="sw-gen-name">')).append(e('<div class="sw-error sw-name-error">').hide()).append(e('<span class="sw-email-span sw-fields">').html(" ")).append(e('<input type="text" class="sw-gen-email">')).append(e('<div class="sw-error sw-email-error">').hide()).append(e('<a class="sw-send-btn sw-append-btn">')).append(e('<a class="sw-send-btn sw-cancel-btn">')).appendTo(".stream-wood-generator .sw-container"),l.find(".sw-send-btn").append(e('<span class="sw-yes-button-span">').text(this.languages[this.language].swGenBtnYesText)),l.find(".sw-cancel-btn").html(""),l.find(".sw-cancel-btn").append(e('<span class="sw-no-button-span">').text(this.languages[this.language].swGenBtnNoText)),void 0!==this.settings.design["generator-contact-type"]&&"2"!=this.settings.design["generator-contact-type"]||a.find(".sw-gen-email").addClass("sw-gen-phone")),-1!==["a13c9932a08c907c4f90189f99e40600","a1c7cd5b7eb41ca89ba4f3abe6b8283c","69b6e178e65139743c95b786c73c00ac","d8afb11cf9b13aeccaa7a9f29b5b8565","3d8f685730eae076cb5907197e13a1fa"].indexOf(this.settings.swDomainKey)&&(a.find(".sw-container .sw-generator-title").remove(),e("<div>").addClass("sw-generator-title").append(e('<span class="generator-title">').html(this.settings.design["generator-title"])).prependTo(".stream-wood-generator .sw-container .sw-send-group")),-1!==["a225e0ca7a08f3b5fceece9e8c4eb863","dfdf2edaf369b9f632859efc04099a95","c4fd4147a0034c8fcbe637681cb8d22a","a58d0a1d18bc815abca7a9c07970d871"].indexOf(this.settings.swDomainKey)&&(l.find(".sw-append-btn").prepend(e('<img class="germanika-tr germanika-tr-app" src="http://web.archive.org/web/20171014090326/https://clients.streamwood.ru/StreamWood/img/bgr/germanika-tr.png" width="4" height="6" alt="">')),l.find(".sw-cancel-btn").prepend(e('<img class="germanika-tr" src="http://web.archive.org/web/20171014090326/https://clients.streamwood.ru/StreamWood/img/bgr/germanika-tr.png" width="4" height="6" alt="">')),+this.settings.design["generator-no-personal-data"]&&l.find(".sw-cancel-btn").css("bottom","105px"),void 0===this.settings.design["generator-user-field"]&&l.find(".sw-cancel-btn").css("bottom","88px")),void 0!==this.settings.design["generator-choice-department"]&&"1"==this.settings.design["generator-choice-department"]){var u='<select name="sw-select-department" class="sw-select-department">';void 0!==this.settings.design["generator-choice-department-required"]&&"1"==this.settings.design["generator-choice-department-required"]&&(u+='<option value="">'+this.languages[this.language].swChangeDepText+"</option>"),e(this.settings.generatorDepartments).each(function(){u+='<option value="'+this.id+'">'+this.name+"</option>"}),u+="</select>",e("<div>").addClass("sw-generator-departments").html(u).appendTo(".stream-wood-generator .sw-container"),e('<div class="sw-error sw-department-error">').hide().appendTo(".stream-wood-generator .sw-send-group")}if(!+this.settings.design["generator-no-personal-data"]){var p=a.find(".sw-container div:last"),g=n.personal_data(this.settings.design["generator-personal-data-text"]);p.hasClass("sw-copyright")?p.before(g):p.after(g)}if(+this.settings.design["generator-advertising-agree"]){var p=a.find(".sw-container div:last"),f=n.advertising_agree(this.settings.design["generator-advertising-agree-url"]);p.hasClass("sw-copyright")?p.before(f):p.after(f)}var m=["70088a81da2eaea349933c5ceeaf43db","1228f413d9115cf060ba8b57c1165cba","8925e776b83854ce9d6b310368526507","ec4c5521d68de1f76b8dda4b3ea1231e","b8a31aa5a7b0e8ca90079b7648da4713","56878a1fe62a4a8b86b14360b2246c89","c180063c89b7e98bdddfba0726af1b61","50d38bab71d09de6712798db3e121352","090f425e66c0513a70dc497e3677bc3f","10b98774420561a621eda8af7bc2d2f0","950f74609a3b9680cf05e5a7b5665054","2dc85012f08d1101ef199acd6d66d82a","e9f8f7e4767b5f93d5be140d689615d0","ac69ec82c686b89089a840ff39f260f2","328d59cc4dab1e9fc667092f421eea35","bf4af0533938f41fea2dda31bfdfd109","b39e1d19b99802672696d51bf6886efc"];-1===m.indexOf(o.settings.swDomainKey)&&e("<div>").addClass("sw-copyright").html(' <a target="_blank" class="sw-copy" href="http://web.archive.org/web/20171014090326/https://streamwood.ru/?utm_source=generator&utm_medium=self&utm_campaign='+location.hostname+"&utm_content="+this.settings.sessionId+'&utm_term=">'+this.languages[this.language].swWorkedOnText+" StreamWood <span>"+this.settings.version+"</span></a>").appendTo(".stream-wood-generator .sw-container"),l.find(".sw-gen-phone").unbind("keydown").keydown(function(t){e(this).hasClass("sw-gen-phone")&&o.checkPhoneKeyDownForRecall.apply(o,[t])}).unbind("keyup").keyup(function(t){e(this).hasClass("sw-gen-phone")&&o.checkPhoneKeyUpForRecall.apply(o,[t])}),l.find(".sw-send-btn").unbind("click").click(function(e){o.generatorSendButtonClick.apply(o,[e])}),l.find(".sw-cancel-btn").unbind("click").click(function(){return o.hideGenerator.call(o),!1}),this.applyGeneratorSettings();var w;w=this.getCookie(this.strings.genCountDown)?new Date(this.getCookie(this.strings.genCountDown)):new Date,w=this.getDateToGenerator(w);var v=new Date;this.getCookie(this.strings.genActionEnd)?w!=new Date(this.getCookie(this.strings.genActionEnd))&&(this.deleteCookie(this.strings.genActionEnd),this.deleteCookie(this.strings.genCountDown),w=this.getDateToGenerator(v),this.setCookie(this.strings.genActionEnd,w,w),this.setCookie(this.strings.genCountDown,new Date,w)):(this.setCookie(this.strings.genActionEnd,w,w),this.setCookie(this.strings.genCountDown,new Date,w)),e.browser.msie&&parseInt(e.browser.version)<9?this.settings.design["generator-show"]:this.settings.design["generator-show"]&&!this.getCookie(this.strings.generatorDisabled)&&(this.settings.generatorEndTime=w,-1!==(m=["7cb4c9b7c815cfc541bb67259baa6849","ab6e08353d59b3f56e2d08c762a87aaa","c8978ab128115641453c32debb02b725","4d56e1e5cb39c059f92b6df23dc583f3","0aa3c73358c95ee16e5a589c54b320de","5ac292e3bf0d0ce6f5ec42b7a3519063"]).indexOf(o.settings.swDomainKey)?"mobile"!=this.settings.device&&this.generatorInitTimer():this.generatorInitTimer())},s.prototype.createNewVersionGenerator=function(){var t,s,i=this;t=this.settings.design["generator-title"]||this.languages[this.language].swGeneratorTitleText,s=this.settings.design["generator-content"]||this.languages[this.language].swNoReplyContactsText;var o=e(n.generator_new);if(o.appendTo("body"),o.find(".generator-title-span").text(t),o.find(".stream-wood-generator-action-text").text(s),void 0!==this.settings.design["generator-title-off"]&&"1"==this.settings.design["generator-title-off"]&&(this.settings.design["generator-settings"]["gen-wallpaper"]?o.find(".generator-title-span").hide():o.find(".stream-wood-generator-title").hide()),void 0!==this.settings.design["generator-img"]){var a=this.settings.imgServerUrl+"/host/"+this.settings.swDomainKey+"/"+this.settings.design["generator-id"]+"/gen-action."+this.settings.design["generator-img"];a+="?"+(this.settings.design.updated_at||""),o.find(".stream-wood-generator-action-img").css("background-image","url("+a+")")}if(void 0!==this.settings.design["generator-imgoff"]&&"1"==this.settings.design["generator-imgoff"]&&o.find(".stream-wood-generator-action-img").hide(),void 0!==this.settings.design["generator-counteroff"]&&"1"==this.settings.design["generator-counteroff"]&&(o.find(".stream-wood-generator-counter").hide(),o.find(".stream-wood-generator-counter-text-box").hide()),void 0!==this.settings.design["generator-content-title"]&&o.find(".stream-wood-generator-action-title").text(this.settings.design["generator-content-title"]),void 0!==this.settings.design["generator-yes-btn-text"]&&o.find(".stream-wood-generator-send-btn").text(this.settings.design["generator-yes-btn-text"]),void 0!==this.settings.design["generator-no-btn-text"]&&o.find(".stream-wood-generator-cancel-btn").text(this.settings.design["generator-no-btn-text"]),void 0!==this.settings.design["generator-contact-type"]&&("2"==this.settings.design["generator-contact-type"]?(o.find(".stream-wood-generator-client-data .sw-gen-phone").addClass("sw-gen-email"),o.find(".stream-wood-generator-client-data .sw-gen-email").val(this.languages[this.language].swGenEmailText),o.find(".stream-wood-generator-client-data .sw-gen-email").removeClass("sw-gen-phone")):"3"==this.settings.design["generator-contact-type"]&&(e("<div>").addClass("stream-wood-generator-client-email").append(e('<input type="text" class="sw-gen-email stream-wood-generator-input">').val(this.languages[this.language].swGenEmailText)).insertAfter(o.find(".sw-phone-error")),o.find(".stream-wood-generator-client-data").append('<div class="sw-error sw-email-error" style="display: none;">'))),void 0!==this.settings.design["generator-user-field"]){var r=this.settings.design["generator-user-field"];e("<div>").addClass("stream-wood-generator-client-user-field").append(e('<input type="text" class="sw-gen-user-field stream-wood-generator-input">').val(r)).appendTo(".stream-wood-generator-2 .stream-wood-generator-client-data"),o.find(".stream-wood-generator-client-data .sw-gen-user-field").unbind("focus").focus(function(){e(this).val()==r&&(e(this).val(""),e(this).addClass("sw-gen-focus"))}).unbind("blur").blur(function(){""==e(this).val()&&(e(this).val(r),e(this).removeClass("sw-gen-focus"))})}void 0!==this.settings.design["generator-is-close-btn"]&&"1"==this.settings.design["generator-is-close-btn"]?o.find(".stream-wood-generator-close").hide():o.find(".stream-wood-generator-close").unbind("click").bind("click",function(){return i.hideGenerator.call(i),!1});var l=this.languages[this.language].swGenNameText;o.find(".stream-wood-generator-client-data .sw-gen-name").unbind("focus").focus(function(){e(this).val()==l&&(e(this).val(""),e(this).addClass("sw-gen-focus"))}).unbind("blur").blur(function(){""==e(this).val()&&(e(this).val(l),e(this).removeClass("sw-gen-focus"))});this.languages[this.language].swGenPhoneText;if(o.find(".stream-wood-generator-client-data .sw-gen-phone").val("+7").unbind("focus").focus(function(){"+7"==e(this).val()&&(e(this).val("+7"),e(this).addClass("sw-gen-focus"))}).unbind("blur").blur(function(){""!=e(this).val()&&"+7"!=e(this).val()||(e(this).val("+7"),e(this).removeClass("sw-gen-focus"))}),"2"==this.settings.design["generator-contact-type"]||"3"==this.settings.design["generator-contact-type"]){var c=this.languages[this.language].swGenEmailText;o.find(".stream-wood-generator-client-data .sw-gen-email").unbind("focus").focus(function(){e(this).val()==c&&(e(this).val(""),e(this).addClass("sw-gen-focus"))}).unbind("blur").blur(function(){""==e(this).val()&&(e(this).val(c),e(this).removeClass("sw-gen-focus"))})}if(void 0!==this.settings.design["generator-choice-department"]&&"1"==this.settings.design["generator-choice-department"]){var d='<select name="sw-select-department" class="sw-select-department stream-wood-generator-select">';void 0!==this.settings.design["generator-choice-department-required"]&&"1"==this.settings.design["generator-choice-department-required"]&&(d+='<option value="">'+this.languages[this.language].swChangeDepText+"</option>"),e(this.settings.generatorDepartments).each(function(){d+='<option value="'+this.id+'">'+this.name+"</option>"}),d+="</select>",e("<div>").addClass("stream-wood-generator-departments").html(d).appendTo(".stream-wood-generator-2 .stream-wood-generator-client-data").append(e('<div class="sw-error sw-department-error">').hide())}+this.settings.design["generator-no-personal-data"]||o.find(".stream-wood-generator-client-data").append(n.personal_data(this.settings.design["generator-personal-data-text"])),+this.settings.design["generator-advertising-agree"]&&o.find(".stream-wood-generator-client-data").append(n.advertising_agree(this.settings.design["generator-advertising-agree-url"])),-1!==["090f425e66c0513a70dc497e3677bc3f","950f74609a3b9680cf05e5a7b5665054","2dc85012f08d1101ef199acd6d66d82a","e9f8f7e4767b5f93d5be140d689615d0","ac69ec82c686b89089a840ff39f260f2","b39e1d19b99802672696d51bf6886efc","bf4af0533938f41fea2dda31bfdfd109","1228f413d9115cf060ba8b57c1165cba","328d59cc4dab1e9fc667092f421eea35"].indexOf(i.settings.swDomainKey)&&o.find(".stream-wood-generator-copyright").hide(),o.find(".stream-wood-generator-client-data  .sw-gen-phone").unbind("keydown").keydown(function(t){e(this).hasClass("sw-gen-phone")&&i.checkPhoneKeyDownForRecall.apply(i,[t])}).unbind("keyup").keyup(function(t){e(this).hasClass("sw-gen-phone")&&i.checkPhoneKeyUpForRecall.apply(i,[t])}),o.find(".stream-wood-generator-client-data .stream-wood-generator-send-btn").unbind("click").click(function(e){i.generatorNewVersionSendButtonClick.apply(i,[e])}),o.find(".stream-wood-generator-client-data .stream-wood-generator-cancel-btn").unbind("click").click(function(){return i.hideGenerator.call(i),!1}),this.applyNewVersionGeneratorSettings();var h;h=this.getCookie(this.strings.genCountDown)?new Date(this.getCookie(this.strings.genCountDown)):new Date,h=this.getDateToGeneratorNew(h);var u=new Date;if(this.getCookie(this.strings.genActionEnd)?h!=new Date(this.getCookie(this.strings.genActionEnd))&&(this.deleteCookie(this.strings.genActionEnd),this.deleteCookie(this.strings.genCountDown),h=this.getDateToGeneratorNew(u),this.setCookie(this.strings.genActionEnd,h,h),this.setCookie(this.strings.genCountDown,new Date,h)):(this.setCookie(this.strings.genActionEnd,h,h),this.setCookie(this.strings.genCountDown,new Date,h)),e.browser.msie&&parseInt(e.browser.version)<9)this.settings.design["generator-show"];else if(this.settings.design["generator-show"]&&!this.getCookie(this.strings.generatorDisabled)){this.settings.generatorEndTime=h;var p=new Date,g=!0;void 0!==this.settings.design["generator-hide-when-timer-end"]&&1==parseInt(this.settings.design["generator-hide-when-timer-end"])&&h<p&&(g=!1),g&&this.generatorInitTimer()}},s.prototype.createRecallVersion3=function(){for(var s=this,i=["10c326c280d416cbeb98a755b7bc396f","bd15fb1496b4d19d2d72fae0198da1e9","a1c7cd5b7eb41ca89ba4f3abe6b8283c"],o=0,a=0;a<i.length;a++)if(i[a]==s.settings.swDomainKey){o++;break}var r=n.recallcenter;if(void 0!==s.settings.design["recall-settings"]&&null!=s.settings.design["recall-settings"]){var l=s.settings.design["recall-settings"];!l["recall-position"]||1!=parseInt(l["recall-position"])&&2!=parseInt(l["recall-position"])||(r=n.recallside)}e(r).find(".stream-wood-recall-close").unbind("click").bind("click",function(){return s.hideRecall.call(s),s.showBtn.call(s),!1}).end().find(".stream-wood-recall-hide-left").unbind("click").bind("click",function(){return s.settings.recallOpened?(s.hideRecall.call(s),s.showBtn.call(s)):(s.settings.recallSource="button",s.showRecall.call(s)),!1}).end().find(".stream-wood-recall-hide-right").unbind("click").bind("click",function(){return s.settings.recallOpened?(s.hideRecall.call(s),s.showBtn.call(s)):(s.settings.recallSource="button",s.showRecall.call(s)),!1}).end().find(".sw-recall-phone").val("+7").unbind("keydown").keydown(function(t){s.checkPhoneKeyDownForRecall.apply(s,[t]),13==t.keyCode&&e(".stream-wood-recall-3 .stream-wood-recall-button-container .sw-recall-send-btn").click()}).unbind("focus").focus(function(){"+7"==e(this).val()&&e(this).val("+7").removeClass("sw-phone-empty"),e(this).css("border-color","rgba(215, 46, 125, 0.8)"),void 0!==s.settings.design["recall-settings"]&&void 0!==s.settings.design["recall-settings"]["recall-phone-border-color"]&&e(this).css("border-color",s.settings.design["recall-settings"]["recall-phone-border-color"])}).unbind("blur").blur(function(){""!=e(this).val()&&"+7"!=e(this).val()||e(this).val("+7").addClass("sw-phone-empty"),e(this).css("border-color","#d4d2d2")}).unbind("keyup").keyup(function(t){e(this).hasClass("sw-recall-phone")&&s.checkPhoneKeyUpForRecall.apply(s,[t])}).end().find(".sw-recall-select-time-link").unbind("click").bind("click",function(){var t=e(".stream-wood-recall-3");return t.find(".stream-wood-recall-title").html("   ."),t.find(".sw-recall-send-btn").text(" !"),t.find(".sw-recall-select-time,.stream-wood-recall-timer,.stream-wood-recall-number .first,.stream-wood-recall-number .timer-text").hide(),t.find(".sw-recall-select-time-container").show(),t.find(".stream-wood-recall-title").css("margin-bottom","30px"),s.settings.selectRecallTime=!0,!1}).end().find(".sw-recall-send-btn").unbind("click").click(function(){var n=e(".stream-wood-recall-3"),i=n.find(".sw-recall-phone").val();if(!s.personalDataIsChecked(n,"recall-number"))return!1;var r=0;"+7"==i&&r++,11!=(i=i.replace(/\D/gim,"")).length&&r++;var l=i.substr(1,1);1!=l&&0!=l&&7!=l||r++,"0000000"==i.substr(4,7)&&r++;var c=["78007754400","72222222222","78009999999","78001008910","78002508076"];for(a=0;a<c.length;a++)if(c[a]==i){r++;break}if(s.settings.design.recall_departments&&0==e("#select-recall-department").val())return n.find(".sw-recall-number-error").text(" ").show(),!1;if(0==r){n.find(".stream-wood-recall-container .sw-recall-number-error").hide(),!s.settings.recallShowTime||s.settings.selectRecallTime?(n.find(".stream-wood-recall-number,.stream-wood-recall-button-container,.sw-recall-select-time-container,.sw-recall-select-time,.stream-wood-recall-departments").hide(),n.find(".stream-wood-recall-title").text("   !")):(n.find(".stream-wood-recall-number").hide(),void 0!==s.settings.design["recall-settings"]&&void 0!==s.settings.design["recall-settings"]["recall-timer-mode"]&&1==s.settings.design["recall-settings"]["recall-timer-mode"]&&(n.find(".stream-wood-recall-number").show().css("text-align","center"),n.find(".stream-wood-recall-number .phone-number-text,.stream-wood-recall-number .sw-recall-phone").hide()),n.find(".sw-recall-send-btn,.sw-recall-select-time,.stream-wood-recall-departments").hide(),n.find(".stream-wood-recall-number-wait").show(),n.find(".stream-wood-recall-title").text("   "),n.find(".stream-wood-recall-number-wait .phone-number-text-wait").text(n.find(".sw-recall-phone").val()),o>0&&(n.find(".stream-wood-recall-timer").show(),n.find(".stream-wood-recall-title").html(" , ...")));var d=document.URL,h=1;s.settings.recallShowTime||(h=0);new Date;var u=60*s.getClientServerOffset(),p=s.settings.selectRecallTime?1:0,g=parseInt(e("#recall-select-day").val(),10)+parseInt(e("#recall-select-hour").val(),10);g-=u;var f="",m="";if(s.settings.design.recall_departments?(f=e("#select-recall-department").val(),m=e("#select-recall-department :selected").text()):s.settings.design.recall_is_worked_time&&(f=s.settings.design.recall_available_numbers),s.settings.phoneSelector){var w=e(s.settings.phoneSelector).eq(0);1==w.length&&(f=w.text().replace(/\D/g,""))}var v={phone:n.find(".sw-recall-phone").val(),message:d,workedTime:h,departmentPhones:f,crmCookie:t(s.getCookiesForCrm()),crmParam:t(s.getParamsForCrm()),crmReferer:t(document.referrer),crmUri:t(window.location.href),departmentName:m,selectRecallTime:p,recallTime:parseInt(g/1e3,10),recallSource:s.settings.recallSource,calltouchSession:window.call_value,referal:s.Storage.get("referal")};e.ajax({type:"POST",url:s.settings.serverUrl+"/api/?Action=recallCall&swDomainKey="+s.settings.swDomainKey+"&swKey="+s.settings.swKey+"&swSessionId="+s.settings.sessionId+"&callback=?",data:v,cache:!1,dataType:"json"}).done(function(t){var n=e(".stream-wood-recall-3");if(t.Errors)n.find(".sw-recall-title-work").html(t.Errors[0]),n.find(".sw-recall-title-start,.sw-recall-phone-container,.sw-recall-timer-container,.sw-recall-select-time").fadeOut(1e3);else{if(t.callId&&(s.settings.callId=t.callId),void 0!==s.settings.design.metrica_id&&void 0!==s.settings.design.callback_goal){var i="yaCounter"+s.settings.design.metrica_id||"",a=s.settings.design.callback_goal||"";window[i]&&window[i].reachGoal(a)}if(void 0!==window._gaq&&window._gaq.push(["_trackEvent","StreamWood","Callback","  Callback-"]),void 0!==window.ga&&"function"==typeof window.ga&&window.ga("send","event","StreamWood","Callback","  Callback-"),s.settings.recallShowTime||!s.settings.selectRecallTime){var r=n.find(".stream-wood-recall-timer .stream-wood-recall-timer-digit").html(),l=(new Date).getTime()+1e3*r,c=!1;e("#sw-slice").html("").show(),s.deleteInterval("recallAnimationIteration"),s.setInterval("recallTimerAnimation",function(){var t,n,i,a=e(".stream-wood-recall-3"),d=(l-(new Date).getTime())/1e3;if(d<=0)e("#sw-slice").addClass("gt50").html('<div class="pie"></div><div class="pie fill"></div>').find(".pie").css({"-moz-transform":"rotate(360deg)","-webkit-transform":"rotate(360deg)","-o-transform":"rotate(360deg)",transform:"rotate(360deg)"}),o>0&&a.find(".stream-wood-recall-timer").hide(),0==s.settings.callStatus?a.find(".stream-wood-recall-title").html("  !      "):1==s.settings.callStatus?a.find(".stream-wood-recall-title").html("   !  !"):2==s.settings.callStatus&&a.find(".stream-wood-recall-title").text("    !"),s.deleteInterval("recallTimerAnimation"),a.find(".timer-text").html("00:00,00"),a.find(".stream-wood-recall-timer .stream-wood-recall-timer-digit").html("0");else{(t=100-d/r*100)>50?e("#sw-slice").addClass("gt50").html('<div class="pie"></div><div class="pie fill"></div>'):e("#sw-slice").removeClass("gt50").html('<div class="pie"></div>');var h=3.6*t;if(e("#sw-slice .pie").css({"-moz-transform":"rotate("+h+"deg)","-webkit-transform":"rotate("+h+"deg)","-o-transform":"rotate("+h+"deg)",transform:"rotate("+h+"deg)"}),a.find(".stream-wood-recall-container .stream-wood-recall-timer > #sw-slice > .pie ").css("border","10px solid #"+s.settings.recallSolid),n=Math.floor(d),a.find(".stream-wood-recall-timer .stream-wood-recall-timer-digit").html(n),n<10&&(n="0"+n),(i=Math.floor(100*(d-n)))<10&&(i="0"+i),a.find(".timer-text").html("00:"+n+","+i),(15==n||5==n)&&!c){var u={callId:s.settings.callId};e.ajax({type:"POST",url:s.settings.serverUrl+"/api/?Action=getCallStatus&swDomainKey="+s.settings.swDomainKey+"&swKey="+s.settings.swKey+"&swSessionId="+s.settings.sessionId+"&callback=?",data:u,cache:!1,dataType:"json"}).done(function(e){e&&e.callStatus&&(s.settings.callStatus=e.callStatus)}),c=!0}14==n&&(c=!1)}},10)}}})}else n.find(".sw-recall-phone").focus(),n.find(".stream-wood-recall-container .sw-recall-number-error").text("   ").show();return!1}).end().appendTo("body");var c=e(".stream-wood-recall-3");if(s.settings.design.recall_timer_value&&(c.find(".stream-wood-recall-timer .stream-wood-recall-timer-digit").html(s.settings.design.recall_timer_value),c.find(".timer-text").html("00:"+s.settings.design.recall_timer_value+",00")),-1!==["ec220f78ffbe066d4ee7119c63579a37","d9de4f096940382ee9897db775ea9b41","b1f72c6e55ebea13f5d77761a45121d6","d106934787d0d658ad05fe749d4c0abb","70088a81da2eaea349933c5ceeaf43db","1228f413d9115cf060ba8b57c1165cba","8925e776b83854ce9d6b310368526507","b0e250817fd7368157c95c08d0a1d770","56878a1fe62a4a8b86b14360b2246c89","090f425e66c0513a70dc497e3677bc3f","950f74609a3b9680cf05e5a7b5665054","2dc85012f08d1101ef199acd6d66d82a","c180063c89b7e98bdddfba0726af1b61","b39e1d19b99802672696d51bf6886efc","a2d2c7a3381efa6465cb40b4b2c75f1e","1228f413d9115cf060ba8b57c1165cba"].indexOf(s.settings.swDomainKey)?c.find(".stream-wood-recall-copyright").hide():c.find(".stream-wood-recall-copyright").show(),o>0&&(c.find(".stream-wood-recall-timer").hide(),c.find(".stream-wood-recall-title").css("margin-bottom","30px")),void 0===s.settings.design.recall_show_departments&&void 0!==s.settings.design.recall_is_worked_time&&void 0===s.settings.design.recall_available_numbers&&(s.settings.recallShowTime=!1),this.setCallbackRecallDaySelect(),this.setCallbackRecallTimeSelect(),e("#recall-select-day").unbind("change").bind("change",function(){s.setCallbackRecallTimeSelect()}),s.settings.design.recall_client_time_select&&c.find(".sw-recall-select-time").show(),c.unbind("click").click(function(e){e.stopPropagation()}),+this.settings.design["recall-settings"]["recall-advertising-agree"]&&n.advertising_agree(this.settings.design["recall-settings"]["recall-advertising-agree-url"]).insertAfter(c.find(".stream-wood-recall-number")),+this.settings.design["recall-settings"]["recall-no-personal-data"]||n.personal_data(this.settings.design["recall-settings"]["recall-personal-data-text"]).insertAfter(c.find(".stream-wood-recall-number")),s.settings.design["recall-on"]){s.settings.recallShowTime=s.callbackIsWorkingTime(new Date);var d=e(n.recall_btn);if(d.appendTo(document.body),d.unbind("click").click(function(){return s.settings.recallSource="button",s.showRecall.call(s),!1}),this.setTimeout("RecallButtonTimer",function(){s.showRecallButton.call(s)},2e3),s.applyRecallSettingsVersion3.call(s),!s.settings.recallShowTime){c.find(".stream-wood-recall-timer").hide(),c.find(".stream-wood-recall-number .first").hide(),c.find(".stream-wood-recall-number .timer-text").hide();var h=" ,    .       .",u=s.settings.design["recall-settings"];void 0!==u["recall-unwork-title-text"]&&(h=u["recall-unwork-title-text"]),c.find(".stream-wood-recall-title").text(h).css("margin-bottom","30px"),c.find(".sw-recall-send-btn").text(" ")}if(s.settings.design.recall_departments){var p;p='<select id="select-recall-department" class="sw-select-recall-department">';var g="";s.settings.design.recall_department_text&&(g=s.settings.design.recall_department_text),p+='<option value="0"> '+g+"</option>",e.each(s.settings.design.recall_departments,function(e,t){p+='<option value="'+t+'">'+e+"</option>",a++}),p+="</select>",c.find(".stream-wood-recall-departments").append(p).show()}this.recallInitTimer();var f=e(".stream-wood-recall-phone-to-call");f.closest("form").on("submit",function(n){var i=1;s.settings.recallShowTime||(i=0);var o=document.URL,a="",r="";s.settings.design.recall_departments?(a=e("#select-recall-department").val(),r=e("#select-recall-department :selected").text()):s.settings.design.recall_is_worked_time&&(a=s.settings.design.recall_available_numbers);var l={phone:f.val(),message:o,workedTime:i,departmentPhones:a,crmCookie:t(s.getCookiesForCrm()),crmParam:t(s.getParamsForCrm()),crmReferer:t(document.referrer),crmUri:t(window.location.href),departmentName:r,recallSource:s.settings.recallSource};e.ajax({type:"POST",url:s.settings.serverUrl+"/api/?Action=recallCall&swDomainKey="+s.settings.swDomainKey+"&swKey="+s.settings.swKey+"&swSessionId="+s.settings.sessionId+"&callback=?",data:l,cache:!1,dataType:"json"})})}else c.hide()},s.prototype.createRegistrator=function(){var t=this,s=e(n.registrator);s.appendTo("body");var i,o;-1!==["tl","tc","tr"].indexOf(this.settings.design["registrator-btn-position"])?(i="right",o="left"):(i="left",o="right");var a=e('<div class="strmwd-registrator-btn"><div class="strmwd-registrator-btn-ear strmwd-registrator-btn-left"><svg class="strmwd-icon strmwd-icon-btn-ear"><use xlink:href="#cons_'+i+'"></use></svg></div><div class="strmwd-registrator-btn-title"></div><div class="strmwd-registrator-btn-ear strmwd-registrator-btn-right"><svg class="strmwd-icon strmwd-icon-btn-ear"><use xlink:href="#cons_'+o+'"></use></svg></div></div>');if(a.appendTo("body"),void 0!==this.settings.design["registrator-btn-offset"]&&"auto"!=this.settings.design["registrator-btn-offset"]){var r="px";"percent"==this.settings.design["registrator-btn-offset"]&&(r="%");var l=this.settings.design["registrator-btn-position"];"bl"==l||"tl"==l?a.css("left",this.settings.design["registrator-btn-offset-value"]+r):"mrm"!=l&&"mlm"!=l||(a.css("top",this.settings.design["registrator-btn-offset-value"]+r),a.css("margin-top","95px"))}a.addClass("strmwd-registrator-btn-"+this.settings.design["registrator-btn-position"]),a.find(".strmwd-registrator-btn-title").text(this.settings.design["registrator-title"]);var c=parseInt(a.width())-190;if(-1!==["mlm"].indexOf(this.settings.design["registrator-btn-position"])){var d=e(".strmwd-registrator-btn-mlm").css("left");d=d.substring(0,d.length-2);var h=parseInt(d)-parseInt(c)/2;a.css("left",h+"px")}if(-1!==["mrm"].indexOf(this.settings.design["registrator-btn-position"])){var u=e(".strmwd-registrator-btn-mrm").css("right");u=u.substring(0,u.length-2);var p=parseInt(u)+parseInt(c)/2;a.css("right",p+"px")}s.find(".stream-wood-registrator-title").text(this.settings.design["registrator-title"]),void 0!==this.settings.design["registrator-btn-text"]&&s.find(".stream-wood-registrator-action-button").text(this.settings.design["registrator-btn-text"]),void 0!==this.settings.design["registrator-color"]&&(s.find(".stream-wood-registrator-header").css("background-color","#"+this.settings.design["registrator-color"]),s.find(".stream-wood-registrator-actions button").css("background-color","#"+this.settings.design["registrator-color"]),a.css({backgroundColor:"#"+this.settings.design["registrator-color"],color:"#"+this.settings.design["registrator-color"]}));var g=s.find(".stream-wood-registrator-fields");+this.settings.design["registrator-no-personal-data"]||n.personal_data(this.settings.design["registrator-personal-data-text"]).appendTo(g),+this.settings.design["registrator-advertising-agree"]&&n.advertising_agree(this.settings.design["registrator-advertising-agree-url"]).appendTo(g),void 0!==this.settings.design["registrator-date-field-hide"]&&"1"==this.settings.design["registrator-date-field-hide"]&&g.find(".strmwd-input-date").hide(),s.find(".stream-wood-registrator-close").unbind("click").bind("click",function(){return t.hideRegistrator.call(t),!1}),a.unbind("click").bind("click",function(){t.settings.registratorOpened||t.showRegistrator.call(t)});var f=0;e(this.settings.design["registrator-custom-fields"]).each(function(){var t='<div class="strmwd-field-group registrator-custom-field"><select class="strmwd-select" name="custom_field['+f+']_origin"></select></div>';g.find(".strmwd-input-date").before(t),e(this).each(function(){e('select[name="custom_field['+f+']_origin"]').append(e("<option>",{value:this,text:this}))}),f++}),"1"==this.settings.design["registrator-contact-type"]?(s.find(".strmwd-input-phone").show(),s.find(".strmwd-input-email").hide()):"2"==this.settings.design["registrator-contact-type"]?(s.find(".strmwd-input-phone").hide(),s.find(".strmwd-input-email").show()):s.find(".strmwd-input-phone,.strmwd-input-email").show(),s.find(".sw-reg-phone").unbind("keydown").keydown(function(s){e(this).hasClass("sw-reg-phone")&&t.checkPhoneKeyDownForRecall.apply(t,[s])}).unbind("keyup").keyup(function(s){e(this).hasClass("sw-reg-phone")&&t.checkPhoneKeyUpForRecall.apply(t,[s])}),s.find(".stream-wood-registrator-action-button").unbind("click").click(function(e){e.preventDefault(),t.registratorSendButtonClick.apply(t,[e])}),e(".sw-datepicker-here").datepicker(),this.hideRegistrator(),this.registratorInitTimer()},s.prototype.setRecallBtnPosition=function(){var t=e(".stream-wood-recall-btn"),s=this.settings.design["recall-settings"],n=s["button-position"];if(t.removeAttr("style"),n){var i={};switch(n){case"left-top":i={left:26,top:30,marginLeft:0};break;case"left-bottom":i={left:26,bottom:30,top:"",marginLeft:0};break;case"right-top":i={right:26,top:30};break;case"right-bottom":i={right:26,bottom:30,top:""}}t.css(i)}if("pixel"===s["button-offset"]||"percent"===s["button-offset"]){var o="percent"===s["button-offset"]?"%":"px",a=e(".stream-wood-recall-btn");switch(s["button-position"]){case"left-top":a.css("left",s["button-offset-left-value"]+o),a.css("top",s["button-offset-top-value"]+o);break;case"left-bottom":a.css("left",s["button-offset-left-value"]+o),a.css("bottom",s["button-offset-bottom-value"]+o);break;case"right-top":a.css("right",s["button-offset-right-value"]+o),a.css("top",s["button-offset-top-value"]+o);break;case"right-bottom":a.css("right",s["button-offset-right-value"]+o),a.css("bottom",s["button-offset-bottom-value"]+o)}}},s.prototype.applyRecallSettingsVersion3=function(){var t=this,s=e(".stream-wood-recall-3");if(void 0!==t.settings.design["recall-settings"]&&null!=t.settings.design["recall-settings"]){var n=t.settings.design["recall-settings"];if(n["recall-position"])1==parseInt(n["recall-position"])?e(".stream-wood-recall-side").addClass("stream-wood-recall-side-left"):2==parseInt(n["recall-position"])&&e(".stream-wood-recall-side").addClass("stream-wood-recall-side-right"),n["recall-timer-mode"]&&1==parseInt(n["recall-timer-mode"])&&e(".stream-wood-recall-side").addClass("stream-wood-recall-side-compact");else{if(n["recall-load-bg"]&&1==n["recall-load-bg"]&&void 0!==n["recall-bg-img"]){i="http://web.archive.org/web/20171014090326/https://img.streamwood.ru/host/"+t.settings.swDomainKey+"/recall-bg."+n["recall-bg-img"];i+="?"+(t.settings.design.updated_at||""),s.find(".stream-wood-recall-content").css("background-image","url("+i+")")}s.hide()}if(n["recall-timer-mode"]&&1==parseInt(n["recall-timer-mode"])&&e(".stream-wood-recall-center").addClass("stream-wood-recall-center-compact"),n["recall-load-logo"]&&1==n["recall-load-logo"]&&(e(".stream-wood-recall-center").addClass("stream-wood-recall-center-with-logo"),e(".stream-wood-recall-center-compact").addClass("stream-wood-recall-center-compact-with-logo"),"undefined"!=n["recall-logo-img"])){var i="http://web.archive.org/web/20171014090326/https://img.streamwood.ru/host/"+t.settings.swDomainKey+"/recall-logo."+n["recall-logo-img"];i+="?"+(t.settings.design.updated_at||""),s.find(".stream-wood-recall-logo-container").css("background-image","url('"+i+"')")}if(n["recall-color-scheme"]&&1==parseInt(n["recall-color-scheme"])&&s.addClass("stream-wood-recall-light-sheme"),n["recall-bg-color"]&&s.find(".stream-wood-recall-container,.stream-wood-recall-hide-left,.stream-wood-recall-hide-right").css("background-color","#"+n["recall-bg-color"]),n["recall-sendbtn-color"]&&(s.find(".stream-wood-recall-content .sw-recall-send-btn").css("background-color","#"+n["recall-sendbtn-color"]),s.find(".stream-wood-recall-container .stream-wood-recall-timer > #sw-slice > .pie ").css("border","10px solid #"+n["recall-sendbtn-color"]),t.settings.recallSolid=n["recall-sendbtn-color"]),n["recall-title-text"]&&s.find(".stream-wood-recall-title").text(n["recall-title-text"]),void 0!==n.title_urls&&0!=n.title_urls.length){var o=this.getRecallTitle();o&&s.find(".stream-wood-recall-title").text(o)}if(n["recall-note-text"]){var a=n["recall-note-text"];a=(a=this.stripTags(a)).replace("\n","<br>"),s.find(".stream-wood-recall-number .first").html(a)}n["recall-send-btn-text"]&&s.find(".sw-recall-send-btn").text(n["recall-send-btn-text"]);var r=s;void 0!==n["recall-position"]&&null!=n["recall-position"]?(1==parseInt(n["recall-position"])&&r.css({top:0,left:0,marginLeft:-404}),2==parseInt(n["recall-position"])&&r.css({top:0,right:-406,left:"",marginLeft:""})):r.hide();var l=e(".stream-wood-recall-btn");this.setRecallBtnPosition(),n["button-bg-color"]&&(e(".stream-wood-recall-btn").find(".sw-call-img,.sw-call-tail").css("background-color","#"+n["button-bg-color"]),e(".stream-wood-recall-btn .sw-call-rad").css("border","2px solid #"+n["button-bg-color"]),t.settings.recallBtnColor=n["button-bg-color"]),n["button-bg-color-rid"]&&(e(".stream-wood-recall-btn .sw-call-rid").css("background-color","#"+n["button-bg-color-rid"]),t.settings.recallBtnColorRid=n["button-bg-color-rid"]),n["button-tube"]&&(e(".stream-wood-recall-btn .sw-call-img").css("background-position",n["button-tube"]),t.settings.recallBtnTube=n["button-tube"]),n["button-bg-hover-color"]&&(t.settings.recallBtnHoverColor=n["button-bg-hover-color"]),n["button-bg-hover-color-rid"]&&(t.settings.recallBtnHoverColorRid=n["button-bg-hover-color-rid"]),n["button-tube-hover"]&&(t.settings.recallBtnHoverTube=n["button-tube-hover"]),e(".stream-wood-recall-btn").unbind("hover").hover(function(){t.setRecallButtonBg.call(t,t.settings.recallBtnHoverColor,t.settings.recallBtnHoverColorRid,t.settings.recallBtnHoverTube)},function(){t.setRecallButtonBg.call(t,t.settings.recallBtnColor,t.settings.recallBtnColorRid,t.settings.recallBtnTube)}),n["button-small"]&&l.addClass("stream-wood-recall-btn-small"),n["button-flip"]&&(l.addClass("stream-wood-recall-btn-flipper"),l.find(".sw-call-tail").append(e('<div class="sw-call-tail-text"/>').text(n["recall-button-text"]))),n["-crawl"]&&this.attachCrawlBehavior(l)}else s.hide()},s.prototype.getBlockSizeAndPosition=function(t){var s=t.is(":hidden"),n=t.css("position");s&&t.css({opacity:0,display:"block"});var i=t.offset();return i.width=t.width(),i.height=t.height(),"fixed"===n&&(i.top-=e(window).scrollTop()),s&&t.css({opacity:1,display:"none"}),i},s.prototype.crawlBlock=function(e,t){e.stop().css("bottom","").animate({top:t})},s.prototype.attachCrawlBehavior=function(t){var s=this,n=e(window),i=n.height(),o=s.getBlockSizeAndPosition(t).top;t.css({position:"absolute",top:o+n.scrollTop(),bottom:""}),n.on({scroll:function(){s.crawlBlock(t,o+n.scrollTop())},resize:function(){o-=i-n.height(),i=n.height(),s.crawlBlock(t,o+n.scrollTop())}})},s.prototype.setRecallButtonBg=function(t,s,n){var i=e(".stream-wood-recall-btn");t&&(i.find(".sw-call-img, .sw-call-tail").css({backgroundColor:"#"+t}),i.find(".sw-call-rad").css({borderColor:"#"+t})),s&&i.find(".sw-call-rid").css({backgroundColor:"#"+s}),n&&i.find(".sw-call-img").css({backgroundPosition:n})},s.prototype.hideGenerator=function(){e("body>div").not("[class*=stream-wood-]").each(function(){e(this).removeClass("strmwd-blur")}),e(".dark-cover-all").hide();e(void 0!==this.settings.design["generator-new-version"]&&"1"==this.settings.design["generator-new-version"]?".stream-wood-generator-2":".stream-wood-generator").hide(),this.generatorOnClose(),this.settings.hideAll||(this.settings.invitationOpened?this.slideUpInvitation():this.settings.chatOpened?this.showChat():this.showBtn()),e(".strmwd-registrator-btn").show(),this.showRecallButton()},s.prototype.hideRegistrator=function(){e("body>div").not("[class*=stream-wood-],[class*=datepickers-container]").each(function(){e(this).removeClass("strmwd-blur")}),e(".dark-cover-all").hide(),e(".stream-wood-registrator").hide(),this.settings.hideAll||(this.settings.invitationOpened?this.slideUpInvitation():this.settings.chatOpened?this.showChat():this.showBtn()),e(".strmwd-registrator-btn").show(),this.registratorOnClose(),this.showRecallButton()},s.prototype.setElementTop=function(t){var s=window.innerHeight/2-t.height()/2;s<0&&(s=0),s+=e(document).scrollTop(),"static"!==e(document.body).css("position")&&(s-=e(document.body).offset().top),t.css({top:s})},s.prototype.showGenerator=function(){e(".stream-wood-recall-btn,.strmwd-registrator-btn").hide();var t,s=!1;void 0!==this.settings.design["generator-new-version"]&&"1"==this.settings.design["generator-new-version"]?t=e(".stream-wood-generator-2"):(t=e(".stream-wood-generator"),s=!0),this.setElementTop(t),this.settings.invitationOpened?this.slideDownInvitation():this.settings.chatOpened?this.hideChat():this.hideBtn(),"1875c572120dbe8a88dfd83e0edf9575"!=this.settings.swDomainKey&&"a225e0ca7a08f3b5fceece9e8c4eb863"!=this.settings.swDomainKey&&e("body>div").not("[class*=stream-wood-]").each(function(){e(this).addClass("strmwd-blur")});var n=this.settings.design["generator-settings"];(n&&void 0!==n["gen-dark-all"]&&1==n["gen-dark-all"]||1==s)&&e(".dark-cover-all").show();var i="z-index:2147483647!important;"+t.attr("style");t.appendTo(document.body).attr("style",i).show(),this.generatorOnShow(),this.runTrigger.apply(this,["onaftergeneratorshow"])},s.prototype.showRegistrator=function(){e(".stream-wood-recall-btn").hide(),e(".strmwd-registrator-btn").hide();var t=e(".stream-wood-registrator"),s=window.innerHeight/2-t.height()/2;s<0&&(s=0),s+=e(document).scrollTop(),t.css("top",s+"px"),this.settings.invitationOpened?this.slideDownInvitation():this.settings.chatOpened?this.hideChat():this.hideBtn(),e("body>div").not("[class*=stream-wood-],[class*=datepickers-container]").each(function(){e(this).addClass("strmwd-blur")}),e(".dark-cover-all").show(),t.show(),this.registratorOnShow(),this.runTrigger.apply(this,["onafterregistratorshow"])},s.prototype.setFirstLoadTime=function(){if(!this.getCookie(this.strings.firstLoadTime)){var e=new Date,t=new Date;t.setDate(t.getDate()+7),this.setCookie(this.strings.firstLoadTime,e,t)}},s.prototype.initBtnTimer=function(){var t=this;t.settings.design["anchor-disable-animation"]||this.setInterval("btnTimer",function(){if(!(t.settings.hideAnchor||t.settings.chatOpened||t.settings.invitationOpened||t.settings.generatorOpened)&&(!t.settings.hideOfflineAnchor||t.settings.manager||t.settings.managers||t.settings.departments)){var s=e(".stream-wood-btn").stop(),n={};switch(t.settings.design["anchor-position"]){case"top":n.marginTop=-15;break;case"left":n.marginLeft=-15;break;case"right":n.marginRight=-15;break;default:n.marginBottom=-15}s.animate(n,500,"easeOutSine",function(){t.showBtn.call(t)})}},1e3*this.consts.SW_BTN_ACTION_TIMEOUT)},s.prototype.stopBtnTimer=function(){this.deleteInterval("btnTimer")},s.prototype.invitationCanShow=function(){var e=this.settings;return!(0!==e.messageCounter||e.hideAnchor||e.forever_offline||"mobile"===e.device&&("mobile"!==e.device||e.design.hideOnMobile)||e.design["invitation-hide"]||e.chatOpened||e.invitationOpened||e.generatorOpened||void 0===e.invitationManager)},s.prototype.invitationInitTimer=function(){var e=this;this.settings.hideAll||this.settings.invitationManager&&1!=this.settings.design["invitation-hide"]&&this.setTimeout("invitationTimer",function(){e.invitationCanShow.call(e)?e.slideUpInvitation.call(e):e.invitationInitTimer.call(e)},this.productTimeToShow("invitation"))},s.prototype.invitationStopTimer=function(){this.deleteTimeout("invitationTimer")},s.prototype.invitationOnShow=function(){this.deleteTimeout("invitationTimer"),this.settings.invitationOpened=!0},s.prototype.invitationOnClose=function(){this.settings.invitationOpened=!1,this.productSetShowTime("invitation"),this.invitationInitTimer()},s.prototype.getManagerAvatarSrc=function(e){return e.img||e.type||(e.img="http://web.archive.org/web/20171014090326/https://clients.streamwood.ru/StreamWood/img/bgr/no-photo",0!=e.sex&&(e.img+="-men"),e.img+=".png"),e.img||(e.img=this.settings.imgServerUrl+"/manager/"+e.key+"/60."+e.type),e.img},s.prototype.setInvitationInfo=function(){var t=(new Date).getTime();if(this.settings.invitationManager){var s=this.settings.invitationManager;s.img=this.getManagerAvatarSrc(s);var i=e(n.invitation_top);i.find(".sw-manager-name").text(s.name+" "+(s.surname||"")),i.find(".sw-manager-position").text(s.position),i.find(".sw-manager-info img").attr("src",s.img+"?q="+t),i.appendTo(".stream-wood-invitation .sw-manager"),this.settings.design["invitation-text"]?i.find(".invitation-text").text(this.settings.design["invitation-text"]):i.find(".invitation-text").text(this.languages[this.language].swInvitationText)}},s.prototype.last_show_time={},s.prototype.productSetShowTime=function(e){var t=this.productStorageShowKey(e),s=(new Date).getTime(),n=this.settings.design[e+"-timeout-type"];n&&1==n?this.last_show_time[t]=s:this.Storage.set(t,s)},s.prototype.productStorageShowKey=function(e){var t=this.settings.design[e+"-id"];return"sw_"+e+"_last_show_time"+(t?"_"+t:"")},s.prototype.productLastShowTime=function(e){var t=this.productStorageShowKey(e),s=this.settings.design[e+"-timeout-type"];return s&&1==s?this.last_show_time[t]||null:this.Storage.get(t)},s.prototype.productTimeToShow=function(e){var t,s;switch(e){case"noreply":return t=parseInt(this.settings.design["collector-timeout"],10)||45,t*=1e3;case"generator":t=parseInt(this.settings.design["generator-first-apperance"],10)||40,s=parseInt(this.settings.design["generator-reapperance"],10)||30;break;case"registrator":t=parseInt(this.settings.design["registrator-first-apperance"],10)||40,s=parseInt(this.settings.design["registrator-reapperance"],10)||30;break;case"recall":if(t=parseInt(this.settings.design["recall-first-apperance"],10)||45,s=parseInt(this.settings.design["recall-reapperance"],10)||30,this.settings.design.self_learning_system){s=t=Math.round(36.5+9*Math.random())}break;case"recall_exit":t=parseInt(this.settings.design.client_exit_apperance,10)||10,s=parseInt(this.settings.design.client_exit_reapperance,10)||10;break;case"feedback":t=parseInt(this.settings.design["feedback-timeout"],10)||40,s=parseInt(this.settings.design["feedback-reapperance"],10)||30;break;case"invitation":t=parseInt(this.settings.design["invitation-timeout"],10)||40,s=parseInt(this.settings.design["invitation-reapperance"],10)||30;break;case"webpush":t=parseInt(this.settings.design["webpush-first-apperance"],10)||1,s=parseInt(this.settings.design["webpush-reapperance"],10)||60}t*=1e3,s*=6e4;var n=this.productLastShowTime(e);if(null===n)return t;var i=s-((new Date).getTime()-n);return i>s?t:i<t?t:i},s.prototype.feedbackCanShow=function(){var e=this.settings;return!(1==e.design["feedback-invitation-hide"]||e.hideAnchor||e.hideOfflineAnchor||"mobile"===e.device&&("mobile"!==e.device||e.design.hideOnMobile)||e.chatOpened||e.manager||e.managers||e.generatorOpened||e.recallOpened)},s.prototype.feedbackOnClose=function(){this.settings.feedbackOpened=!1,this.productSetShowTime("feedback"),this.feedbackInitTimer()},s.prototype.feedbackOnShow=function(){this.settings.feedbackOpened=!0},s.prototype.feedbackInitTimer=function(){var e=this;this.settings.hideAll||1!=this.settings.design["feedback-invitation-hide"]&&this.setTimeout("feedbackTimer",function(){e.feedbackCanShow.call(e)?(e.slideUp.call(e),e.playBeep.call(e)):e.feedbackInitTimer.call(e)},this.productTimeToShow("feedback"))},s.prototype.feedbackStopTimer=function(){this.deleteTimeout("feedbackTimer")},s.prototype.noreplyOnShow=function(){this.settings.noReplyOpened=!0},s.prototype.noreplyOnClose=function(){this.settings.noReplyOpened=!1,this.noreplyStopTimer()},s.prototype.noreplyCanShow=function(){var e=this.settings;return("mobile"!==e.device||"mobile"===e.device&&!e.design.hideOnMobile)&&!e.noReplyOpened},s.prototype.noreplyInitTimer=function(t){var s=this;this.setTimeout("NoReplyTimer",function(){if(s.noreplyCanShow.call(s)){e(".stream-wood-noreply .sw-feedback .sw-name").val(s.settings.clientName);var n=t.replace("<br>","\n");e(".stream-wood-noreply .sw-message").val(n),s.slideUpNoReply.call(s)}else s.noreplyInitTimer.call(s,t)},this.productTimeToShow("noreply"))},s.prototype.noreplyStopTimer=function(){this.deleteTimeout("NoReplyTimer")},s.prototype.generatorOnClose=function(){this.settings.generatorOpened=!1,this.productSetShowTime("generator"),this.generatorInitTimer()},s.prototype.generatorOnShow=function(){this.settings.generatorOpened=!0},s.prototype.generatorCanShow=function(){var e=this.settings;return!("mobile"===e.device&&("mobile"!==e.device||+e.design["generator-hide-on-mobile"])||e.generatorOpened||e.recallOpened||e.zalikeOpened||e.registratorOpened)},s.prototype.generatorInitTimer=function(){var e=this;this.settings.hideAll||(this.initGeneratorCountDown(),this.setTimeout("GeneratorTimer",function(){e.generatorCanShow()?e.showGenerator.call(e):e.generatorInitTimer()},this.productTimeToShow("generator")))},s.prototype.registratorOnShow=function(){this.settings.registratorOpened=!0},s.prototype.registratorOnClose=function(){this.settings.registratorOpened=!1,this.productSetShowTime("registrator"),this.registratorInitTimer()},s.prototype.registratorCanShow=function(){return!(this.settings.registratorOpened||this.settings.recallOpened||this.settings.zalikeOpened||this.settings.generatorOpened)},s.prototype.registratorInitTimer=function(){return!1},s.prototype.recallIsEnabled=function(){var e=this.settings;return e.design["recall-on"]&&!("mobile"==e.device&&e.design.recall_hide_on_mobile)},s.prototype.webpushIsEnabled=function(){var e=!1;return 1==this.settings.design["webpush-on"]&&(e=!0),e},s.prototype.recallOnShow=function(){this.settings.recallOpened=!0},s.prototype.recallOnClose=function(){this.settings.recallOpened=!1,this.productSetShowTime("recall"),this.recallInitTimer()},s.prototype.webpushOnShow=function(){this.settings.webpushOpened=!0},s.prototype.webpushOnClose=function(){this.settings.webpushOpened=!1,this.productSetShowTime("webpush"),this.webpushInitTimer()},s.prototype.recallCanShow=function(){var e=this.settings;return this.recallIsEnabled()&&e.recallShowTime&&!e.recallOpened&&!e.design.recall_show_button_only&&!e.generatorOpened&&!e.zalikeOpened&&!e.chatOpened&&!e.registratorOpened},s.prototype.webpushCanShow=function(){return this.webpushIsEnabled()},s.prototype.recallInitTimer=function(){var e=this;this.settings.hideAll||this.recallIsEnabled()&&this.setTimeout("RecallTimer",function(){e.recallCanShow()?(e.settings.recallSource="timer",e.showRecall.call(e)):e.recallInitTimer.call(e)},this.productTimeToShow("recall"))},s.prototype.webpushInitTimer=function(){var e=this;e.settings.hideAll||e.webpushIsEnabled()&&e.setTimeout("WebpushTimer",function(){e.webpushCanShow()?(e.settings.webpushSource="timer",e.webpushModalShow.call(e)):e.webpushInitTimer.call(e)},this.productTimeToShow("webpush"))},s.prototype.mobileResize=function(){if(e(".stream-wood-recall-3 .stream-wood-recall-side .stream-wood-recall-close").css("right","80px"),!this.settings.hasOwnProperty("mwidth")||!this.settings.hasOwnProperty("mheight")||this.settings.mwidth!=window.innerWidth||this.settings.mheight!=window.innerHeight){this.settings.mwidth=window.innerWidth,this.settings.mheight=window.innerHeight,e(".stream-wood-mobile-btn").css("height",Math.round(35*window.innerHeight/568)+"px").find(".mobile-title").css("font-size",Math.round(20*window.innerHeight/568)+"px").each(function(){this.style.setProperty("line-height",Math.round(20*window.innerHeight/568)+"px","important")}).end().find(".mobile-status").css("font-size",Math.round(13*window.innerHeight/568)+"px").each(function(){this.style.setProperty("line-height",Math.round(13*window.innerHeight/568)+"px","important")});window.innerWidth,parseFloat((window.innerWidth/window.screen.availWidth).toFixed(2));var t=this.getCookie(this.strings.innerWidth),s=this.getCookie(this.strings.innerHeight);Math.round(100*window.innerWidth/t)!=Math.round(100*window.innerHeight/s)?(this.setCookie(this.strings.innerWidth,window.innerWidth),this.setCookie(this.strings.innerHeight,window.innerHeight)):Math.round(t/window.innerWidth*10)>25?e(".stream-wood-btn").hide():e(".stream-wood-btn").show(),e(".stream-wood-recall-btn").css("bottom",e(".stream-wood-mobile-btn").height()+"px")}},s.prototype.generatorStopTimer=function(){this.deleteTimeout("GeneratorTimer")},s.prototype.registratorStopTimer=function(){this.deleteTimeout("RegistratorTimer")},s.prototype.initGeneratorCountDown=function(){var e=this;this.setInterval("GeneratorCountDown",function(){var t,s,n,i,o;(t=Math.floor((e.settings.generatorEndTime-new Date)/1e3))<0?(e.stopGeneratorCountDown.call(e),e.updateDigits.apply(e,[0,"streamwood-generator-day"]),e.updateDigits.apply(e,[0,"streamwood-generator-hour"]),e.updateDigits.apply(e,[0,"streamwood-generator-min"]),e.updateDigits.apply(e,[0,"streamwood-generator-sec"])):(s=Math.floor(t/86400),e.updateDigits.apply(e,[s,"streamwood-generator-day"]),t-=86400*s,n=Math.floor(t/3600),e.updateDigits.apply(e,[n,"streamwood-generator-hour"]),t-=3600*n,i=Math.floor(t/60),e.updateDigits.apply(e,[i,"streamwood-generator-min"]),o=t-=60*i,e.updateDigits.apply(e,[o,"streamwood-generator-sec"]))},1e3)},s.prototype.updateDigits=function(t,s){var n=Math.floor(t/10)%10+""+(t%10+"");e("#"+s).html(n)},s.prototype.stopGeneratorCountDown=function(){this.deleteInterval("GeneratorCountDown")},s.prototype.clearManager=function(){e(".stream-wood-chat .sw-manager").attr("class","sw-manager").empty(),e(".stream-wood-invitation .sw-manager").empty()},s.prototype.setNoManager=function(){this.clearManager();var t=this.languages[this.language].swNoManagerTitle,s=this.languages[this.language].swNoManagerText;this.settings.design["feedback-title"]&&(t=this.settings.design["feedback-title"]),this.settings.design["feedback-text"]&&(s=this.settings.design["feedback-text"]),e(".stream-wood-chat .sw-manager").addClass("sw-manager-no-manager").html('<p class="sw-title">'+t+'</p><p class="sw-info">'+s+"</p>"),this.settings.design["chat-offline-color"]&&e(".stream-wood-chat .sw-manager").removeClass("sw-manager-no-manager").addClass("sw-manager-no-manager2")},s.prototype.setManagerNoMessages=function(t){if(t){this.updateBtn(t),this.initBtnTimer(),this.settings.manager=t,this.settings.invitationManager=t,this.settings.mswNewVisitanagerName=this.settings.manager.name+" "+(this.settings.manager.surname||""),this.managerIsOnline(t)&&(this.settings.managerStatus=this.consts.SW_MANAGER_STATUS_ONLINE),this.clearManager();var s=(new Date).getTime(),n="<b>"+this.languages[this.language].swManagerHelloText+t.name+".</b>";this.settings.design.welcomeMessage&&(n=this.settings.design.welcomeMessage.replace(new RegExp("%username%","g"),t.name));var i;i=t.sex&&"0"!=t.sex?"<br>"+this.languages[this.language].swManagerManHelpText:"<br>"+this.languages[this.language].swManagerWomanHelpText,this.settings.design.welcomeMessage1&&t.sex&&"0"!=t.sex?(this.settings.design.welcomeMessage_0=this.settings.design.welcomeMessage1,i="<br>"+this.settings.design.welcomeMessage1):!this.settings.design.welcomeMessage2||t.sex&&"0"!=t.sex||(this.settings.design.welcomeMessage_0=this.settings.design.welcomeMessage2,i="<br>"+this.settings.design.welcomeMessage2),n+=i,this.settings.design["welcome-msg-under-avatar"]?(e(".stream-wood-chat .sw-manager").addClass("sw-manager-no-messages").append(e("<div>").addClass("sw-manager-spot").append(e("<div>").addClass("sw-manager-info").html('<img src="'+t.img+"?q="+s+'" width=60 height="60" alt=""/><p class="sw-manager-name">'+t.name+" "+(t.surname||"")+'</p><p class="sw-manager-position">'+t.position+"</p>")).append(e("<p>").addClass("sw-title").html(n))),this.settings.design["chat-compact"]||e(".stream-wood-chat .sw-manager-no-messages .sw-manager-spot .sw-title").css("padding","12px 0 0 0")):(e(".stream-wood-chat .sw-manager").addClass("sw-manager-no-messages").append(e("<div>").addClass("sw-manager-spot").append(e("<p>").addClass("sw-title").html(n)).append(e("<div>").addClass("sw-manager-info").html('<img src="'+t.img+"?q="+s+'" width=60 height="60" alt=""/><p class="sw-manager-name">'+t.name+" "+(t.surname||"")+'</p><p class="sw-manager-position">'+t.position+"</p>"))),this.settings.design["chat-compact"]?e(".stream-wood-chat .sw-manager-no-messages .sw-manager-spot .sw-title").css("margin-top","0"):e(".stream-wood-chat .sw-manager-no-messages .sw-manager-spot .sw-title").css("padding","17px 0 0 0")),"368dfe3f49b4c797e15a59d8405d604d"==this.settings.swDomainKey&&e(".stream-wood-chat .sw-manager-no-messages .sw-manager-spot .sw-manager-position").text("")}else this.setNoManager()},s.prototype.setManager=function(t){if(t){e(".stream-wood-chat .sw-send-group .bad").hasClass("bad-press")||e(".stream-wood-chat .sw-send-group .good").show(),e(".stream-wood-chat .sw-send-group .good").hasClass("good-press")||e(".stream-wood-chat .sw-send-group .bad").show(),e(".stream-wood-chat .sw-send-group .sw-send-btn").addClass("sw-send-btn-rating-on"),e(".stream-wood-chat .sw-send-group .sw-upload").show(),this.updateBtn(t),this.initBtnTimer(),!this.settings.manager.key&&window.swc_socket?(this.settings.manager=t,this.settings.swSocketInitialized=!0,this.IOemit("swSetSessionOperatorKey",this.settings.manager.key),this.IOemit("swSessionEndType",{visor:this.settings.superVisorMode})):this.settings.manager=t,this.settings.invitationManager=t,this.settings.managerName=this.settings.manager.name+" "+(this.settings.manager.surname||""),this.clearManager();var s=this.languages[this.language].swOfflineText;this.managerIsOnline(t)&&(this.settings.managerStatus=this.consts.SW_MANAGER_STATUS_ONLINE,s=this.languages[this.language].swOnlineText),t.img||(t.img=this.getManagerAvatarSrc(t)),e(".stream-wood-chat .sw-manager").append(e("<div>").addClass("sw-manager-info").append(e('<img width="60" height="60"/>').attr("src",t.img)).append(e("<p>").addClass("sw-manager-name").text(this.settings.managerName)).append(e("<p>").addClass("sw-manager-position").text(t.position).append(e("<br>"+s)))),"368dfe3f49b4c797e15a59d8405d604d"==this.settings.swDomainKey&&e(".stream-wood-chat .sw-manager .sw-manager-info .sw-manager-position").text("")}else this.setNoManager()},s.prototype.managerIsOnline=function(e){return this.settings.design.forever_online||e&&(e.status==this.consts.SW_MANAGER_STATUS_ONLINE||1==e.from_mobile)},s.prototype.updateBtn=function(t){if(t){var s=e(".stream-wood-btn"),n=s.find("span.sw-status");this.managerIsOnline(t)?(n.text(this.languages[this.language].swOperatorOnlineText),s.addClass("sw-btn-online")):(n.text(this.languages[this.language].swOperatorOfflineText),s.removeClass("sw-btn-online"),this.settings.feedback=!0)}else this.settings.feedback=!0},s.prototype.closeSwBtn=function(){return this.slideDown(),!1},s.prototype.toggleSound=function(){return e(".stream-wood-chat .sw-sound").hasClass("sw-sound-press")?this.enableSound():this.disableSound(),!1},s.prototype.enableSound=function(){e(".stream-wood-chat .sw-sound").removeClass("sw-sound-press").attr("title",this.languages[this.language].swSoundOffText),this.setCookie(this.strings.soundOff,"0")},s.prototype.disableSound=function(){e(".stream-wood-chat .sw-sound").addClass("sw-sound-press").attr("title",this.languages[this.language].swSoundOnText),this.setCookie(this.strings.soundOff,"1")},s.prototype.endType=function(){var t=this;this.getCookie(this.strings.sessionId)&&window.swc_socket&&(""==e(".stream-wood-chat .sw-message").val()?(this.IOemit("swSessionEndType",{visor:this.settings.superVisorMode}),this.deleteTimeout("swTypeTimer")):this.setTimeout("swTypeTimer",function(){t.endType.call(t)},2e3))},s.prototype.setMessages=function(t){var s=this;e(".stream-wood-chat .sw-send-group span").show(),e(".stream-wood-chat .sw-send-group").addClass("sw-grey"),e(".stream-wood-chat .sw-message-group").empty().addClass("sw-grey"),e("<textarea>").addClass("sw-message").unbind("keypress").keypress(function(t){if(!("1"!=s.settings.design.sendMessageType&&(s.settings.design.sendMessageType||1!=t.ctrlKey)||13!=t.keyCode&&13!=t.which&&10!=t.keyCode&&10!=t.which))return e(".stream-wood-chat .sw-send-btn").click(),!1;if(""!=this.value){s.deleteTimeout.apply(s,["swTypeTimer"]);var n=s.getCookie.apply(s,[s.strings.sessionId]);if(n&&window.swc_socket&&!s.getTimeout.apply(s,["swTypeTimer"])){var i=e(".stream-wood-chat .sw-message").val();i=s.stripTags.apply(s,[i]),s.IOemit.apply(s,["swSessionType",{message:i,visor:s.settings.superVisorMode}])}n&&s.setTimeout("endType",function(){s.endType.call(s)},2e3)}else s.endType.call(s)}).unbind("focus").focus(function(){s.resetTitle.call(s)}).appendTo(".stream-wood-chat .sw-message-group"),this.updateMessages(t),e(".stream-wood-chat .sw-send-btn").unbind("click").click(function(){var t=e.trim(e(".stream-wood-chat .sw-message").val());if(e(".stream-wood-chat .sw-message").val()&&0!=t.length)if(window.swc_socket){var n=e(".stream-wood-chat .sw-message").val(),i=s.settings.clientName||s.languages[s.language].swGuestNameText;s.showError.call(s);var o=[],a={},r=new Date;n=s.stripTags.apply(s,[n]),a.message=n,a.d=r.getDate(),a.m=r.getMonth()+1,a.y=r.getFullYear(),a.hour=r.getHours(),a.min=r.getMinutes(),a.wait=!0,o.push(a),s.appendMessages.apply(s,[o]),e(".stream-wood-chat .sw-message").val(""),e(".stream-wood-chat .sw-messages-list").scrollTop(100*e(".stream-wood-chat .sw-messages-list .sw-ml-item").length),e(".stream-wood-chat .sw-messages-list .sw-ml-item-type").remove(),e.browser.msie&&parseInt(e.browser.version)<9&&"windows-1251"===(document.charset||document.characterSet)&&(n=s.utf8_encode.apply(s,[n]));var l={swClientName:i,message:n,managerId:s.settings.manager.id,managerKey:s.settings.manager.key,hostKey:s.settings.swDomainKey,visor:s.settings.superVisorMode,ip:s.settings.ipAddr};1==s.settings.manager.from_mobile&&0==s.settings.manager.status?e.ajax({type:"POST",url:s.settings.serverUrl+"/api/?Action=cloudMessage&swDomainKey="+s.settings.swDomainKey+"&swKey="+s.settings.swKey+"&swSessionId="+s.settings.sessionId+"&callback=?",data:l,cache:!1,dataType:"json",success:function(t){e(".stream-wood-chat .sw-messages-list .sw-ml-item").removeClass("sw-ml-item-wait")}}):s.IOemit.apply(s,["swSendMessageFromSession",l]),s.managerIsOnline(s.settings.manager)||(s.feedbackRequest({swMessage:n}),e(".stream-wood-chat .sw-messages-list .sw-ml-item").removeClass("sw-ml-item-wait")),s.deleteTimeout.apply(s,["swTypeTimer"]),s.hideBtn.call(s)}else s.showError.apply(s,[s.languages[s.language].swServerErrorText]);else e(".stream-wood-chat .sw-message").focus();return!1})},s.prototype.iAmOnline=function(){var t=this;e.getJSON(this.settings.serverUrl+"/api/?callback=?",{Action:"iAmOnline",swDomainKey:this.settings.swDomainKey,swKey:this.settings.swKey,swSessionId:this.settings.sessionId,swTimeAll:this.getCookie(this.strings.timeAll)}).done(function(e){e&&e.Data.sessionId&&t.updateSession.apply(t,[e.Data.sessionId])})},s.prototype.updateMessages=function(t){var s=this;e(".stream-wood-chat .sw-messages-list").empty(),e.each(t,function(e,t){s.appendMessage.apply(s,[t])})},s.prototype.appendMessages=function(t){var s=this;e.each(t,function(e,t){s.appendMessage.apply(s,[t])})},s.prototype.appendMessage=function(t){var s="sw-message-id-"+t.node_id;if(t.node_id||(s=""),""==s||!e("#"+s).length){var n={ru:["","","","","","","","","","","","",""],en:["","january","february","march","april","may","june","july","august","september","october","november","december"]},i={ru:["","","","","","","","","","","","",""],en:["","jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"]};this.settings.design["chat-compact"]&&(n=i);var o="sw-ml-item sw-ml-item-my";t.direct==this.consts.SW_MESSAGE_FROM_MANAGER&&(o="sw-ml-item"),t.wait&&(o+=" sw-ml-item-wait"),t.hour<10&&(t.hour="0"+t.hour),t.min<10&&(t.min="0"+t.min);var a=new Date,r=t.hour+":"+t.min;a.getDate()==t.d&&a.getMonth()+1==t.m&&a.getFullYear()==t.y||(r=a.getFullYear()==t.y?t.d+" "+n[this.language][t.m]+this.languages[this.language].swInText+t.hour+":"+t.min:t.d+" "+n[this.language][t.m]+" "+t.y+this.languages[this.language].swInText+t.hour+":"+t.min);var l=this.languages[this.language].swGuestNameText;this.settings.clientName&&(l=this.settings.clientName),1==t.direct&&("undefined"!=(l=t.name)&&void 0!==l||(l=this.settings.managerName));var c=t.message;1!=t.direct&&(c=c.replace(/(ht|f)tps?:\/\/[\,\w.\/%\?\&#=-]+/gi,'<a target="_blank" href="$&">$&</a>')),c=c.replace("\n","<br>"),e("<div>").attr("id",s).addClass(o).append('<div class="sw-name-d"><span>'+r+"</span>"+l+"</div>").append('<div class="append-message">'+c+"</div>").appendTo(".stream-wood-chat .sw-messages-list"),e(".stream-wood-chat .sw-messages-list").scrollTop(100*e(".stream-wood-chat .sw-messages-list .sw-ml-item").length),this.settings.messageCounter++}},s.prototype.appendTypeMessage=function(){var t=this.settings.managerName;e("<div>").addClass("sw-ml-item sw-ml-item-my sw-ml-item-type").append('<p class="sw-name-d">'+t+" ...</p>").appendTo(".stream-wood-chat .sw-messages-list")},s.prototype.appendContactInfo=function(){var e="";return this.settings.design.sendContact&&(e='<dl><dt><select class="sw-contact-type" name="contact-type"><option value="2">'+this.languages[this.language].swPhoneText+'</option><option value="1">'+this.languages[this.language].swEmailText+'</option></select></dt><dd><input class="sw-email sw-phone" type="phone" maxlength="50" placeholder="7 (***) ***-**-**"/><div class="sw-error sw-email-error" style="display:none"></div><div class="sw-error sw-phone-error" style="display:none"></div></dd></dl>',1==this.settings.design.contactSelectType?e="<dl><dt>"+this.languages[this.language].swPhoneText+'</dt><dd><input class="sw-phone" type="phone" maxlength="50" placeholder="7 (***) ***-**-**"/><div class="sw-error sw-phone-error" style="display:none"></div></dd></dl>':2==this.settings.design.contactSelectType?e="<dl><dt>"+this.languages[this.language].swEmailText+'</dt><dd><input class="sw-email" type="email" maxlength="50"/><div class="sw-error sw-email-error" style="display:none"></div></dd></dl>':3==this.settings.design.contactSelectType&&(e="<dl><dt>"+this.languages[this.language].swEmailText+'</dt><dd><input class="sw-email" type="email" maxlength="50"/><div class="sw-error sw-email-error" style="display:none"></div></dd></dl>\n<dl><dt>'+this.languages[this.language].swPhoneText+'</dt><dd><input class="sw-phone" type="phone" maxlength="50" placeholder="7 (***) ***-**-**"/><div class="sw-error sw-phone-error" style="display:none"></div></dd></dl>')),e},s.prototype.checkPhoneKeyDown=function(e){46==e.keyCode||8==e.keyCode||9==e.keyCode||27==e.keyCode||65==e.keyCode&&!0===e.ctrlKey||e.keyCode>=35&&e.keyCode<=39||(e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()},s.prototype.checkPhoneKeyUp=function(t){var s=e(t.target);if(!(65==t.keyCode&&!0===t.ctrlKey||t.keyCode>=35&&t.keyCode<=39)){s.val(s.val().replace(/[^\d,]/g,""));var n=s.val();if(n.length>=5&&n.length<=11){switch(n.length){case 5:n=n.substr(0,1)+"-"+n.substr(1,2)+"-"+n.substr(3,2);break;case 6:n=n.substr(0,2)+"-"+n.substr(2,2)+"-"+n.substr(4,2);break;case 7:n=n.substr(0,3)+"-"+n.substr(3,2)+"-"+n.substr(5,2);break;case 8:n="("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6,2);break;case 9:n="("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6,2)+"-"+n.substr(8,1);break;case 10:n="("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6,2)+"-"+n.substr(8,2);break;case 11:n=n.substr(0,1)+" ("+n.substr(1,3)+") "+n.substr(4,3)+"-"+n.substr(7,2)+"-"+n.substr(9,2)}s.val(n)}}},s.prototype.checkPhoneKeyDownForRecall=function(e){46==e.keyCode||8==e.keyCode||9==e.keyCode||27==e.keyCode||65==e.keyCode&&!0===e.ctrlKey||e.keyCode>=35&&e.keyCode<=39||(e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&43==e.keyCode&&e.preventDefault()},s.prototype.checkPhoneKeyUpForRecall=function(t){var s=e(t.target);if(!(65==t.keyCode&&!0===t.ctrlKey||t.keyCode>=35&&t.keyCode<=39)){s.val(s.val().replace(/[^\d\+,]/g,""));var n=s.val();if(n.length>=0&&n.length<=12){switch(n.length){case 0:n="+7";break;case 6:n=n.substr(0,2)+"-"+n.substr(2,2)+"-"+n.substr(4,2);break;case 7:n=n.substr(0,3)+"-"+n.substr(3,2)+"-"+n.substr(5,2);break;case 8:n=n.substr(0,4)+"-"+n.substr(4,2)+"-"+n.substr(6,2);break;case 9:n=n.substr(0,2)+"("+n.substr(2,3)+") "+n.substr(5,3)+"-"+n.substr(8,1);break;case 10:n=n.substr(0,2)+"("+n.substr(2,3)+") "+n.substr(5,3)+"-"+n.substr(8,2);break;case 11:n=n.substr(0,2)+"("+n.substr(2,3)+") "+n.substr(5,3)+"-"+n.substr(8,2)+"-"+n.substr(10,1);break;case 12:n=n.substr(0,2)+" ("+n.substr(2,3)+") "+n.substr(5,3)+"-"+n.substr(8,2)+"-"+n.substr(10,2)}s.val(n)}}},s.prototype.appendContactInfoProperties=function(t){var s=this;t.find(".sw-contact-type").change(function(){s.showError("","email"),s.showError("","phone"),t.find(".sw-email").val(""),2==e(this).val()?t.find(".sw-email").addClass("sw-phone").attr({placeholder:"7 (***) ***-**-**"}).val(""):t.find(".sw-email").removeClass("sw-phone").removeAttr("placeholder")}),t.find(".sw-email, .sw-phone").unbind("keydown").keydown(function(t){e(this).hasClass("sw-phone")&&s.checkPhoneKeyDown.apply(s,[t])}).unbind("keyup").keyup(function(t){e(this).hasClass("sw-phone")&&s.checkPhoneKeyUp.apply(s,[t])})},s.prototype.startDialogContactChooser=function(t){t||(t=".stream-wood-chat");var s=e(t);if(!this.personalDataIsChecked(s))return!1;var n,i=s.find(".sw-phone"),o=s.find(".sw-email"),a=parseInt(this.settings.design.contactSelectType,10)||0,r=s.find(".sw-contact-type option:selected").val(),l=new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);if(this.showError("","email",s),this.showError("","phone",s),this.settings.design.startDialogContact){switch(a){case 1:if(i.length&&!i.val())return this.showError(this.languages[this.language].swEmptyErrorText,"phone",s),!1;break;case 2:if(o.length&&!o.val())return this.showError(this.languages[this.language].swEmptyErrorText,"email",s),!1;break;case 3:if(!o.val()||!i.val())return this.showError(this.languages[this.language].swEmptyErrorText,"phone",s),!1;break;default:if(!o.val())return this.showError(this.languages[this.language].swEmptyErrorText,"phone",s),!1}if(-1!==[0,2,3].indexOf(a)&&"2"!=r){if(!l.test(o.val()))return this.showError(this.languages[this.language].swEmailErrorText,"email",s),!1;this.showError("","phone",s)}if(n=i.val(),("2"==r||!r)&&n&&11!==(n=n.replace(/\D/g,"")).length)return this.showError("    (11 )","phone",s),!1}else if("2"!=r&&r||!i.val()){if(("1"==r||!r)&&o.val()&&!l.test(o.val()))return this.showError(this.languages[this.language].swEmailErrorText,"email",s),!1}else if(n=i.val(),11!==(n=n.replace(/\D/g,"")).length)return this.showError("    (11 )","phone",s),!1;return!0},s.prototype.startCollectorChooser=function(){var t=e(".stream-wood-noreply");if(this.showError("","email",t),this.showError("","phone",t),!this.personalDataIsChecked(t))return!1;var s=t.find(".sw-phone"),n=t.find(".sw-email"),i=this.languages[this.language].swEmptyErrorText;switch(parseInt(this.settings.design["collector-selecttype"])){case 1:if(s.length&&!s.val())return this.showError(i,"phone",t),!1;break;case 2:if(n.length&&!n.val())return this.showError(i,"email",t),!1;break;case 3:if(!n.val()||!s.val())return this.showError(i,"phone",t),!1;break;default:if(!n.val())return this.showError(i,"phone",t),!1}return!0},s.prototype.sendButtonClick=function(){var t=this;this.showError("","email"),this.showError("","phone");var s=e(".stream-wood-chat");if(!this.personalDataIsChecked(s))return!1;var n=s.find(".sw-phone"),i=s.find(".sw-email"),o=s.find(".sw-contact-type").val(),a=parseInt(this.settings.design["feedback-selecttype"]),r=s.find(".sw-offline-select-manager:visible");if(r.length>0&&!+r.find("option:selected").val())return this.showError(this.languages[this.language].swEmptyErrorText),!1;switch(a){case 1:if(n.length&&!n.val())return this.showError(this.languages[this.language].swEmptyErrorText,"phone"),!1;break;case 2:if(i.length&&!i.val())return this.showError(this.languages[this.language].swEmptyErrorText,"email"),!1;break;case 3:if(!i.val()||!n.val())return this.showError(this.languages[this.language].swEmptyErrorText,"phone"),!1;break;default:if(!i.val())return this.showError(this.languages[this.language].swEmptyErrorText,"email"),!1}var l=new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);if(-1!==[0,2,3].indexOf(a)&&"2"!=o){if(!l.test(i.val()))return this.showError(this.languages[this.language].swEmailErrorText,"email"),!1;this.showError("","email")}var c=n.val();if(("2"==o||c)&&11!==(c=c.replace(/\D/g,"")).length)return this.showError("    (11 )","phone"),!1;var d=s.find(".sw-message");if(d.val()||this.settings.design["feedback-empty-message"]){var h=s.find(".sw-name").val();(h=h.split('"').join(""))||(h=this.languages[this.language].swGuestNameText),this.setCookie(this.strings.clientName,h);var u=s.find(".sw-contact-type").val(),p=i.val(),g=n.val(),f="";switch(parseInt(this.settings.design["feedback-selecttype"])){case 1:u=2,f='<p class="sw-title">'+this.languages[this.language].swMessageSendedText+"</p><p>"+this.languages[this.language].swAnswerText2+"<b>"+g+"</b></p>",p=g;break;case 2:u=1,f='<p class="sw-title">'+this.languages[this.language].swMessageSendedText+"</p><p>"+this.languages[this.language].swAnswerText1+"<b>"+p+"</b></p>";break;case 3:u=3,f='<p class="sw-title">'+this.languages[this.language].swMessageSendedText+"</p><p>"+this.languages[this.language].swAnswerText2+"<b>"+g+"</b>"+this.languages[this.language].swAnswerOrText+"<b>"+p+"</b></p>",p=p+", "+g;break;default:2==u?(f='<p class="sw-title">'+this.languages[this.language].swMessageSendedText+"</p><p>"+this.languages[this.language].swAnswerText2+"<b>"+g+"</b></p>",p=g):f='<p class="sw-title">'+this.languages[this.language].swMessageSendedText+"</p><p>"+this.languages[this.language].swAnswerText1+"<b>"+p+"</b></p>"}var m=d.val();"953c57481e782e86d0f09611b23e303e"===this.settings.swDomainKey&&(m+="\n: "+e("#sw-offline-select-manager :selected").html());var w=0,v=0;this.settings.design.offlineSelect&&(w=this.settings.design.selectType,v=1==this.settings.design.operatorShowType?s.find(".sw-select-manager :checked").val():s.find(".sw-select-manager select").val()),s.find(".sw-container").prepend(e("<div>").addClass("sw-feedback-success").hide().html(f)),e("<div>").addClass("sw-send-group").append(e("<a>").addClass("sw-send-btn").text(this.languages[this.language].swCloseWindowText).attr("style",t.settings.design["chat-sendbtn-bkg-css"]).unbind("click").click(function(){var s=e(".stream-wood-chat");return t.settings.foreverChat||(t.hideChat.call(t),t.showBtn.call(t),t.settings.chatOpened=!1,t.deleteCookie.apply(t,[t.strings.opened])),s.find(".sw-feedback-success").remove(),s.find(".sw-manager,.sw-messages-list,.sw-message-group,.sw-send-group").show(),t.hideChat.call(t),s.find(".sw-send-group .good,.sw-send-group .bad").hide(),s.find(".sw-send-group .sw-send-btn").removeClass("sw-send-btn-rating-on"),t.settings.foreverChat&&t.showChat.call(t),!1})).appendTo(".stream-wood-chat .sw-feedback-success"),s.find(".sw-manager,.sw-messages-list,.sw-message-group,.sw-send-group,.stream-wood-feedback-personal-data").hide(),this.settings.feedback=!1,s.find(".sw-feedback-success").show().find(".sw-send-group").show(),s.find(".sw-email,.sw-phone").val(""),s.find(".sw-message").addClass("sw-message-empty"),this.showError("","email"),this.showError("","phone");var y={swClientName:h,swContactType:u,swEmail:p,swMessage:m,swEmailType:w,swContactId:v};this.feedbackRequest(y)}else d.focus();return!1},s.prototype.feedbackDefaultParams=function(){var e={swClientName:this.settings.clientName,swContactId:0,swEmailType:0,swFormType:"feedback"};e.swContactType=this.settings.swContactType;var t=this.settings.swEmail,s=this.settings.swPhone;switch(parseInt(this.settings.design.contactSelectType,10)||0){case 1:e.swEmail=s,e.swContactType=2;break;case 2:e.swEmail=t,e.swContactType=1;break;case 3:e.swEmail=t+", "+s,e.swContactType=3;break;default:2===e.swContactType?e.swEmail=s:e.swEmail=t}return e},s.prototype.feedbackRequest=function(s){var n=this.feedbackDefaultParams();(s=e.extend(n,s)).swFormType="feedback";var i=this;e.getJSON(this.settings.serverUrl+"/api/?callback=?",{Action:"sendFeedback",swDomainKey:this.settings.swDomainKey,swKey:this.settings.swKey,swSessionId:this.settings.sessionId,Params:encodeURIComponent(t(s)),crmCookie:t(this.getCookiesForCrm()),crmParam:t(this.getParamsForCrm()),crmReferer:t(document.referrer),crmUri:t(window.location.href)}).done(function(t){if(i.runTrigger.apply(i,["onaftersendfeedback",s]),t.hasOwnProperty("Errors")&&t.length>0&&e.each(t.Errors,function(e,t){i.showError.apply(i,[t,"email"]),i.showError.apply(i,[t,"phone"])}),void 0!==i.settings.design.metrica_id&&void 0!==i.settings.design.feedback_goal){var n="yaCounter"+i.settings.design.metrica_id||"",o=i.settings.design.feedback_goal||"";window[n]&&window[n].reachGoal(o)}void 0!==window._gaq&&window._gaq.push(["_trackEvent","StreamWood","Feedback","   "]),void 0!==window.ga&&"function"==typeof window.ga&&window.ga("send","event","StreamWood","Feedback","   ")})},s.prototype.noReplySendButtonClick=function(){var s=this;this.startCollectorChooser();var n=e(".stream-wood-noreply"),i=n.find(".sw-phone"),o=n.find(".sw-email");if(1==n.find(".sw-contact-type").val()){if(!o.val())return s.showError(this.languages[s.language].swEmptyErrorText,"sw-email",".stream-wood-noreply"),!1}else if(2==n.find(".sw-contact-type").val()&&!i.val())return s.showError(this.languages[s.language].swEmptyErrorText,"sw-phone",".stream-wood-noreply"),!1;var a=n.find(".sw-offline-select-manager:visible");if(a.length>0&&!+a.find("option:selected").val())return this.showError(this.languages[this.language].swEmptyErrorText),!1;switch(parseInt(this.settings.design["collector-selecttype"])){case 1:if(i.length&&!i.val())return this.showError(this.languages[this.language].swEmptyErrorText,"phone"),!1;break;case 2:if(o.length&&!o.val())return this.showError(this.languages[this.language].swEmptyErrorText,"email"),!1;break;case 3:if(!o.val()||!i.val())return this.showError(this.languages[this.language].swEmptyErrorText,"phone"),!1;break;default:if(!o.val()&&!i.val())return this.showError(this.languages[this.language].swEmptyErrorText,"phone"),!1}if(2==this.settings.design["collector-selecttype"]||3==this.settings.design["collector-selecttype"]){if(!new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i).test(e(".stream-wood-noreply .sw-email").val()))return this.showError(this.languages[this.language].swEmailErrorText,"email",".stream-wood-noreply"),!1;this.showError("","email",".stream-wood-noreply")}var r=n.find(".sw-message");if(r.val()){var l=n.find(".sw-name").val();(l=l.split('"').join(""))||(l=this.languages[this.language].swGuestNameText);var c=n.find(".sw-contact-type").val(),d=o.val(),h=i.val();switch(parseInt(this.settings.design["collector-selecttype"])){case 1:d=h,c=2;break;case 2:c=1;break;case 3:d=d+", "+h,c=3;break;default:2==c&&(d=h)}var u=r.val(),p=0,g=0;this.settings.design.offlineSelect&&(p=this.settings.design.selectType,g=1==this.settings.design.operatorShowType?e('.sw-select-manager input[name="sw-select-manager-noreply"]:checked').val():n.find(".sw-select-manager select").val());var f="";f=1==this.settings.design["feedback-selecttype"]?'<p class="sw-title">'+this.languages[this.language].swMessageSendedText+"</p><p>"+this.languages[this.language].swAnswerText2+"<b>"+i.val()+"</b></p>":3==this.settings.design["feedback-selecttype"]?'<p class="sw-title">'+this.languages[this.language].swMessageSendedText+"</p><p>"+this.languages[this.language].swAnswerText2+"<b>"+i.val()+"</b>"+this.languages[this.language].swAnswerOrText+"<b>"+o.val()+"</b></p>":2==c?'<p class="sw-title">'+this.languages[this.language].swMessageSendedText+"</p><p>"+this.languages[this.language].swAnswerText2+"<b>"+i.val()+"</b></p>":'<p class="sw-title">'+this.languages[this.language].swMessageSendedText+"</p><p>"+this.languages[this.language].swAnswerText1+"<b>"+o.val()+"</b></p>",e(".stream-wood-noreply").prepend(e("<div>").addClass("sw-feedback-success").hide().html(f)),e("<div>").addClass("sw-send-group").append(e("<a>").addClass("sw-send-btn").text(this.languages[this.language].swCloseWindowText).unbind("click").click(function(){return s.hideNoReply.call(s),e(".stream-wood-noreply .sw-feedback-success").remove(),e(".stream-wood-noreply .sw-manager,.stream-wood-noreply .sw-messages-list,.stream-wood-noreply .sw-message-group,.stream-wood-noreply .sw-send-group").show(),s.slideUp.call(s),!1})).appendTo(".stream-wood-noreply .sw-feedback-success"),e(".stream-wood-noreply .sw-manager,.stream-wood-noreply .sw-messages-list,.stream-wood-noreply .sw-message-group,.stream-wood-noreply .sw-send-group").hide(),this.settings.feedback=!1,e(".stream-wood-noreply .sw-feedback-success").show().find(".sw-send-group").show(),e(".stream-wood-noreply .sw-email,.stream-wood-noreply .sw-phone").val(""),e(".stream-wood-noreply .sw-message").addClass("sw-message-empty"),this.showError("","email",".stream-wood-noreply"),this.showError("","phone",".stream-wood-noreply"),e.getJSON(this.settings.serverUrl+"/api/?callback=?",{Action:"sendFeedback",swDomainKey:this.settings.swDomainKey,swKey:this.settings.swKey,swSessionId:this.settings.sessionId,Params:encodeURIComponent(t({swClientName:l,swContactType:c,swEmail:d,swMessage:u,swEmailType:p,swContactId:g,swFormType:"leeds_online"})),crmCookie:t(this.getCookiesForCrm()),crmParam:t(this.getParamsForCrm()),crmReferer:t(document.referrer),crmUri:t(window.location.href)}).done(function(t){if(t.hasOwnProperty("Errors")&&t.length>0&&e.each(t.Errors,function(e,t){s.showError.apply(s,[t,"email",".stream-wood-noreply"]),s.showError.apply(s,[t,"phone",".stream-wood-noreply"])}),void 0!==s.settings.design.metrica_id&&void 0!==s.settings.design.noreply_goal){var n="yaCounter"+s.settings.design.metrica_id||"",i=s.settings.design.noreply_goal||"";window[n]&&window[n].reachGoal(i)}void 0!==window._gaq&&window._gaq.push(["_trackEvent","StreamWood","NoReply","   "]),void 0!==window.ga&&"function"==typeof window.ga&&window.ga("send","event","StreamWood","NoReply","   ")})}else r.focus();return!1},s.prototype.personalDataIsChecked=function(e,t){var s=this,n=!0;return[{key:"advertising_agree",error_text:"      "},{key:"personal_data",error_text:"       "}].forEach(function(i){var o=e.find("[name="+i.key+"]");o.length>0&&o.parent().is(":visible")&&(o.is(":checked")||(s.showError(i.error_text,t,e),n&=!1))}),!0===n&&s.showError("",t,e),n},s.prototype.generatorSendButtonClick=function(){var s=this,n=e(".stream-wood-generator");if(this.showError("","name",n),this.showError("","email",n),!this.personalDataIsChecked(n,"name"))return!1;var i,o=this.languages[this.language].swGenNameText;i=this.settings.design["generator-contact-type"]&&"1"==this.settings.design["generator-contact-type"]?this.languages[this.language].swGenEmailText:this.languages[this.language].swGenPhoneText;var a=n.find(".sw-send-group"),r=a.find(".sw-gen-name"),l=a.find(".sw-gen-email"),c=a.find(".sw-gen-phone"),d=a.find(".sw-gen-user-field"),h=n.find(".sw-select-department");if(!r.val()||r.val()==o)return this.showError(this.languages[this.language].swEmptyErrorText,"name",n),!1;if(!l.val()||l.val()==i)return this.showError(this.languages[this.language].swEmptyErrorText,"email",n),!1;if(1==h.length&&!h.val())return this.showError(this.languages[this.language].swEmptyErrorText,"department",n),!1;var u,p=l.val(),g=c.val();if(void 0!==g&&11!=g.replace(/\D/gim,"").length)return this.showError("  ","email",n),!1;switch(parseInt(this.settings.design["generator-contact-type"])){case 1:u=1;break;case 2:p=g,u=2;break;case 3:p=p+", "+g,u=3;break;default:u=2,p=g}var f,m=r.val().split('"').join("");void 0!==this.settings.design["generator-user-field"]&&(f=this.settings.design["generator-user-field"]+": "+d.val());var w,v;void 0!==this.settings.design["generator-choice-department"]&&"1"==this.settings.design["generator-choice-department"]&&(w=n.find(".sw-container .sw-select-department").val(),v=1);var y,b=p,k=document.URL,x=this.settings.design["generator-id"]||"common",T=this.settings.sessionId;y=void 0!==this.settings.design["generator-after-text"]&&""!=this.settings.design["generator-after-text"]?'<p class="sw-title">'+this.settings.design["generator-after-text"]+"</p>":'<p class="sw-title">'+this.languages[this.language].swGenFeedbackText+"</p><p>"+this.languages[this.language].swGenFeedbackText1+"</b></p>",void 0!==this.settings.design["generator-if-follow"]&&0!=this.settings.design["generator-if-follow"]||(e(".stream-wood-generator").append(e("<div>").addClass("sw-feedback-success").hide().html(y).append(e("<div>").addClass("sw-send-group").append(e("<a>").addClass("sw-send-btn").html(this.languages[this.language].swCloseWindowText).unbind("click").click(function(){var t=e(".stream-wood-generator");return t.find(".sw-feedback-success").remove(),t.find(".sw-manager,.sw-send-group,.sw-copyright,.sw-disclaimer,.sw-select-department").show(),s.hideGenerator.call(s),s.generatorStopTimer.call(s),!1})))),n.find(".sw-manager,.sw-send-group,.sw-copyright,.sw-disclaimer,.sw-select-department").hide(),this.settings.feedback=!1,n.find(".sw-feedback-success").show().find(".sw-send-group").show(),r.val(""),l.val(""),c.val(""),this.showError("","name",n),this.showError("","email",n));var C={swClientName:m,swContactType:u,swEmail:b,swEmailType:v,swMessage:k,swUserMessage:f,swContactId:w,swGeneratorId:x,swFormType:"generator"};return e.getJSON(this.settings.serverUrl+"/api/?callback=?",{Action:"sendFeedback",swDomainKey:this.settings.swDomainKey,swKey:this.settings.swKey,swSessionId:T,Params:encodeURIComponent(t(C)),crmCookie:t(this.getCookiesForCrm()),crmParam:t(this.getParamsForCrm()),crmReferer:t(document.referrer),crmUri:t(window.location.href)}).done(function(t){if(t.Success?(s.runTrigger.apply(s,["onaftersendgenerator",C]),void 0!==s.settings.design["generator-if-follow"]&&1==s.settings.design["generator-if-follow"]&&(s.hideGenerator(),s.generatorStopTimer(),void 0!==s.settings.design["generator-follow-url"]&&s.setTimeout("go_to_url",function(){window.location=s.settings.design["generator-follow-url"]},3e3))):t.Errors&&e.each(t.Errors,function(e,t){s.showError.apply(s,[t,"name",".stream-wood-generator"]),s.showError.apply(s,[t,"email",".stream-wood-generator"])}),void 0!==s.settings.design.metrica_id&&void 0!==s.settings.design.generator_goal){var n="yaCounter"+s.settings.design.metrica_id||"",i=s.settings.design.generator_goal||"";window[n]&&window[n].reachGoal(i)}void 0!==window._gaq&&window._gaq.push(["_trackEvent","StreamWood","Generator","   "]),void 0!==window.ga&&"function"==typeof window.ga&&window.ga("send","event","StreamWood","Generator","   ")}),!1},s.prototype.generatorNewVersionSendButtonClick=function(){var s=this,n=e(".stream-wood-generator-2");if(this.showError("","name",n),this.showError("","email",n),!this.personalDataIsChecked(n,"name"))return!1;var i,o,a,r=this.languages[this.language].swGenNameText,l=this.languages[this.language].swGenPhoneText,c=this.languages[this.language].swGenEmailText,d=n.find(".stream-wood-generator-client-data"),h=d.find(".sw-gen-name"),u=d.find(".sw-gen-email"),p=d.find(".sw-gen-phone"),g=d.find(".sw-select-department"),f=d.find(".sw-gen-user-field");if(void 0!==this.settings.design["generator-settings"]["gen-one-button"]&&1==parseInt(this.settings.design["generator-settings"]["gen-one-button"]))o="-",a="-";else{if(!h.val()||h.val()==r)return this.showError(this.languages[this.language].swEmptyErrorText,"name",n),!1;if(void 0!==this.settings.design["generator-contact-type"]){if(!("1"!=this.settings.design["generator-contact-type"]&&"3"!=this.settings.design["generator-contact-type"]||p.val()&&p.val()!=l))return this.showError(this.languages[this.language].swEmptyErrorText,"phone",n),!1;if(!("2"!=this.settings.design["generator-contact-type"]&&"3"!=this.settings.design["generator-contact-type"]||u.val()&&u.val()!=c))return this.showError(this.languages[this.language].swEmptyErrorText,"email",n),!1}else if(!p.val()||p.val()==l)return this.showError(this.languages[this.language].swEmptyErrorText,"phone",n),!1;if(o=u.val(),void 0!==(a=p.val())&&11!=a.replace(/\D/gim,"").length)return this.showError("  ","phone",n),!1;if(1==g.length&&!g.val())return this.showError(this.languages[this.language].swEmptyErrorText,"department",n),!1}switch(parseInt(this.settings.design["generator-contact-type"])){case 1:o=a,i=2;break;case 2:i=1;break;case 3:o=o+", "+a,i=3;break;default:i=2,o=a}var m=h.val().split('"').join("");void 0!==this.settings.design["generator-settings"]["gen-one-button"]&&1==parseInt(this.settings.design["generator-settings"]["gen-one-button"])&&(m="-");var w;void 0!==this.settings.design["generator-user-field"]&&(w=this.settings.design["generator-user-field"]+": "+f.val());var v,y;void 0!==this.settings.design["generator-choice-department"]&&"1"==this.settings.design["generator-choice-department"]&&(v=n.find(".sw-select-department").val(),y=1);var b,k=o,x=document.URL,T=this.settings.design["generator-id"]||"common",C=this.settings.sessionId;b=void 0!==this.settings.design["generator-after-text"]&&""!=this.settings.design["generator-after-text"]?'<p class="sw-title">'+this.settings.design["generator-after-text"]+"</p>":'<p class="sw-title">'+this.languages[this.language].swGenFeedbackText+"</p><p>"+this.languages[this.language].swGenFeedbackText1+"</b></p>",void 0!==this.settings.design["generator-if-follow"]&&0!=this.settings.design["generator-if-follow"]||(e(".stream-wood-generator-2").append(e("<div>").addClass("stream-wood-feedback-success").hide().html(b).append(e("<a>").addClass("sw-send-btn").html(this.languages[this.language].swCloseWindowText).unbind("click").click(function(){var t=e(".stream-wood-generator-2");return t.find(".stream-wood-feedback-success").remove(),t.find(".stream-wood-generator-copyright,.stream-wood-generator-container").show(),s.hideGenerator.call(s),s.generatorStopTimer.call(s),!1}))),e(".stream-wood-generator-wallpaper").css("background-image","none"),n.find(".stream-wood-generator-container,.stream-wood-generator-copyright").hide(),this.settings.feedback=!1,n.find(".stream-wood-feedback-success").show().find(".sw-send-group").show(),1==this.settings.design["generator-settings"]["gen-wallpaper"]&&n.css({width:460,height:200}),h.val(""),u.val(""),p.val(""),this.showError("","name",n),this.showError("","email",n));var _={swClientName:m,swContactType:i,swEmail:k,swEmailType:y,swMessage:x,swUserMessage:w,swContactId:v,swGeneratorId:T,swFormType:"generator"};return e.getJSON(this.settings.serverUrl+"/api/?callback=?",{Action:"sendFeedback",swDomainKey:this.settings.swDomainKey,swKey:this.settings.swKey,swSessionId:C,Params:encodeURIComponent(t(_)),crmCookie:t(this.getCookiesForCrm()),crmParam:t(this.getParamsForCrm()),crmReferer:t(document.referrer),crmUri:t(window.location.href)}).done(function(t){if(t.Success?(s.runTrigger.apply(s,["onaftersendgeneratorv2",_]),void 0!==s.settings.design["generator-if-follow"]&&1==s.settings.design["generator-if-follow"]&&(s.hideGenerator(),s.generatorStopTimer(),void 0!==s.settings.design["generator-follow-url"]&&s.setTimeout("go_to_url",function(){window.location=s.settings.design["generator-follow-url"]},3e3))):t.Errors&&e.each(t.Errors,function(e,t){s.showError.apply(s,[t,"name",n]),s.showError.apply(s,[t,"email",n])}),void 0!==s.settings.design.metrica_id&&void 0!==s.settings.design.generator_goal){var i="yaCounter"+s.settings.design.metrica_id||"",o=s.settings.design.generator_goal||"";window[i]&&window[i].reachGoal(o)}void 0!==window._gaq&&window._gaq.push(["_trackEvent","StreamWood","Generator","   "]),void 0!==window.ga&&"function"==typeof window.ga&&window.ga("send","event","StreamWood","Generator","   ")}),!1},s.prototype.registratorSendButtonClick=function(){var s=this,n=e(".stream-wood-registrator");if(this.showError("","name",n),this.showError("","email",n),!this.personalDataIsChecked(n,"name"))return!1;var i=n.find(".stream-wood-registrator-fields"),o=i.find(".sw-reg-date"),a=i.find(".sw-reg-name"),r=i.find(".sw-reg-email"),l=i.find(".sw-reg-phone");if(!a.val())return this.showError(this.languages[this.language].swEmptyErrorText,"name",".stream-wood-registrator"),!1;if(void 0!==this.settings.design["registrator-contact-type"]){if(("1"==this.settings.design["registrator-contact-type"]||"3"==this.settings.design["registrator-contact-type"])&&!l.val())return this.showError(this.languages[this.language].swEmptyErrorText,"phone",".stream-wood-registrator"),!1;if(("2"==this.settings.design["registrator-contact-type"]||"3"==this.settings.design["registrator-contact-type"])&&!r.val())return this.showError(this.languages[this.language].swEmptyErrorText,"email",".stream-wood-registrator"),!1}var c=o.val(),d=r.val(),h=l.val();a.val();if(("1"==this.settings.design["registrator-contact-type"]||"3"==this.settings.design["registrator-contact-type"])&&void 0!==h&&11!=h.replace(/\D/gim,"").length)return this.showError("  ","phone",".stream-wood-registrator"),!1;var u,p=this.settings.design["registrator-contact-type"],g=a.val().split('"').join("");u=void 0!==this.settings.design["registrator-after-text"]&&""!=this.settings.design["registrator-after-text"]?'<p class="sw-title">'+this.settings.design["registrator-after-text"]+"</p>":'<p class="sw-title">'+this.languages[this.language].swGenFeedbackText+"</p><p>"+this.languages[this.language].swGenFeedbackText1+"</b></p>",void 0!==this.settings.design["registrator-if-follow"]&&0!=this.settings.design["registrator-if-follow"]||(n.find(".stream-wood-registrator-success").html(u).append(e('<button class="stream-wood-registrator-success-btn">').html(this.languages[this.language].swCloseWindowText).unbind("click").click(function(){return s.hideRegistrator.call(s),s.registratorStopTimer.call(s),!1})),n.find(".stream-wood-registrator-success-btn").css("background-color","#"+this.settings.design["registrator-color"]),n.find(".stream-wood-registrator-form").hide(),n.find(".stream-wood-registrator-success").show(),this.settings.feedback=!1,a.val(""),r.val(""),l.val(""),this.showError("","name",".stream-wood-registrator"),this.showError("","email",".stream-wood-registrator"));for(var f=this.settings.design["registrator-custom-fields"].length,m=[],w=0;w<f;w++)m[w]=e('select[name="custom_field['+w+']_origin"]').val();var v={swClientName:g,swContactType:p,swDate:c,swEmail:d,swPhone:h,swUrl:document.URL,swCustomFields:m,swRegistratorId:this.settings.design["registrator-id"]};return e.getJSON(this.settings.serverUrl+"/api/?callback=?",{Action:"sendRegistrator",swDomainKey:this.settings.swDomainKey,swKey:this.settings.swKey,swSessionId:this.settings.sessionId,Params:encodeURIComponent(t(v)),crmCookie:t(this.getCookiesForCrm()),crmParam:t(this.getParamsForCrm()),crmReferer:t(document.referrer),crmUri:t(window.location.href)}).done(function(t){if(t.Success?(s.runTrigger.apply(s,["onaftersendregistrator",v]),void 0!==s.settings.design["registrator-if-follow"]&&1==s.settings.design["registrator-if-follow"]&&(s.hideRegistrator(),s.registratorStopTimer(),void 0!==s.settings.design["registrator-follow-url"]&&s.setTimeout("go_to_url",function(){window.location=s.settings.design["registrator-follow-url"]},3e3))):t.Errors&&e.each(t.Errors,function(e,t){s.showError.apply(s,[t,"name",".stream-wood-registrator"]),s.showError.apply(s,[t,"email",".stream-wood-registrator"])}),void 0!==s.settings.design.metrica_id&&void 0!==s.settings.design.registrator_goal){var n="yaCounter"+s.settings.design.metrica_id||"",i=s.settings.design.registrator_goal||"";window[n]&&window[n].reachGoal(i)}void 0!==window._gaq&&window._gaq.push(["_trackEvent","StreamWood","Registrator","  "]),void 0!==window.ga&&"function"==typeof window.ga&&window.ga("send","event","StreamWood","Registrator","  ")}),!1},s.prototype.setCookie=function(e,t,s,n,i,o){if(!e||!t)return!1;n||(n="/");var a="";a=e+"="+encodeURIComponent(t),s&&(a+="; expires="+s.toGMTString()),n&&(a+="; path="+n),i&&(a+="; domain="+i),o&&(a+="; secure"),document.cookie=a},s.prototype.getCookie=function(e){var t="(?:; )?"+e+"=([^;]*);?";return!!new RegExp(t).test(document.cookie)&&decodeURIComponent(RegExp.$1)},s.prototype.getUriParamByName=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},s.prototype.deleteCookie=function(e,t,s){return t||(t="/"),this.setCookie(e,"0",new Date(0),t,s),!0},s.prototype.doEnding=function(e,t,s,n){return(e=""+e).charAt(e.length-2)&&1==e.charAt(e.length-2)?n:1==e.charAt(e.length-1)?t:e.charAt(e.length-1)>1&&e.charAt(e.length-1)<5?s:n},s.prototype.stripTags=function(e,t){t=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var s=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,n=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return e.replace(n,"").replace(s,function(e,s){return t.indexOf("<"+s.toLowerCase()+">")>-1?e:""})},s.prototype.utf8_encode=function(e){for(var t="",s=0;s<e.length;s++)t+="&#"+e.charCodeAt(s)+";";return t},s.prototype.initTimeouts=function(){this.hasOwnProperty("_timeouts")&&this._timeouts.length>0&&this.deleteAllTimeouts(),this._timeouts=[]},s.prototype.setTimeout=function(e,t,s){this._timeouts.hasOwnProperty(e)&&this.deleteTimeout(e),this._timeouts[e]=setTimeout(t,s)},s.prototype.getTimeout=function(e){return this._timeouts[e]},s.prototype.deleteTimeout=function(e){void 0!==this._timeouts[e]&&(clearTimeout(this._timeouts[e]),delete this._timeouts[e])},s.prototype.deleteAllTimeouts=function(){for(var e in this._timeouts)this._timeouts.hasOwnProperty(e)&&this.deleteTimeout(e)},s.prototype.initIntervals=function(){this.hasOwnProperty("_intervals")&&this._intervals.length>0&&this.deleteAllIntervals(),this._intervals=[]},s.prototype.setInterval=function(e,t,s){this._intervals.hasOwnProperty(e)&&this.deleteInterval(e),this._intervals[e]=setInterval(t,s)},s.prototype.getInterval=function(e){return this._intervals[e]},s.prototype.deleteInterval=function(e){void 0!==this._intervals[e]&&(clearInterval(this._intervals[e]),delete this._intervals[e])},s.prototype.deleteAllIntervals=function(){for(var e in this._intervals)this._intervals.hasOwnProperty(e)&&this.deleteInterval(e)},s.prototype.IOinit=function(){var t=this;if(!window.hasOwnProperty("swc_socket")||!window.swc_socket){var s=parseInt(this.settings.nodeId)||0;s&&"undefined"!=typeof io&&(window.swc_socket=io.connect(this.settings.socketServerUrl,{path:"/"+s+"/socket.io",transports:["websocket","xhr-polling","jsonp-polling","polling"]}),window.swc_socket.on("connected",function(e){t.IOconnected.apply(t,[e])}).on("disconnect",function(e){t.IOdisconnect.apply(t,[e])}).on("swSessionInitialized",function(e){t.IOswSessionInitialized.apply(t,[e])}).on("swMessageFromSessionSended",function(e){t.IOswMessageFromSessionSended.apply(t,[e])}).on("swOperatorType",function(e){t.IOswOperatorType.apply(t,[e])}).on("swOperatorEndType",function(e){t.IOswOperatorEndType.apply(t,[e])}).on("swMessageFromOperator",function(e){t.IOswMessageFromOperator.apply(t,[e])}).on("swOperatorChanged",function(e){t.IOswOperatorChanged.apply(t,[e])}).on("swOperatorConnected",function(e){t.IOswOperatorConnected.apply(t,[e])}).on("swOperatorDisconnected",function(e){t.IOswOperatorDisconnected.apply(t,[e])}).on("swSupervisorCommandFromOperator",function(e){t.IOswSupervisorCommandFromOperator.apply(t,[e])}),this.settings.hasOwnProperty("superVisorMode")&&this.settings.superVisorMode&&(this.setInterval("sendCursorPosTimer",function(){window.swc_socket&&t.settings.superVisorMode&&t.IOemit.apply(t,["swSupervisorCommandToOperator",{action:"sendCursorPosition",url:encodeURIComponent(document.URL),x:t.settings.cursorPosition.x,y:t.settings.cursorPosition.y,width:e(document).width(),height:e(document).height()}])},2500),this.setTimeout("operatorTimer",function(){t.settings.superVisorMode&&(t.settings.superVisorMode=!1,t.deleteInterval.apply(t,["sendCursorPosTimer"]),t.setCookie.apply(t,[t.strings.isConnection,"false"]))},1e4)))}},s.prototype.IOemit=function(e,t){window.hasOwnProperty("swc_socket")&&window.swc_socket&&window.swc_socket.emit(e,t)},s.prototype.IOconnected=function(){var e=this.settings.sessionId;e&&this.IOemit("swSetSessionId",e)},s.prototype.IOdisconnect=function(){delete window.swc_socket,window.swc_socket=!1},s.prototype.IOswSessionInitialized=function(){this.settings.manager.key&&(this.IOemit("swSetSessionOperatorKey",this.settings.manager.key),this.IOemit("swSessionEndType",{visor:this.settings.superVisorMode}),this.settings.swSocketInitialized=!0),this.IOemit("swUpdateVisitHistory",{url:encodeURIComponent(document.URL),title:document.title})},s.prototype.IOswMessageFromSessionSended=function(){var t=new Date;t.setHours(t.getHours()+18),this.setCookie("swnoinvitation",1,t),e(".stream-wood-chat .sw-messages-list .sw-ml-item").removeClass("sw-ml-item-wait"),this.showError()},s.prototype.IOswOperatorType=function(){e(".stream-wood-chat .sw-newmessage").length||(e(".stream-wood-chat .sw-messages-list .sw-ml-item-type").remove(),this.appendTypeMessage(),e(".stream-wood-chat .sw-messages-list").scrollTop(100*e(".stream-wood-chat .sw-messages-list .sw-ml-item").length))},s.prototype.IOswOperatorEndType=function(){e(".stream-wood-chat .sw-messages-list .sw-ml-item-type").remove()},s.prototype.IOswMessageFromOperator=function(t){if(e(".stream-wood-chat .sw-newmessage").length)this.settings.chatOpened=!0,this.settings.needBeep=!0,this.setCookie(this.strings.opened,1),e(".stream-wood-chat,.stream-wood-invitation,.stream-wood-btn").remove(),this.reload(2e3);else{e(".stream-wood-chat .sw-messages-list .sw-ml-item-type").remove(),this.settings.chatOpened||(this.hideInvitation(),this.slideUp());var s={},n=new Date;s.message=t.data.message,s.direct=this.consts.SW_MESSAGE_FROM_MANAGER,s.d=n.getDate(),s.m=n.getMonth()+1,s.y=n.getFullYear(),s.hour=n.getHours(),s.min=n.getMinutes(),s.min=n.getMinutes(),s.node_id=t.data.node_id,this.appendMessage(s),e(".stream-wood-chat .sw-messages-list").scrollTop(100*e(".stream-wood-chat .sw-messages-list .sw-ml-item").length),this.playBeep(),this.setTitle(),this.settings.design["collector-hide"]&&"undefined"!=this.settings.design["collector-hide"]||this.slideDownNoReply()}},s.prototype.IOswOperatorChanged=function(e){e&&e.oid&&(this.settings.manager.id=e.oid,void 0!==this.settings.findOperatorId&&(this.settings.findOperatorId=e.oid)),this.reload(2e3)},s.prototype.IOswOperatorConnected=function(e){this.settings.manager.id==e.oid&&(1==this.settings.manager.from_mobile?this.settings.manager.status=this.consts.SW_MANAGER_STATUS_ONLINE:this.getTimeout("reload")?this.deleteTimeout("reload"):this.reload(2e3))},s.prototype.IOswOperatorDisconnected=function(e){this.settings.manager.id==e.oid&&(1==this.settings.manager.from_mobile?this.settings.manager.status=this.consts.SW_MANAGER_STATUS_OFFLINE:this.reload(1e4))},s.prototype.IOswSupervisorCommandFromOperator=function(t){var s=this;if(!this.settings.inFrame){var n=this.settings.sessionId;switch(t.action){case"operatorConnect":if(t.sid!=n||t.manager!=this.settings.manager.id)break;this.settings.superVisorMode=!0,this.setInterval("sendCursorPosTimer",function(){s.settings.superVisorMode&&s.IOemit.apply(s,["swSupervisorCommandToOperator",{action:"sendCursorPosition",url:encodeURIComponent(document.URL),x:s.settings.cursorPosition.x,y:s.settings.cursorPosition.y,width:e(document).width(),height:e(document).height()}])},2500),this.setCookie(this.strings.isConnection,"true");break;case"requestPermission":if(t.sid!=n||t.manager!=this.settings.manager.id)break;e(".stream-wood-chat .sw-messages-list .sw-ml-item-access").remove(),this.slideUp(),e("<div>").addClass("sw-ml-item sw-ml-item-my sw-ml-item-access").append('<p class="sw-name-d">'+this.settings.managerName+" "+this.languages[this.language].swRequestPermissionText+"</p>").appendTo(".stream-wood-chat .sw-messages-list"),e("<div>").addClass("sw-send-group sw-grey").append(e('<a href="#">').addClass("sw-send-btn sw-send-btn-margin").text("").click(function(){return e(".stream-wood-chat .sw-messages-list .sw-ml-item-access").remove(),s.IOemit.apply(s,["swSupervisorCommandToOperator",{action:"sendAccessGranted",clientName:s.settings.clientName,width:e(document).width(),height:e(document).height()}]),e("<div>").addClass("sw-ml-item sw-ml-item-my sw-ml-item-access").append('<p class="sw-name-d">'+s.languages[s.language].swPermissionAccessText+"</p>").appendTo(".stream-wood-chat .sw-messages-list"),e(".stream-wood-chat .sw-messages-list").scrollTop(100*e(".stream-wood-chat .sw-messages-list .sw-ml-item").length),!1})).append(e('<a href="#">').addClass("sw-send-btn sw-send-btn-margin").html("").click(function(){return e(".stream-wood-chat .sw-messages-list .sw-ml-item-access").remove(),s.IOemit.apply(s,["swSupervisorCommandToOperator",{action:"sendAccessDenied"}]),e(".stream-wood-chat .sw-messages-list").scrollTop(100*e(".stream-wood-chat .sw-messages-list .sw-ml-item").length),!1})).appendTo(".stream-wood-chat .sw-messages-list .sw-ml-item-access"),e(".stream-wood-chat .sw-messages-list").scrollTop(100*e(".stream-wood-chat .sw-messages-list .sw-ml-item").length);break;case"doAllocation":var i=e(document).width(),o=e(document).width()-(t.position.x+t.size.width);o<0&&(o=0);var a=e(document).height()-(t.position.y+t.size.height);a<0&&(a=0),e("body").append(e("<div>").addClass("dark-cover-top").css({height:t.position.y+"px",width:i+"px"})).append(e("<div>").addClass("dark-cover-bottom").css({top:t.position.y+t.size.height+"px",width:i+"px",height:a+"px"})).append(e("<div>").addClass("dark-cover-left").css({top:t.position.y,height:t.size.height,width:t.position.x})).append(e("<div>").addClass("dark-cover-right").css({top:t.position.y,height:t.size.height,left:t.position.x+t.size.width,width:o})).append(e("<div>").addClass("tclose").css({top:t.position.y-25+"px",left:o<30?t.position.x-25+"px":t.position.x+t.size.width+"px"}).unbind("click").click(function(){e(".dark-cover-top,.dark-cover-bottom,.dark-cover-left,.dark-cover-right,.tclose").remove(),s.IOemit.apply(s,["swSupervisorCommandToOperator",{action:"clientAllocationHide"}])})),e(document).scrollLeft(t.position.x-100),e(document).scrollTop(t.position.y-100);break;case"allocationHide":e(".dark-cover-top,.dark-cover-bottom,.dark-cover-left,.dark-cover-right,.tclose").remove();break;case"operatorDisconnected":if(t.sid!=n)break;this.settings.superVisorMode&&(this.settings.superVisorMode=!1,this.deleteInterval("sendCursorPosTimer"),this.setCookie(this.strings.isConnection,"false"));break;case"operatorIsConnect":if(t.sid!=n)break;this.setTimeout("operatorTimer",function(){s.settings.superVisorMode&&(s.settings.superVisorMode=!1,s.deleteInterval.apply(s,["sendCursorPosTimer"]),s.setCookie.apply(s,[s.strings.isConnection,"false"]))},1e4)}}},s.prototype.setLanguages=function(){this.languages={ru:{sendButtonText:"",swGuestNameText:"",swHideText:"",swSoundOffText:" ",swSoundOnText:" ",swChangeRatingText:" ",swSendResultText:",   !",swSetRatingText:" ",swOrText:"",swWorkedOnText:" ",swYouMessageText:"",swCancelButtonText:", ",swQuestButtonText:"",swSendQuestionText:" ",swQuestionText:"",swOnlineText:" ",swOfflineText:"  ",swOperatorOnlineText:"  ",swOperatorOfflineText:"   ",swChangeDepText:"   ",swChangeCityText:"  ",swYouNameText:" ",swHelloText:"",swChangeManagerText:"    ",swManagerText:"",swDepText:"",swCityText:"",swFeedbackText0:"  ,           .",swFeedbackText1:"  ,        .",swFeedbackText2:"  ,         .",swFeedbackText3:"  ,         .",swPhoneText:"",swEmailText:"",swEmptyErrorText:"  ",swEmailErrorText:"  ",swMessageSendedText:"   ",swAnswerText1:"       ",swAnswerText2:"       ",swAnswerOrText:"  ",swCloseWindowText:" ",swNoReplyText:",    ",swNoReplyContactsText:"       !",swGeneratorTitleText:"  !",swGeneratorContentText:"      ?",swGenDaysText0:"",swGenDaysText1:"",swGenDaysText2:"",swGenDaysText3:"",swGenHoursText0:"",swGenHoursText1:"",swGenHoursText2:"",swGenHoursText3:"",swGenMinutesText0:"",swGenMinutesText1:"",swGenMinutesText2:"",swGenMinutesText3:"",swGenSecondsText0:"",swGenSecondsText1:"",swGenSecondsText2:"",swGenSecondsText3:"",swGenNameText:" ",swGenPhoneText:" ",swGenEmailText:" ",swGenBtnYesText:"",swGenBtnNoText:", ",swGenFeedbackText:"C,    ",swGenFeedbackText1:"      ",swGenNoWorked:"       !",swRequestPermissionText:"   .  ?",swPermissionAccessText:" .",swNewMesageText:" ",swInvitationText:"!      .  - ?     !",swNoManagerTitle:"   ",swNoManagerText:"      ",swManagerHelloText:",   ",swManagerManHelpText:"   .",swManagerWomanHelpText:"   .",swServerErrorText:"   ,    ...",swInText:"  "},en:{sendButtonText:"Send text",swGuestNameText:"Guest",swHideText:"Hide",swSoundOffText:"Sound off",swSoundOnText:"Sound on",swChangeRatingText:"Change rating",swSendResultText:"Thank you, your vote has been counted!",swSetRatingText:"Rate dialogue",swOrText:"or",swWorkedOnText:"Powered by",swYouMessageText:"You message",swCancelButtonText:"No, thanks",swQuestButtonText:"Question",swSendQuestionText:"Ask a question",swQuestionText:"Question",swOnlineText:"Online",swOfflineText:"Offline",swOperatorOnlineText:"operator online",swOperatorOfflineText:"operator offline",swChangeDepText:"select department",swChangeCityText:"select a city departure",swYouNameText:"You name",swHelloText:"Hello",swChangeManagerText:"select the operator to start a dialogue",swManagerText:"Manager",swDepText:"Department",swCityText:"City",swFeedbackText0:"Leave your message, we will call you back or reply to your specified email address.",swFeedbackText1:"Leave your message, we will call you back at your specified phone number.",swFeedbackText2:"Leave your message, we will answer to your specified email address.",swFeedbackText3:"Leave your message, we will call to the specified number or reply to mail.",swPhoneText:"Phone",swEmailText:"Email",swEmptyErrorText:"Fill in all fields",swEmailErrorText:"Wrong e-mail address",swMessageSendedText:"Your message has been sent successfully",swAnswerText1:"the answer you will get your specified e-mail",swAnswerText2:"The answer you get to the designated phone",swAnswerOrText:"or e-mail ",swCloseWindowText:"Close window",swNoReplyText:"Sorry, all the operators are busy",swNoReplyContactsText:"Leave your contact details and we will answer!",swGeneratorTitleText:"Time for presents!",swGeneratorContentText:"Want to take part in the draw of a number of gifts?",swGenDaysText0:"DAYS",swGenDaysText1:"DAY",swGenDaysText2:"DAYS",swGenDaysText3:"DAYS",swGenHoursText0:"HOURS",swGenHoursText1:"HOUR",swGenHoursText2:"HOURS",swGenHoursText3:"HOURS",swGenMinutesText0:"MINUTES",swGenMinutesText1:"MINUTE",swGenMinutesText2:"MINUTES",swGenMinutesText3:"MINUTES",swGenSecondsText0:"SECONDS",swGenSecondsText1:"SEC",swGenSecondsText2:"SECONDS",swGenSecondsText3:"SECONDS",swGenNameText:"YOU NAME",swGenPhoneText:"YOU PHONE",swGenEmailText:"YOU EMAIL",swGenBtnYesText:"Yes",swGenBtnNoText:"No, thanks",swGenFeedbackText:"Thank You, your application is successfully sent",swGenFeedbackText1:"Manager will contact you with in the near future",swGenNoWorked:"The generator is not yet supported in this version of your browser!",swRequestPermissionText:"asks for permission to connect. To provide access?",swPermissionAccessText:"Permission is granted.",swNewMesageText:"New message",swInvitationText:"Hello! Welcome you to our website. Are there any questions? Can ask them right now!",swNoManagerTitle:"Operators do not have in place",swNoManagerText:"Leave your message and we will answer",swManagerHelloText:"Hello, my name is ",swManagerManHelpText:"I will be glad to help you.",swManagerWomanHelpText:"I will be glad to help you.",swServerErrorText:"Try a couple of seconds, an error connecting to the server ...",swInText:" in "}}},s.prototype.setConsts=function(){this.consts={SW_MANAGER_STATUS_OFFLINE:0,SW_MANAGER_STATUS_ONLINE:1,SW_MESSAGE_NOTVIEW:0,SW_MESSAGE_VIEW:1,SW_MESSAGE_FROM_SITE:0,SW_MESSAGE_FROM_MANAGER:1,SW_NO_INVITATION_TIMEOUT:60,SW_BTN_ACTION_TIMEOUT:15,SW_CHECK_MESSAGES_TIMEOUT:5e3}},s.prototype.setSettings=function(){this.settings={clientName:"",callbackOpened:!1,chatOpened:!1,departments:!1,design:!1,appEvents:{},feedback:!1,feedbackOpened:!1,findDepartmentId:!1,findOperatorId:!1,findOperatorType:0,foreverChat:0,generatorDepartments:!1,generatorOpened:!1,hideAll:!1,hideAnchor:!1,hideCloseBtn:0,hideOfflineAnchor:!1,imgServerUrl:"http://web.archive.org/web/20171014090326/https://img.streamwood.ru/",invitationManager:!1,invitationOpened:!1,manager:!1,managerName:"",managerStatus:this.consts.SW_MANAGER_STATUS_OFFLINE,managers:!1,messageCounter:0,noReplyOpened:!1,recallOpened:!1,recallShowTime:!1,recallAnimationIteration:0,recallBtnColor:"80d189",recallBtnColorRid:"C6FBCC",recallBtnTube:"right",recallBtnHoverColor:"e8b45e",recallBtnHoverColorRid:"fbe3be",recallBtnHoverTube:"right",recallSource:"",recallSolid:"d72e7d",selectRecallTime:!1,zalikeOpened:!1,callId:0,callStatus:0,registratorOpened:!1,serverUrl:"http://web.archive.org/web/20171014090326/https://clients.streamwood.ru/",smallWindow:!1,socketServerUrl:"http://web.archive.org/web/20171014090326/https://chat1.streamwood.ru:443/",swDomainKey:!1,swKey:!1,swSocketsLoaded:!1,title:!1,titleTimeout:1,userData:{},version:"2.6.0"}},s.prototype.setStrings=function(){this.strings={currentOpenedPages:"swc_openedPages",clientName:"swc_clientname",generatorDisabled:"swc_generatordisabled",innerHeight:"swc_innerHeight",innerWidth:"swc_innerWidth",isConnection:"swc_isconnection",firstLoadTime:"swc_swfirstloadtime",firstMessage:"swc_swfirstmessage",genActionEnd:"swc_swgenfinish",genCountDown:"swc_swgencountdown",noNewVisit:"swc_swnonewvisit",nocallback:"swc_nocallback",noexitcallback:"swc_noexitcallback",mainPage:"swc_mainpage",opened:"swc_swopened",sessionId:"swc_swsessionid",soundOff:"swc_swsoundoff",timeAll:"swc_swtimeall",timePage:"swc_swtimepage",rating:"swc_swrating",referrer:"swc_swreferrer",updateMainPage:"swc_updatemainpage"}},s.prototype.setSounds=function(){this.sounds={incomingSoundHandler:!1}},s.prototype.time2int=function(e){var t=e.split(":");return 1e3*(3600*parseInt(t[0],10)+60*parseInt(t[1],10))},s.prototype.padZero=function(e,t){for(;e.toString().length<t;)e="0"+e;return e},s.prototype.int2time=function(e){var t=[];return t[0]=Math.floor(e/36e5),t[1]=Math.floor(e%36e5/6e4),t[0]=this.padZero(t[0],2),t[1]=this.padZero(t[1],2),t.join(":")},s.prototype.setCallbackRecallTimeSelect=function(){var t=this,s=new Date,n=60*t.getClientServerOffset(),i=parseInt(e("#recall-select-day").val(),10)||s,o=new Date(i),a=this.callbackWorkingTimeByDay(o.getDay()),r=this.time2int(a.start_time),l=this.time2int(a.end_time);o.toDateString()==s.toDateString()&&(r=this.time2int(s.getHours()+":"+s.getMinutes()),r+=3e5-r%3e5);for(var c="",d=r;d<l;){var h=this.int2time(d-1e3*n);d>60*a.start_time.substr(0,2)*60*1e3&&(c+='<option value="'+d+'">'+h+"</option>"),d+=6e5}e("#recall-select-hour").html(c)},s.prototype.setCallbackRecallDaySelect=function(){var t=this,s=e("#recall-select-day"),n="",i=new Date;i.setMinutes(0),i.setHours(0),i.setSeconds(0),i.setMilliseconds(0);for(var o=0;o<7;o++){var a=new Date(i.getTime()+24*o*36e5);t.callbackIsWorkingDay(a)&&(n+='<option value="'+a.getTime()+'">'+t.callbackFormatRecallDate(a)+"</option>")}s.html(n)},s.prototype.callbackFormatRecallDate=function(e){var t="";return t+=e.getDate(),t+=" ",t+=",,,,,,,,,,,".split(",")[e.getMonth()],t+=", ",t+=",,,,,,,".split(",")[e.getDay()]},s.prototype.callbackIsWorkingDay=function(e){if(!+this.settings.design.recall_is_show_time)return!0;var t=this.callbackIsWorkingWeekDay(e.getDay()),s=new Date;if(s.toDateString()===e.toDateString()&&t){var n=this.callbackIsWorkingTime(s),i=this.callbackWorkingTimeByDay(e.getDay()).start_time.substr(0,2),o=s.getHours();return!n&&o<i||n}return t},s.prototype.callbackIsWorkingWeekDay=function(e){return!+this.settings.design.recall_is_show_time||this.settings.design["recall-weekdays"]&&-1!==this.settings.design["recall-weekdays"].indexOf(e)},s.prototype.callbackIsWorkingTime=function(e){if(this.callbackIsWorkingWeekDay(e.getDay())){new Date;var t=60*this.getClientServerOffset(),s=this.callbackWorkingTimeByDay(e.getDay()),n=s.start_time.split(":"),i=new Date(e.getTime());if(i.setHours(n[0]),i.setMinutes(n[1]),i.setSeconds(-t),i.setMilliseconds(0),e.getTime()<i.getTime())return!1;n=s.end_time.split(":");var o=new Date(e.getTime());return o.setHours(n[0]),o.setMinutes(n[1]),o.setSeconds(-t),o.setMilliseconds(0),o.getTime()>e.getTime()}return!1},s.prototype.callbackWorkingTimeByDay=function(e){if(!+this.settings.design.recall_is_show_time)return{start_time:"00:00",end_time:"23:59"};var t=this.settings.design.recall_start_time,s=this.settings.design.recall_end_time;return Array.isArray(t)&&(t=t[e]||"00:00"),Array.isArray(s)&&(s=s[e]||"00:00"),{start_time:t,end_time:s}},s.prototype.getClientServerOffset=function(){return void 0===this.client_server_offset||"undefined"==this.client_server_offset?(new Date).getTimezoneOffset()+180:parseInt(this.client_server_offset)},s.prototype.setClientServerOffset=function(e){new Date;var t=new Date,s=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());this.client_server_offset=((e-s/1e3)/60).toFixed(0)};var n={chat:'<div class="stream-wood-chat"><a class="sw-close" href="javascript:void(0)"></a><a class="sw-sound" href="javascript:void(0)"></a><div class="sw-container"><div class="sw-manager"></div><div class="sw-messages-list"></div><div class="sw-message-group"></div><div class="sw-send-group"><a class="good" href="javascript:void(0)"></a><a class="bad" href="javascript:void(0)"></a><div class="sw-upload" id="upload"><input type="file" id="file_upload" name="file"></div><a class="sw-send-btn sw-send-btn-rating-on" href="javascript:void(0)"><span class="sw-send-btn-text"></span></a><span class="sw-enter"><span> </span> Ctrl+Enter</span></div><div class="sw-error sw-error-main"></div></div>',invitation:'<div class="stream-wood-invitation" style="display: none;"><div class="sw-manager"></div><div class="sw-message-group"><div class="sw-newmessage"><dl><dt></dt></dl><textarea class="sw-message"></textarea></div></div><div class="sw-send-group"><a class="sw-send-btn sw-cancel-btn" href="javascript:void(0)"></a><a class="sw-send-btn jssw-send-btn" href="javascript:void(0)"></a></div><div class="sw-error sw-error-main"></div></div>',invitation_top:'<div class="sw-manager-spot"><div class="sw-manager-info"><img src="" width="60" height="60" alt=""/><p class="sw-manager-name"></p><p class="sw-manager-position"></p></div><p class="invitation-text"></p></div>',noreply:'<div class="stream-wood-noreply"><div class="sw-manager sw-manager-no-manager"><p class="sw-title"></p><p class="sw-info"></p></div><div class="sw-message-group"></div><div class="sw-send-group"><a href="#" class="sw-send-btn sw-cancel-btn">, </a><a href="#" class="sw-send-btn"></a></div><div class="sw-error sw-error-main"></div></div>',generator:'<div class="stream-wood-generator" style="display: none;"><div class="sw-container"><div class="sw-manager"><div class="sw-generator-title"><span class=generator-title></span></div></div></div></div>',btn:'<a class="stream-wood-btn" href="javascript:void(0)"><span class="sw-title"></span><br><span class="sw-status"></span></a>',zalike:'<div class="stream-wood-zalike-window"><div class="stream-wood-zalike-window-head"><div class="stream-wood-zalike-title"></div><div class="stream-wood-zalike-subtitle"></div><div class="stream-wood-zalike-close"></div></div><div class="stream-wood-zalike-window-body"><div class="stream-wood-zalike-window-body-center"></div><div class="stream-wood-zalike-window-body-button"><a class="stream-wood-zalike-vk-button" href="#" id="vkAdd"></a><div>  ,      </div></div></div><div class="stream-wood-zalike-window-footer"><a class="stream-wood-zalike-window-footer-link" href="#" target="_blank">  Streamwood</a></div></div>',recallcenter:'<div class="stream-wood-recall-3 stream-wood-recall-center"><div class="stream-wood-recall-container"><a class="stream-wood-recall-close" href=""></a><div class="stream-wood-recall-logo-container"></div><div class="stream-wood-recall-content"><div class="stream-wood-recall-title">,     25 ?</div><div class="stream-wood-recall-departments"></div><div class="stream-wood-recall-timer"><div class="stream-wood-recall-timer-digit">25</div><div class="stream-wood-recall-timer-text"></div><div class="sw-percent"></div><div id="sw-slice" class="gt50"><div class="pie"></div><div class="pie fill"></div></div></div><div class="sw-recall-select-time-container"><select id="recall-select-day" class="sw-recall-select-day"></select><select id="recall-select-hour" class="sw-recall-select-hour"></select></div><div class="stream-wood-recall-number"><span class="phone-number-text"> :</span><input class="sw-recall-phone" value="+7 ..."><a class="sw-recall-send-btn"> !</a><div class="timer-text">00:25,00</div><p class="first">    <br> !</p></div><div class="stream-wood-recall-number-wait"><span class="phone-number-text-wait"></span></br></br><span>,  !</span></div><div class="stream-wood-recall-button-container"><a class="sw-recall-send-btn"> !</a></div><p class="sw-recall-number-error">   </p><div class="sw-recall-select-time"><a class="sw-recall-select-time-link" href="javascript:void(0)">   </a></div></div><div class="stream-wood-recall-copyright">  <a href="http://web.archive.org/web/20171014090326/https://streamwood.ru/?utm_source=recall&amp;utm_medium=self&amp;utm_campaign=streamwood&amp;utm_content=150750498&amp;utm_term=" class="sw-copy" target="_blank">StreamWood</a></div></div></div>',recallside:'<div class="stream-wood-recall-3 stream-wood-recall-side"><a class="stream-wood-recall-close" href=""></a><a class="stream-wood-recall-hide-left" href=""><span class="recall-hide recall-hide-close"></span></a><a class="stream-wood-recall-hide-right" href=""><span class="recall-hide recall-hide-close"></span></a><div class="stream-wood-recall-container"><div class="stream-wood-recall-logo-container"></div><div class="stream-wood-recall-content"><div class="stream-wood-recall-title">,       ?</div><div class="stream-wood-recall-departments"></div><div class="stream-wood-recall-timer"><div class="stream-wood-recall-timer-digit">25</div><div class="stream-wood-recall-timer-text"></div><div class="sw-percent"></div><div id="sw-slice" class="gt50"><div class="pie"></div><div class="pie fill"></div></div></div><div class="sw-recall-select-time-container"><select id="recall-select-day" class="sw-recall-select-day"></select><select id="recall-select-hour" class="sw-recall-select-hour"></select></div><div class="stream-wood-recall-number"><p class="phone-number-text"> :</p><input class="sw-recall-phone" value="+7 ..."><p class="first">    <br>  !</p></div><div class="stream-wood-recall-button-container"><a class="sw-recall-send-btn"> !</a><div class="timer-text">00:25,00</div></div><div class="stream-wood-recall-number-wait"><span class="phone-number-text-wait"></span></br></br><span>,  !</span></div><p class="sw-recall-number-error">   </p><div class="sw-recall-select-time"><a class="sw-recall-select-time-link" href="javascript:void(0)">   </a></div></div><div class="stream-wood-recall-copyright">  <a href="http://web.archive.org/web/20171014090326/https://streamwood.ru/?utm_source=recall&amp;utm_medium=self&amp;utm_campaign=streamwood&amp;utm_content=150750498&amp;utm_term=" class="sw-copy" target="_blank">StreamWood</a></div></div></div>',generator_new:'<div class="stream-wood-generator-2" style="display: none;"><a class="stream-wood-generator-close" href="#"></a><div class="stream-wood-generator-logo-container"></div><div class="stream-wood-generator-container"><div class="stream-wood-generator-title"><span class="generator-title-span"></span></div><div class="stream-wood-generator-action-img"></div><div class="stream-wood-generator-counter"><div class="stream-wood-generator-counter-box"><div class="stream-wood-generator-counter-num" id="streamwood-generator-day">00</div></div><div class="stream-wood-generator-counter-dot">:</div><div class="stream-wood-generator-counter-box"><div class="stream-wood-generator-counter-num" id="streamwood-generator-hour">00</div></div><div class="stream-wood-generator-counter-dot">:</div><div class="stream-wood-generator-counter-box"><div class="stream-wood-generator-counter-num" id="streamwood-generator-min">00</div></div><div class="stream-wood-generator-counter-dot">:</div><div class="stream-wood-generator-counter-box"><div class="stream-wood-generator-counter-num" id="streamwood-generator-sec">00</div></div></div><div class="stream-wood-generator-counter-text-box"><div class="stream-wood-generator-counter-text"></div><div class="stream-wood-generator-counter-text"></div><div class="stream-wood-generator-counter-text"></div><div class="stream-wood-generator-counter-text"></div></div><div class="stream-wood-generator-action-content"><div class="stream-wood-generator-action-title"></div><div class="stream-wood-generator-action-text"></div></div><div class="stream-wood-generator-client-data"><div class="stream-wood-generator-client-name"><input type="text" value=" " class="sw-gen-name stream-wood-generator-input"></input><a class="stream-wood-generator-send-btn" href="#" onclick="return false"></a></div><div class="sw-error sw-name-error"></div><div class="stream-wood-generator-client-phone"><input type="text" value=" " class="sw-gen-phone stream-wood-generator-input"></input><a class="stream-wood-generator-cancel-btn" href="#" onclick="return false">,</a></div><div class="sw-error sw-phone-error"></div></div></div><div class="stream-wood-generator-copyright">  <a href="http://web.archive.org/web/20171014090326/https://streamwood.ru/">StreamWood</a></div></div>',registrator:'<svg xmlns="http://www.w3.org/2000/svg" display="none"><symbol id="name" viewBox="0 0 50 50"><path style="fill: currentColor;" d="M30.933,32.528c-0.146-1.612-0.09-2.737-0.09-4.21c0.73-0.383,2.038-2.825,2.259-4.888c0.574-0.047,1.479-0.607,1.744-2.818  c0.143-1.187-0.425-1.855-0.771-2.065c0.934-2.809,2.874-11.499-3.588-12.397c-0.665-1.168-2.368-1.759-4.581-1.759  c-8.854,0.163-9.922,6.686-7.981,14.156c-0.345,0.21-0.913,0.878-0.771,2.065c0.266,2.211,1.17,2.771,1.744,2.818  c0.22,2.062,1.58,4.505,2.312,4.888c0,1.473,0.055,2.598-0.091,4.21C19.367,37.238,7.546,35.916,7,45h38  C44.455,35.916,32.685,37.238,30.933,32.528z"/></symbol><symbol id="phone" viewBox="0 0 42.5 42.5"><path style="fill: currentColor;" d="M42.4,33.1c-0.1-0.4-0.9-0.9-2.3-1.6c-0.4-0.2-0.9-0.5-1.6-0.9s-1.3-0.7-1.9-1.1c-0.6-0.3-1.1-0.6-1.6-0.9c-0.1-0.1-0.3-0.2-0.8-0.5c-0.4-0.3-0.8-0.5-1.1-0.6s-0.6-0.2-0.9-0.2c-0.4,0-0.9,0.3-1.5,0.9s-1.2,1.2-1.7,1.9c-0.5,0.7-1,1.3-1.6,1.9c-0.6,0.6-1,0.9-1.4,0.9c-0.2,0-0.4-0.1-0.7-0.1c-0.3-0.1-0.5-0.2-0.6-0.3s-0.4-0.2-0.7-0.4c-0.3-0.2-0.5-0.3-0.6-0.3c-2.8-1.5-5.1-3.3-7.1-5.3s-3.7-4.3-5.3-7.1c0,0-0.1-0.2-0.3-0.6c-0.2-0.3-0.4-0.6-0.4-0.7c-0.1-0.1-0.2-0.3-0.3-0.6c0-0.5,0-0.7,0-0.9c0-0.4,0.3-0.8,0.9-1.4c0.6-0.6,1.2-1.1,1.9-1.6s1.3-1.1,1.9-1.7c0.6-0.6,0.9-1.1,0.9-1.5c0-0.3-0.1-0.6-0.2-0.9C15.3,9,15,8.7,14.8,8.2c-0.3-0.4-0.5-0.7-0.5-0.8c-0.3-0.5-0.6-1-0.9-1.6c-0.3-0.6-0.7-1.2-1.1-1.9c-0.4-0.7-0.7-1.2-0.9-1.6C10.5,1,9.9,0.2,9.6,0.1C9.4,0,9.2,0,8.9,0C8.4,0,7.7,0.1,6.8,0.3S5.2,0.7,4.7,0.9c-1,0.4-2.1,1.7-3.2,3.7C0.5,6.5,0,8.4,0,10.2c0,0.5,0,1.1,0.1,1.6s0.2,1.1,0.4,1.7c0.2,0.6,0.3,1.1,0.4,1.4c0.1,0.3,0.3,0.9,0.6,1.7c0.3,0.9,0.5,1.4,0.6,1.5c0.7,2,1.5,3.7,2.5,5.3c1.6,2.6,3.8,5.2,6.5,8c2.7,2.7,5.4,4.9,8,6.5c1.5,1,3.3,1.8,5.3,2.5c0.2,0.1,0.7,0.2,1.5,0.5c0.8,0.3,1.4,0.5,1.7,0.6c0.3,0.1,0.8,0.3,1.4,0.4c0.6,0.2,1.2,0.3,1.7,0.4c0.5,0.1,1,0.1,1.6,0.1c1.9,0,3.7-0.5,5.6-1.5c2-1.1,3.3-2.2,3.7-3.2c0.2-0.5,0.4-1.2,0.6-2.1c0.2-0.9,0.3-1.6,0.3-2.1C42.5,33.5,42.5,33.3,42.4,33.1z"/></symbol><symbol id="email" viewBox="0 0 42.5 28.3"><path style="fill: currentColor;" d="M21.3,18L1.7,0h38.9L21.3,18L21.3,18z M0,26.7V1.4l13.5,12.7L0,26.7z M1.7,28.3l13.5-12.7l6,5.5l6-5.5l13.3,12.7H1.7L1.7,28.3z M29,14L42.5,1.4v25.4L29,14z"/></symbol><symbol id="cons_left" viewBox="0 0 30 63.7"><path style="fill: currentColor;" d="M0,63.7h30V0l-1.8,0c-4.7,0-8.9,3.1-10.3,7.6L0,63.7z"/></symbol><symbol id="cons_right" viewBox="0 0 30 63.7"><path style="fill: currentColor;" d="M30,63.7H0V0h1.8c4.7,0,8.9,3.1,10.3,7.6L30,63.7z"/></symbol></svg><div class="stream-wood-registrator" style="display: none;"><a class="stream-wood-registrator-close" href="#"></a><div class="stream-wood-registrator-header"><div class="stream-wood-registrator-title-container"><div class="stream-wood-registrator-title">  -</div></div></div><div class="stream-wood-registrator-body"><form class="stream-wood-registrator-form"><div class="stream-wood-registrator-fields"><div class="stream-wood-registrator-custom-fields"></div><div class="strmwd-field-group strmwd-input-date"><div class="strmwd-slash"></div><input class="strmwd-textfield sw-datepicker-here sw-reg-date" data-timepicker="true" id="date_widget" name="date" type="text" placeholder="   "></div><div class="strmwd-field-group strmwd-input-phone"><svg class="strmwd-icon strmwd-icon-phone-mini"><use xlink:href="#phone"></use></svg><div class="strmwd-slash"></div><input class="strmwd-textfield sw-reg-phone" name="phone" type="text" strmwd-mask="+7 (999) 999-99-99" placeholder=" "></div><div class="sw-error sw-phone-error"></div><div class="strmwd-field-group strmwd-input-email"><svg class="strmwd-icon strmwd-icon-email-mini"><use xlink:href="#email"></use></svg><div class="strmwd-slash"></div><input class="strmwd-textfield sw-reg-email" name="email" type="text" placeholder=" "></div><div class="sw-error sw-email-error"></div><div class="strmwd-field-group strmwd-input-name"><svg class="strmwd-icon strmwd-icon-name-mini"><use xlink:href="#name"></use></svg><div class="strmwd-slash"></div><input class="strmwd-textfield sw-reg-name" name="name" type="text" placeholder=" "></div><div class="sw-error sw-name-error"></div></div><div class="stream-wood-registrator-actions"><button class="stream-wood-registrator-action-button"></button></div></form><div class="stream-wood-registrator-success" style="display: none"></div></div><div class="stream-wood-registrator-footer"><div class="stream-wood-registrator-copyright">  <a class="stream-wood-registrator-copyright-a" href="http://web.archive.org/web/20171014090326/http://streamwood.ru/" target="_blank">Streamwood</a></div></div></div>',recall_btn:'<div id="swRecallBtn" class="stream-wood-recall-btn"><div class="sw-call-rad"></div><div class="sw-call-rid"></div><div class="sw-call-img"></div><div class="sw-call-tail"></div></div>',personal_data:function(t){var s="    ",n=" ";"3bb0cecf42a34c9e6f95a98d47ca3d38"===e.fn.SWD.settings.swKey&&(s="         ",n=" ");var i=e('<div class="streamwood-personal-data"><div class="streamwood-personal-notice-wrapper"><input name="personal_data" type="checkbox" checked="checked"/><label class="streamwood-checkbox"></label><label class="streamwood-personal-notice">'+s+'<a href="http://web.archive.org/web/20171014090326/https://streamwood.ru/policy/" target="_blank" class="streamwood-personal-data-toggle">'+n+"</a></label></div></div>");return i.find("label").on("click",function(){var t=e(this).parent().find("input[type=checkbox]");t.prop("checked",!t.prop("checked"))}),t&&i.find("a").attr("href",t),i},advertising_agree:function(t){var s=e('<div class="streamwood-personal-data"><div class="streamwood-personal-notice-wrapper"><input name="advertising_agree" type="checkbox" checked="checked"/><label class="streamwood-checkbox"></label><label class="streamwood-personal-notice">   <a href="#" target="_blank" class="streamwood-personal-data-toggle"> </a></label></div></div>');return s.find("label").on("click",function(){var t=e(this).parent().find("input[type=checkbox]");t.prop("checked",!t.prop("checked"))}),t&&s.find("a").attr("href",t),s},dark_cover_all:'<div class="dark-cover-all"></div>',webpush_modal:'<div class="webpush-wrap"><a class="stream-wood-webpush-close" href="javascript:void(0)"></a><div class="img-wrap"></div><h2>  </h2><p>        </p><button></button><div class="copyright"><span>  </span><i class="logo"></i> <b>Streamwood</b></div></div>',webpush_top:'<div class="webpush-wrap top"><a class="stream-wood-webpush-close" href="javascript:void(0)"></a><div class="img-wrap"></div><h2>  </h2><p>        </p><button></button><div class="copyright"><a href="http://web.archive.org/web/20171014090326/https://streamwood.ru/" target="_blank" style="color: black;"><span>  </span><i class="logo"></i> <b>Streamwood</b></a></div></div>'};if(window.hasOwnProperty("g_swKey")&&window.hasOwnProperty("g_swDomainKey"))return window.swQ.fn.SW({swKey:window.g_swKey,swDomainKey:window.g_swDomainKey});var i=function(){try{this.hasLocalStorage="localStorage"in window&&null!==window.localStorage}catch(e){this.hasLocalStorage=!1}};i.prototype={localStoreSupport:function(){return this.hasLocalStorage},set:function(e,t){if(this.localStoreSupport())localStorage.setItem(e,t);else{document.cookie=e+"="+t+"; path=/; secure"}},get:function(e){if(this.localStoreSupport())return this.boolcast(localStorage.getItem(e));var t="(?:; )?"+e+"=([^;]*);?",s=!1;return new RegExp(t).test(document.cookie)?(s=decodeURIComponent(RegExp.$1),this.boolcast(s)):null},delete:function(e){this.localStoreSupport()?localStorage.removeItem(e):this.set(e,"",-1)},boolcast:function(e){return"true"===e||"false"!==e&&e}}}(swQ);
/*
     FILE ARCHIVED ON 09:03:26 Oct 14, 2017 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 01:33:27 Nov 14, 2018.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  LoadShardBlock: 183.16 (3)
  esindex: 0.005
  captures_list: 309.103
  CDXLines.iter: 11.8 (3)
  PetaboxLoader3.datanode: 93.392 (4)
  exclusion.robots: 77.837
  xauthn.chkprivs: 0.059
  exclusion.robots.policy: 77.797
  RedisCDXSource: 5.62
  PetaboxLoader3.resolve: 133.252 (4)
  xauthn.identify: 77.291
  load_resource: 69.833
*/